import"../chunks/disclose-version.Bg9kRutz.js";import{f as W,p as C,aF as b,c as o,r as t,s as d,t as z,b as l,g as e,a as T,a2 as we,O as q,n as Le}from"../chunks/runtime.CLSstnwU.js";import{c as ne,a as _,e as ke,t as h,d as ce}from"../chunks/utils.kA-YjkFf.js";import{i as Se}from"../chunks/lifecycle.V0dJQ05z.js";import{o as ze}from"../chunks/index-client.DT-fMr9Z.js";import{s as A}from"../chunks/supabaseClient.CaMOPPuz.js";import{s as j}from"../chunks/render.D17u6ZCY.js";import{i as N}from"../chunks/if.b2Q-jNLG.js";import{e as Ee}from"../chunks/each.sV1uapQk.js";import{r as ve}from"../chunks/attributes.DiUoHvyc.js";import{b as ue}from"../chunks/input.CQDk-SFX.js";import{b as je}from"../chunks/select.BAP3DC-4.js";import{p as E}from"../chunks/proxy.D-58ufVl.js";import{I as Pe,s as Fe}from"../chunks/Icon.BPJo08Fo.js";import{l as Me,s as Ne}from"../chunks/props.BD0jg91j.js";import{P as Ae}from"../chunks/pencil.5iKfE7p4.js";import{T as De}from"../chunks/trash-2.DXHXJoNa.js";import{S as qe}from"../chunks/search.4XRWJUve.js";import{A as Ce}from"../chunks/arrow-up-down.Ch6Rz2vF.js";import{P as Te}from"../chunks/plus.WugTGZSv.js";import{X as Ie}from"../chunks/x.DXpGL3Re.js";function Ue(u,r){const c=Me(r,["children","$$slots","$$events","$$legacy"]);Pe(u,Ne({name:"user"},()=>c,{iconNode:[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}],["circle",{cx:"12",cy:"7",r:"4"}]],children:(i,f)=>{var m=ne(),v=W(m);Fe(v,r,"default",{}),_(i,m)},$$slots:{default:!0}}))}var $e=h('<form class="flex flex-col gap-4"><h3 class="text-xl font-semibold"> </h3> <div class="flex flex-col gap-2"><label for="name" class="font-medium">Name</label> <input id="name" type="text" required class="bg-secondary border-secondary rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-ring" placeholder="Enter name"></div> <button type="submit" class="bg-primary text-primary-foreground px-4 py-2 rounded-lg hover:bg-primary/90 mt-4"> </button></form>');function He(u,r){var g;C(r,!0);let c=b(E(((g=r.lead)==null?void 0:g.name)??""));const n=x=>{x.preventDefault(),r.onSave({name:e(c)})};var i=$e(),f=o(i),m=o(f);t(f);var v=d(f,2),y=d(o(v),2);ve(y),t(v);var w=d(v,2),p=o(w);t(w),t(i),z(()=>{j(m,`${(r.lead?"Edit":"Add")??""} Lead`),j(p,`${(r.lead?"Update":"Add")??""} Lead`)}),ke("submit",i,n),ue(y,()=>e(c),x=>l(c,x)),_(u,i),T()}var Oe=(u,r)=>r.onEdit(r.lead),Qe=(u,r)=>r.onDelete(r.lead.id),Xe=h('<div class="bg-card border border-border rounded-lg p-4 hover:shadow-lg transition-shadow"><div class="flex items-start justify-between"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary"><!></div> <div><h3 class="text-lg font-medium break-words"> </h3></div></div> <div class="flex items-center gap-2"><button class="hover:bg-muted rounded-lg text-muted-foreground hover:text-foreground" title="Edit"><!></button> <button class="p-1.5 hover:bg-muted rounded-lg text-red-400" title="Delete"><!></button></div></div></div>');function Be(u,r){C(r,!0);var c=Xe(),n=o(c),i=o(n),f=o(i),m=o(f);Ue(m,{size:20}),t(f);var v=d(f,2),y=o(v),w=o(y,!0);t(y),t(v),t(i);var p=d(i,2),g=o(p);g.__click=[Oe,r];var x=o(g);Ae(x,{size:16}),t(g);var P=d(g,2);P.__click=[Qe,r];var I=o(P);De(I,{size:16}),t(P),t(p),t(n),t(c),z(()=>j(w,r.lead.name)),_(u,c),T()}ce(["click"]);const Ge=(u,r)=>{l(r,E(e(r)==="asc"?"desc":"asc"))};var Je=h('<div class="bg-green-500/20 text-green-400 p-4 rounded-lg"> </div>'),Ke=h('<div class="bg-red-500/20 text-red-400 p-4 rounded-lg"> </div>'),Re=(u,r,c)=>{l(r,null),l(c,!0)},Ve=h('<div class="flex justify-center p-8"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div></div>'),We=h('<div class="text-center p-8 bg-card rounded-lg border border-border">No leads found.</div>'),Ye=(u,r)=>l(r,e(r)-1),Ze=(u,r)=>l(r,e(r)+1),er=h('<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"></div> <div class="flex flex-col sm:flex-row justify-between items-center gap-4 mt-4"><div class="text-sm text-muted-foreground text-center sm:text-left"> </div> <div class="flex flex-col sm:flex-row items-center gap-4"><select class="bg-secondary border-secondary rounded-lg px-2 py-1 focus:outline-none focus:ring-2 focus:ring-ring w-full sm:w-auto"><option>6 per page</option><option>12 per page</option><option>24 per page</option><option>48 per page</option></select> <div class="flex gap-2"><button class="px-3 py-1 rounded-lg border border-border hover:bg-muted disabled:opacity-50">Previous</button> <button class="px-3 py-1 rounded-lg border border-border hover:bg-muted disabled:opacity-50">Next</button></div></div></div>',1),rr=h('<div class="fixed inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center p-4 z-50"><div class="bg-card p-6 rounded-lg w-full max-w-md relative border border-border"><button class="absolute right-4 top-4 p-1 hover:bg-muted rounded-lg"><!></button> <!></div></div>'),tr=h('<div class="flex flex-col gap-4 container mx-auto "><div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"><h2 class="text-2xl font-bold">Leads Management</h2></div> <!> <!> <div class="flex flex-col md:flex-row items-center justify-between gap-4"><div class="flex flex-col md:flex-row gap-4 w-full md:w-auto"><div class="relative flex-1 md:w-[300px]"><!> <input type="text" placeholder="Search leads..." class="pl-10 pr-4 py-2 bg-secondary border-secondary rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-ring"></div> <button class="flex items-center gap-2 px-4 py-2 rounded-lg border border-border hover:bg-muted whitespace-nowrap">Sort by Name <!></button></div> <button class="flex items-center gap-2 bg-primary text-primary-foreground px-4 py-2 rounded-lg hover:bg-primary/90 justify-center flex-1 md:flex-initial whitespace-nowrap"><!> Add Lead</button></div> <!> <!></div>');function ar(u,r){C(r,!0);let c=b(""),n=b(1),i=b(6),f=b(E([])),m=b(!1),v=b(null),y=b("asc"),w=b(!1),p=b(null),g=b(null);const x=q(()=>e(f).filter(s=>s.name.toLowerCase().includes(e(c).toLowerCase())).sort((s,a)=>e(y)==="asc"?s.name<a.name?-1:s.name>a.name?1:0:a.name<s.name?-1:a.name>s.name?1:0)),P=q(()=>e(x).slice((e(n)-1)*e(i),e(n)*e(i))),I=q(()=>Math.ceil(e(x).length/e(i))),U=async()=>{l(w,!0);const{data:s,error:a}=await A.from("leads").select("*");a?(console.error("Error fetching leads:",a),l(p,"Failed to fetch leads.")):(l(f,E(s)),l(p,null)),l(w,!1)},me=async s=>{const{error:a}=await A.from("leads").delete().eq("id",s);a?(console.error("Error deleting lead:",a),l(p,"Failed to delete lead.")):(l(g,"Lead deleted successfully!"),l(p,null),await U())},fe=s=>{l(v,E(s)),l(m,!0)},Y=()=>{l(m,!1),l(v,null)},pe=async s=>{const{error:a}=e(v)?await A.from("leads").update({name:s.name}).eq("id",e(v).id):await A.from("leads").insert([{name:s.name}]);a?(console.error("Error saving lead:",a),l(p,"Failed to save lead.")):(l(g,E(e(v)?"Lead updated successfully!":"Lead added successfully!")),l(p,null),await U(),Y())};we(()=>{U()});var $=tr(),Z=d(o($),2);N(Z,()=>e(g),s=>{var a=Je(),L=o(a,!0);t(a),z(()=>j(L,e(g))),_(s,a)});var ee=d(Z,2);N(ee,()=>e(p),s=>{var a=Ke(),L=o(a,!0);t(a),z(()=>j(L,e(p))),_(s,a)});var H=d(ee,2),O=o(H),Q=o(O),re=o(Q);qe(re,{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",size:20});var te=d(re,2);ve(te),t(Q);var X=d(Q,2);X.__click=[Ge,y];var ge=d(o(X)),_e=q(()=>e(y)==="asc"?"":"rotate-180");Ce(ge,{size:16,get class(){return e(_e)}}),t(X),t(O);var B=d(O,2);B.__click=[Re,v,m];var be=o(B);Te(be,{size:20}),Le(),t(B),t(H);var ae=d(H,2);N(ae,()=>e(w),s=>{var a=Ve();_(s,a)},s=>{var a=ne(),L=W(a);N(L,()=>e(f).length===0,k=>{var S=We();_(k,S)},k=>{var S=er(),F=W(S);Ee(F,21,()=>e(P),M=>M.id,(M,ye)=>{Be(M,{get lead(){return e(ye)},onEdit:fe,onDelete:me})}),t(F);var oe=d(F,2),G=o(oe),he=o(G);z(()=>j(he,`Showing ${(e(n)-1)*e(i)+1} to ${Math.min(e(n)*e(i),e(x).length)??""} of ${e(x).length??""} results`)),t(G);var se=d(G,2),D=o(se),J=o(D);J.value=(J.__value=6)==null?"":6;var K=d(J);K.value=(K.__value=12)==null?"":12;var R=d(K);R.value=(R.__value=24)==null?"":24;var de=d(R);de.value=(de.__value=48)==null?"":48,t(D);var le=d(D,2),V=o(le);V.__click=[Ye,n];var ie=d(V,2);ie.__click=[Ze,n],t(le),t(se),t(oe),z(()=>{V.disabled=e(n)===1,ie.disabled=e(n)===e(I)}),je(D,()=>e(i),M=>l(i,M)),_(k,S)},!0),_(s,a)});var xe=d(ae,2);N(xe,()=>e(m),s=>{var a=rr(),L=o(a),k=o(L);k.__click=Y;var S=o(k);Ie(S,{size:20}),t(k);var F=d(k,2);He(F,{get lead(){return e(v)},onSave:pe}),t(L),t(a),_(s,a)}),t($),ue(te,()=>e(c),s=>l(c,s)),_(u,$),T()}ce(["click"]);var or=h('<main class="container mx-auto min-h-screen p-4"><!></main>');function zr(u,r){C(r,!1);const c=async()=>{const{data:f,error:m}=await A.from("leads").select("*");m&&console.error("Error fetching leads:",m)};ze(()=>{c()}),Se();var n=or(),i=o(n);ar(i,{}),t(n),_(u,n),T()}export{zr as component};
