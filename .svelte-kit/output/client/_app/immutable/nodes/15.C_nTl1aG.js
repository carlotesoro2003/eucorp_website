import"../chunks/disclose-version.Bg9kRutz.js";import{f as W,p as ie,a as oe,c as e,s,r as t,n as J,aN as ge,aO as ve,t as T,g as a,b as v,m as E,i as ue}from"../chunks/runtime.CLSstnwU.js";import{s as R}from"../chunks/render.D17u6ZCY.js";import{i as V}from"../chunks/if.b2Q-jNLG.js";import{e as fe,i as be}from"../chunks/each.sV1uapQk.js";import{c as X,a as x,d as le,e as me,t as O}from"../chunks/utils.kA-YjkFf.js";import{r as q,s as pe}from"../chunks/attributes.DiUoHvyc.js";import{t as H}from"../chunks/class.9GukHOdr.js";import{b as ye}from"../chunks/select.BAP3DC-4.js";import{i as _e}from"../chunks/lifecycle.V0dJQ05z.js";import{o as xe}from"../chunks/index-client.DT-fMr9Z.js";import{s as U}from"../chunks/supabaseClient.CaMOPPuz.js";import{r as se}from"../chunks/misc.C2nsS1Cr.js";import{b as P}from"../chunks/input.CQDk-SFX.js";import{p as he}from"../chunks/proxy.D-58ufVl.js";import{I as Y,s as Z}from"../chunks/Icon.BPJo08Fo.js";import{l as ee,s as te}from"../chunks/props.BD0jg91j.js";import{P as ke}from"../chunks/plus.WugTGZSv.js";import{C as we}from"../chunks/circle-alert.DH3NA22_.js";function $e(p,l){const r=ee(l,["children","$$slots","$$events","$$legacy"]);Y(p,te({name:"arrow-left"},()=>r,{iconNode:[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]],children:(g,u)=>{var i=X(),c=W(i);Z(c,l,"default",{}),x(g,i)},$$slots:{default:!0}}))}function je(p,l){const r=ee(l,["children","$$slots","$$events","$$legacy"]);Y(p,te({name:"circle-check"},()=>r,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m9 12 2 2 4-4"}]],children:(g,u)=>{var i=X(),c=W(i);Z(c,l,"default",{}),x(g,i)},$$slots:{default:!0}}))}function Se(p,l){const r=ee(l,["children","$$slots","$$events","$$legacy"]);Y(p,te({name:"target"},()=>r,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["circle",{cx:"12",cy:"12",r:"6"}],["circle",{cx:"12",cy:"12",r:"2"}]],children:(g,u)=>{var i=X(),c=W(i);Z(c,l,"default",{}),x(g,i)},$$slots:{default:!0}}))}var Ee=O('<form class="space-y-6"><div class="grid gap-6"><div><label for="name" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Objective Name</label> <input type="text" id="name" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500" placeholder="Enter objective name"></div> <div><label for="strategic_initiatives" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Strategic Initiatives</label> <textarea id="strategic_initiatives" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500" rows="3" placeholder="Enter strategic initiatives"></textarea></div> <div><label for="kpi" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">KPI</label> <input type="text" id="kpi" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500" placeholder="Enter KPI"></div> <div><label for="persons_involved" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Persons Involved</label> <input type="text" id="persons_involved" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500" placeholder="Enter persons involved"></div> <div><label for="target" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Target</label> <input type="text" id="target" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500" placeholder="Enter target"></div> <div><label for="eval_measures" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Evaluation Measures</label> <textarea id="eval_measures" class="w-full px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500" rows="3" placeholder="Enter evaluation measures"></textarea></div></div> <div class="flex gap-4"><button type="button" class="flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"><!> Back</button> <button type="submit" class="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">Submit Objective</button></div></form>');function Pe(p,l){ie(l,!0);let r=he({name:"",strategic_initiatives:"",kpi:"",persons_involved:"",target:"",eval_measures:""});const _=async n=>{n.preventDefault();try{for(const[S,F]of Object.entries(r))if(!F.trim())throw new Error(`Please fill in the ${S.replace("_"," ")} field`);const{error:y}=await U.from("strategic_objectives").insert({...r,strategic_goal_id:l.selectedGoal,profile_id:l.profile.id});if(y)throw y;l.onSuccess("Strategic Objective added successfully!")}catch(y){l.onError(y.message)}};var g=Ee(),u=e(g),i=e(u),c=s(e(i),2);q(c),t(i);var f=s(i,2),z=s(e(f),2);se(z),t(f);var G=s(f,2),A=s(e(G),2);q(A),t(G);var k=s(G,2),N=s(e(k),2);q(N),t(k);var w=s(k,2),D=s(e(w),2);q(D),t(w);var M=s(w,2),$=s(e(M),2);se($),t(M),t(u);var I=s(u,2),j=e(I);j.__click=function(...n){var y;(y=l.onBack)==null||y.apply(this,n)};var C=e(j);$e(C,{class:"w-5 h-5"}),J(),t(j),J(2),t(I),t(g),me("submit",g,_),P(c,()=>r.name,n=>r.name=n),P(z,()=>r.strategic_initiatives,n=>r.strategic_initiatives=n),P(A,()=>r.kpi,n=>r.kpi=n),P(N,()=>r.persons_involved,n=>r.persons_involved=n),P(D,()=>r.target,n=>r.target=n),P($,()=>r.eval_measures,n=>r.eval_measures=n),x(p,g),oe()}le(["click"]);const Oe=(p,l,r,_)=>{a(l)?v(r,1):v(_,"Please select a strategic goal first.")};var Ge=O('<div class="flex items-center gap-2 p-4 bg-green-100 text-green-700 rounded-lg mb-4"><!> <span> </span></div>'),Ne=O('<div class="flex items-center gap-2 p-4 bg-red-100 text-red-700 rounded-lg mb-4"><!> <span> </span></div>'),Me=O("<option> </option>"),Ie=O('<div class="space-y-4"><label for="strategic_goal" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Select Strategic Goal</label> <select id="strategic_goal" class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"><option>Select a goal</option><!></select> <button class="w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"><!> Continue to Add Objectives</button></div>'),Ce=O('<div class="min-h-screen bg-gray-50 dark:bg-gray-900 p-4 md:p-8"><div class="max-w-4xl mx-auto space-y-6"><div class="flex items-center justify-between bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm"><div><h1 class="text-2xl font-bold text-gray-900 dark:text-white">Create Strategic Objectives</h1> <p class="text-gray-600 dark:text-gray-400 mt-1">Define and manage your strategic objectives</p></div> <!></div> <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm"><div class="flex items-center justify-between mb-8"><div class="flex-1"><div class="relative"><div class="h-2 bg-gray-200 rounded"><div class="h-2 bg-blue-500 rounded transition-all duration-300"></div></div> <div class="flex justify-between absolute -top-3 w-full"><span class="w-8 h-8 flex items-center justify-center bg-blue-500 rounded-full text-white text-sm">1</span> <span class="w-8 h-8 flex items-center justify-center rounded-full text-sm">2</span></div></div> <div class="flex justify-between mt-4"><span class="text-sm font-medium text-gray-600">Select Goal</span> <span class="text-sm font-medium text-gray-600">Add Objectives</span></div></div></div> <!> <!> <!></div></div></div>');function et(p,l){ie(l,!1);let r=null,_=E(null),g=E([]),u=E(null),i=E(0),c=E(null),f=E(null);const z=async()=>{try{const{data:d,error:o}=await U.auth.getSession();if(o)throw o;if(r=d.session,r){const{user:b}=r,{data:m,error:h}=await U.from("profiles").select("id").eq("id",b.id).single();if(h)throw h;v(_,m)}}catch(d){v(f,`Error fetching profile: ${d.message}`)}finally{}},G=async()=>{try{const{data:d,error:o}=await U.from("strategic_goals").select("id, name");if(o)throw o;v(g,d||[])}catch{v(f,"Failed to fetch strategic goals.")}},A=()=>{v(i,0)};xe(()=>{z(),G()}),ge(()=>(a(c),a(f)),()=>{if(a(c)||a(f)){const d=setTimeout(()=>{v(c,null),v(f,null)},5e3);clearTimeout(d)}}),ve(),_e();var k=Ce(),N=e(k),w=e(N),D=s(e(w),2);Se(D,{class:"w-8 h-8 text-blue-500"}),t(w);var M=s(w,2),$=e(M),I=e($),j=e(I),C=e(j),n=e(C);t(C);var y=s(C,2),S=s(e(y),2);t(y),t(j),J(2),t(I),t($);var F=s($,2);V(F,()=>a(c),d=>{var o=Ge(),b=e(o);je(b,{class:"w-5 h-5"});var m=s(b,2),h=e(m,!0);t(m),t(o),T(()=>R(h,a(c))),x(d,o)});var re=s(F,2);V(re,()=>a(f),d=>{var o=Ne(),b=e(o);we(b,{class:"w-5 h-5"});var m=s(b,2),h=e(m,!0);t(m),t(o),T(()=>R(h,a(f))),x(d,o)});var ne=s(re,2);V(ne,()=>a(i)===0,d=>{var o=Ie(),b=s(e(o),2);T(()=>{a(u),ue(()=>{a(g)})});var m=e(b);m.value=(m.__value=null)==null?"":null;var h=s(m);fe(h,1,()=>a(g),be,(Q,K)=>{var B=Me(),ae={},ce=e(B,!0);t(B),T(()=>{ae!==(ae=a(K).id)&&(B.value=(B.__value=a(K).id)==null?"":a(K).id),R(ce,a(K).name)}),x(Q,B)}),t(b);var L=s(b,2);L.__click=[Oe,u,i,f];var de=e(L);ke(de,{class:"w-5 h-5"}),J(),t(L),t(o),ye(b,()=>a(u),Q=>v(u,Q)),x(d,o)},d=>{Pe(d,{get selectedGoal(){return a(u)},get profile(){return a(_)},onBack:A,onSuccess:o=>{v(c,o),v(i,0),v(u,null)},onError:o=>v(f,o)})}),t(M),t(N),t(k),T(()=>{pe(n,"style",`width: ${(a(i)===1?"100%":"0%")??""}`),H(S,"bg-blue-500",a(i)===1),H(S,"text-white",a(i)===1),H(S,"bg-gray-200",a(i)===0),H(S,"text-gray-600",a(i)===0)}),x(p,k),oe()}le(["click"]);export{et as component};
