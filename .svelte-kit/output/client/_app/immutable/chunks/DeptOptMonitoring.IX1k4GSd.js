import"./disclose-version.Bg9kRutz.js";import{f as W,p as Dt,aF as Q,a2 as qt,t as U,g as t,b as R,a as jt,G as Gt,O as Ut,c as a,s as r,r as e,n as kt,m as At}from"./runtime.CLSstnwU.js";import{c as ot,a as s,d as Vt,t as h,b as Ct,e as ht}from"./utils.kA-YjkFf.js";import{I as Et,s as Nt}from"./Icon.BPJo08Fo.js";import{l as Pt,s as Lt}from"./props.BD0jg91j.js";import{s as E}from"./render.D17u6ZCY.js";import{i as F}from"./if.b2Q-jNLG.js";import{e as wt,i as $t}from"./each.sV1uapQk.js";import{r as Yt,a as Ht}from"./attributes.DiUoHvyc.js";import{s as Tt}from"./class.9GukHOdr.js";import{b as Jt}from"./input.CQDk-SFX.js";import{p as gt}from"./proxy.D-58ufVl.js";import{s as rt}from"./supabaseClient.CaMOPPuz.js";import{E as Kt,a as ne}from"./jspdf.plugin.autotable.4s0l0uhg.js";import{D as Qt}from"./download.DXjW2liV.js";import{C as Bt}from"./chevron-left.OWvxCM_q.js";import{C as Wt}from"./chevron-right.BVstNg2_.js";import{r as Zt}from"./misc.C2nsS1Cr.js";import{i as Xt}from"./lifecycle.V0dJQ05z.js";import{s as te,a as ee}from"./store.D2tkwa9F.js";/* empty css                 */import{o as ae}from"./index-client.DT-fMr9Z.js";import{w as re,g as de}from"./index.Czza9BHq.js";function oe(L,i){const y=Pt(i,["children","$$slots","$$events","$$legacy"]);Et(L,Lt({name:"chevron-down"},()=>y,{iconNode:[["path",{d:"m6 9 6 6 6-6"}]],children:(c,x)=>{var v=ot(),$=W(v);Nt($,i,"default",{}),s(c,v)},$$slots:{default:!0}}))}function La(L,i){const y=Pt(i,["children","$$slots","$$events","$$legacy"]);Et(L,Lt({name:"clipboard-list"},()=>y,{iconNode:[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}],["path",{d:"M12 11h4"}],["path",{d:"M12 16h4"}],["path",{d:"M8 11h.01"}],["path",{d:"M8 16h.01"}]],children:(c,x)=>{var v=ot(),$=W(v);Nt($,i,"default",{}),s(c,v)},$$slots:{default:!0}}))}function se(L,i){const y=Pt(i,["children","$$slots","$$events","$$legacy"]);Et(L,Lt({name:"file-text"},()=>y,{iconNode:[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}],["path",{d:"M10 9H8"}],["path",{d:"M16 13H8"}],["path",{d:"M16 17H8"}]],children:(c,x)=>{var v=ot(),$=W(v);Nt($,i,"default",{}),s(c,v)},$$slots:{default:!0}}))}function Ma(L,i){const y=Pt(i,["children","$$slots","$$events","$$legacy"]);Et(L,Lt({name:"lightbulb"},()=>y,{iconNode:[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"}],["path",{d:"M9 18h6"}],["path",{d:"M10 22h4"}]],children:(c,x)=>{var v=ot(),$=W(v);Nt($,i,"default",{}),s(c,v)},$$slots:{default:!0}}))}function It(L,i){const y=Pt(i,["children","$$slots","$$events","$$legacy"]);Et(L,Lt({name:"loader-circle"},()=>y,{iconNode:[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56"}]],children:(c,x)=>{var v=ot(),$=W(v);Nt($,i,"default",{}),s(c,v)},$$slots:{default:!0}}))}function Ra(L,i){const y=Pt(i,["children","$$slots","$$events","$$legacy"]);Et(L,Lt({name:"triangle-alert"},()=>y,{iconNode:[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]],children:(c,x)=>{var v=ot(),$=W(v);Nt($,i,"default",{}),s(c,v)},$$slots:{default:!0}}))}const le=(L,i)=>{const y=new Kt("landscape"),u="Plan Monitoring Report";y.setFontSize(12),y.text("MANUEL S. ENVERGA UNIVERSITY FOUNDATION",14,10),y.setFontSize(10),y.text("SY 2024-2025",14,20),y.setFontSize(14),y.text(u,14,15);const c=["Actions Taken","KPI","Evaluation","Statement","Status","Time Completed"],x=t(i).map(v=>[v.actions_taken,v.kpi,v.evaluation||"Pending Evaluation",v.statement||"Pending Statement",v.is_accomplished?"Achieved":"Not Achieved",v.time_completed?new Date(v.time_completed).toLocaleString():"N/A"]);ne(y,{head:[c],body:x,startY:25,theme:"grid",styles:{fontSize:10},headStyles:{fillColor:[41,128,185]}}),y.save("PlanMonitoring.pdf")},ce=async(L,i,y)=>{R(i,!0);try{const u=await fetch("/api/summary-report-plan-monitoring",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plans:t(y)})}),c=await u.json();if(!u.ok||c.error)throw new Error(c.error||"Failed to generate summary.");const x=new Kt,v="Summary Report";x.setFont("times","normal"),x.setFontSize(12),x.text("MANUEL S. ENVERGA UNIVERSITY FOUNDATION",14,10),x.setFontSize(10),x.text("SY 2024-2025",14,20),x.setFontSize(14),x.text(v,14,15);const $=x.splitTextToSize(c.summaryReport,180);x.setFontSize(12),x.text($,14,35),x.save("PlanMonitoringSummary.pdf")}catch(u){console.error("Error generating summary report:",u),alert("An error occurred while generating the summary report.")}finally{R(i,!1)}},pe=(L,i,y)=>{t(i)<t(y)&&Gt(i)},ge=(L,i)=>{t(i)>1&&Gt(i,-1)};var ve=(L,i)=>R(i,!t(i)),ue=(L,i,y,u,c)=>{R(i,gt(t(y).value)),R(u,!1),c()},me=h("<button> </button>"),xe=h('<div class="absolute top-full left-0 mt-1 w-48 rounded-lg bg-white dark:bg-gray-800 shadow-lg border border-gray-200 dark:border-gray-700 z-10"></div>'),_e=h('<div class="flex items-center justify-center p-8"><!> <span class="ml-2 text-gray-600 dark:text-gray-400">Loading plans...</span></div>'),ye=h('<tr class="hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"><td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-200"> </td><td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-200"> </td><td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-200"> </td><td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-200"> </td><td class="px-6 py-4"><span> </span></td><td class="px-6 py-4 text-sm text-gray-500 dark:text-gray-400"> </td></tr>'),he=h('<div class="overflow-x-auto"><table class="w-full border-collapse"><thead><tr class="bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600"><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Actions Taken</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">KPI</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Evaluation</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Statement</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Status</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Completed</th></tr></thead><tbody class="divide-y divide-gray-200 dark:divide-gray-700"></tbody></table></div> <div class="flex items-center justify-between px-6 py-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600"><div class="text-sm text-gray-700 dark:text-gray-300"> </div> <div class="flex gap-2"><button class="p-2 rounded-lg bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"><!></button> <button class="p-2 rounded-lg bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"><!></button></div></div>',1),be=h('<div class="text-center p-8 text-gray-500 dark:text-gray-400">No plans found matching your criteria.</div>'),fe=h('<div class="min-h-screen bg-gray-50 dark:bg-gray-900 p-4 md:p-8"><div class="max-w-7xl mx-auto"><h1 class="text-2xl md:text-3xl font-bold text-gray-800 dark:text-white mb-6">Plans Monitoring</h1> <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"><div class="flex flex-wrap gap-2 items-center"><div class="relative"><button class="px-4 py-2 rounded-lg text-sm font-medium bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center gap-2"> <!></button> <!></div> <input type="text" placeholder="Search plans..." class="flex-1 px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400"></div> <div class="flex gap-2 justify-end"><button class="px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700 transition-colors flex items-center gap-2"><!> Export PDF</button> <button class="px-4 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"><!> Generate Report</button></div></div> <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"><!></div></div></div>');function Oa(L,i){Dt(i,!0);let y=Q(gt([])),u=Q(gt([])),c=Q("all"),x=Q(!0),v=Q(!1),$=Q(""),K=Q(!1),M=Q(1),D=10,tt=Ut(()=>Math.ceil(t(u).length/D)),B=Ut(()=>t(u).slice((t(M)-1)*D,t(M)*D));const Z=[{value:"all",label:"All Status",color:"bg-blue-600"},{value:"achieved",label:"Achieved",color:"bg-green-600"},{value:"not_achieved",label:"Not Achieved",color:"bg-red-600"}],it=S=>{var o;return((o=Z.find(n=>n.value===S))==null?void 0:o.label)||"All Status"},vt=async()=>{R(x,!0);try{const{data:S,error:o}=await rt.from("plan_monitoring").select(`
                id,
                action_plan_id,
                evaluation,
                statement,
                is_accomplished,
                time_completed,
                action_plans (actions_taken, kpi)
            `);if(o)throw o;R(y,gt(S.map(n=>{var _,A;return{id:n.id,action_plan_id:n.action_plan_id,evaluation:n.evaluation,statement:n.statement,is_accomplished:n.is_accomplished,time_completed:n.time_completed,actions_taken:((_=n.action_plans)==null?void 0:_.actions_taken)||"No Actions Taken",kpi:((A=n.action_plans)==null?void 0:A.kpi)||"No KPI"}}))),q()}catch(S){console.error("Error fetching data:",S)}finally{R(x,!1)}},q=()=>{let S=t(y);if(t(c)==="achieved"?S=S.filter(o=>o.is_accomplished):t(c)==="not_achieved"&&(S=S.filter(o=>!o.is_accomplished)),t($)){const o=t($).toLowerCase();S=S.filter(n=>{var _,A,O;return((_=n.statement)==null?void 0:_.toLowerCase().includes(o))||((A=n.actions_taken)==null?void 0:A.toLowerCase().includes(o))||((O=n.kpi)==null?void 0:O.toLowerCase().includes(o))})}R(u,gt(S)),R(M,1)};vt(),qt(()=>{q()});var et=fe(),b=a(et),N=r(a(b),2),p=a(N),g=a(p),d=a(g);d.__click=[ve,K];var m=a(d);U(()=>E(m,`${it(t(c))??""} `));var k=r(m);oe(k,{class:"w-4 h-4"}),e(d);var C=r(d,2);F(C,()=>t(K),S=>{var o=xe();wt(o,21,()=>Z,$t,(n,_)=>{var A=me();A.__click=[ue,c,_,K,q];var O=a(A,!0);e(A),U(()=>{Tt(A,`w-full px-4 py-2 text-left text-sm hover:bg-gray-50 dark:hover:bg-gray-700 first:rounded-t-lg last:rounded-b-lg ${(t(c)===t(_).value?"bg-gray-50 dark:bg-gray-700":"")??""}`),E(O,t(_).label)}),s(n,A)}),e(o),s(S,o)}),e(g);var f=r(g,2);Yt(f),e(p);var j=r(p,2),w=a(j);w.__click=[le,u];var l=a(w);Qt(l,{class:"w-4 h-4"}),kt(),e(w);var T=r(w,2);T.__click=[ce,v,u];var P=a(T);F(P,()=>t(v),S=>{It(S,{class:"w-4 h-4 animate-spin"})},S=>{se(S,{class:"w-4 h-4"})}),kt(),e(T),e(j),e(N);var H=r(N,2),lt=a(H);F(lt,()=>t(x),S=>{var o=_e(),n=a(o);It(n,{class:"w-6 h-6 animate-spin text-blue-600 dark:text-blue-400"}),kt(2),e(o),s(S,o)},S=>{var o=ot(),n=W(o);F(n,()=>t(u).length>0,_=>{var A=he(),O=W(A),I=a(O),nt=r(a(I));wt(nt,21,()=>t(B),$t,(St,pt)=>{var z=ye(),Y=a(z),xt=a(Y,!0);e(Y);var dt=r(Y),X=a(dt,!0);e(dt);var bt=r(dt),_t=a(bt,!0);e(bt);var yt=r(bt),Mt=a(yt,!0);e(yt);var Rt=r(yt),ft=a(Rt),Ot=a(ft,!0);e(ft),e(Rt);var Ft=r(Rt),zt=a(Ft,!0);U(()=>E(zt,t(pt).time_completed?new Date(t(pt).time_completed).toLocaleString():"N/A")),e(Ft),e(z),U(()=>{E(xt,t(pt).actions_taken),E(X,t(pt).kpi),E(_t,t(pt).evaluation||"Pending"),E(Mt,t(pt).statement||"Pending"),Tt(ft,`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(t(pt).is_accomplished?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200")??""}`),E(Ot,t(pt).is_accomplished?"Achieved":"Not Achieved")}),s(St,z)}),e(nt),e(I),e(O);var ut=r(O,2),ct=a(ut),V=a(ct);U(()=>E(V,`Showing ${(t(M)-1)*D+1} to ${Math.min(t(M)*D,t(u).length)??""} of ${t(u).length??""} entries`)),e(ct);var G=r(ct,2),J=a(G);J.__click=[ge,M];var at=a(J);Bt(at,{class:"w-5 h-5"}),e(J);var st=r(J,2);st.__click=[pe,M,tt];var mt=a(st);Wt(mt,{class:"w-5 h-5"}),e(st),e(G),e(ut),U(()=>{J.disabled=t(M)===1,st.disabled=t(M)===t(tt)}),s(_,A)},_=>{var A=be();s(_,A)},!0),s(S,o)}),e(H),e(b),e(et),U(()=>T.disabled=t(v)),Jt(f,()=>t($),S=>R($,S)),s(L,et),jt()}Vt(["click"]);var ke=h('<div class="flex items-center justify-center p-8"><!> <span class="ml-2 text-gray-600 dark:text-gray-400">Loading risks...</span></div>'),we=h('<div class="p-4 bg-red-50 dark:bg-red-900 text-red-700 dark:text-red-200 rounded-lg"> </div>'),$e=h('<tr class="hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"><td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-200"> </td><td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-200"> </td><td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-200"> </td><td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-200"> </td><td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-200"> </td><td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-200"> </td><td class="px-6 py-4"><span> </span></td></tr>'),Se=h('<div class="overflow-x-auto"><table class="w-full border-collapse"><thead><tr class="bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600"><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">RRN</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Risk Statement</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Likelihood Rating</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Severity</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Control Rating</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Monitoring Rating</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Status</th></tr></thead><tbody class="divide-y divide-gray-200 dark:divide-gray-700"></tbody></table></div>'),Ae=h('<div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"><!></div>');function Ca(L,i){Dt(i,!0);let y=Q(gt([])),u=Q(!0),c=Q(null);(async()=>{try{const{data:K,error:M}=await rt.from("risk_monitoring").select(`
                id,
                risks (
                    rrn,
                    risk_statement
                ),
                likelihood_rating:likelihood_rating_id(name),
                severity:severity_id(name),
                control_rating:control_rating_id(name),
                monitoring_rating:monitoring_rating_id(status),
                is_achieved
            `);if(M)throw M;R(y,gt(K.map(D=>{var tt,B,Z,it;return{id:D.id,rrn:D.risks.rrn,risk_statement:D.risks.risk_statement,likelihood_rating:((tt=D.likelihood_rating)==null?void 0:tt.name)||"Not Available",severity:((B=D.severity)==null?void 0:B.name)||"Not Available",control_rating:((Z=D.control_rating)==null?void 0:Z.name)||"Not Available",monitoring_rating:((it=D.monitoring_rating)==null?void 0:it.status)||"Not Available",is_achieved:D.is_achieved}})))}catch(K){console.error("Error fetching risk monitoring data:",K),R(c,"Failed to fetch risk monitoring data.")}finally{R(u,!1)}})();var v=Ae(),$=a(v);F($,()=>t(u),K=>{var M=ke(),D=a(M);It(D,{class:"w-6 h-6 animate-spin text-blue-600 dark:text-blue-400"}),kt(2),e(M),s(K,M)},K=>{var M=ot(),D=W(M);F(D,()=>t(c),tt=>{var B=we(),Z=a(B,!0);e(B),U(()=>E(Z,t(c))),s(tt,B)},tt=>{var B=Se(),Z=a(B),it=r(a(Z));wt(it,21,()=>t(y),$t,(vt,q)=>{var et=$e(),b=a(et),N=a(b,!0);e(b);var p=r(b),g=a(p,!0);e(p);var d=r(p),m=a(d,!0);e(d);var k=r(d),C=a(k,!0);e(k);var f=r(k),j=a(f,!0);e(f);var w=r(f),l=a(w,!0);e(w);var T=r(w),P=a(T),H=a(P,!0);e(P),e(T),e(et),U(()=>{E(N,t(q).rrn),E(g,t(q).risk_statement),E(m,t(q).likelihood_rating),E(C,t(q).severity),E(j,t(q).control_rating),E(l,t(q).monitoring_rating),Tt(P,`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(t(q).is_achieved?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200")??""}`),E(H,t(q).is_achieved?"Achieved":"Still mitigating")}),s(vt,et)}),e(it),e(Z),e(B),s(tt,B)},!0),s(K,M)}),e(v),s(L,v),jt()}const Ee=async(L,i,y)=>{R(i,!0);try{const u=await fetch("/api/summary-report-opt-monitoring",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({opportunities:t(y)})}),c=await u.json();if(!u.ok||c.error)throw new Error(c.error||"Failed to generate summary.");const x=new Kt,v="Summary Report";x.setFont("times","normal"),x.setFontSize(12),x.text("MANUEL S. ENVERGA UNIVERSITY FOUNDATION",14,10),x.setFontSize(10),x.text("SY 2024-2025",14,20),x.setFontSize(14),x.text(v,14,15);const $=x.splitTextToSize(c.summaryReport,180);x.setFontSize(12),x.text($,14,35),x.save("OpportunitiesSummary.pdf")}catch(u){console.error("Error generating summary report:",u),alert("An error occurred while generating the summary report.")}finally{R(i,!1)}},Ne=(L,i,y)=>{t(i)<t(y)&&Gt(i)},Pe=(L,i)=>{t(i)>1&&Gt(i,-1)};var Le=(L,i)=>R(i,!t(i)),Me=(L,i,y,u,c)=>{R(i,gt(t(y).value)),R(u,!1),c()},Re=h("<button> </button>"),Oe=h('<div class="absolute top-full left-0 mt-1 w-48 rounded-lg bg-white dark:bg-gray-800 shadow-lg border border-gray-200 dark:border-gray-700 z-10"></div>'),Ce=h('<div class="flex items-center justify-center p-8"><!> <span class="ml-2 text-gray-600 dark:text-gray-400">Loading opportunities...</span></div>'),Te=h('<tr class="hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"><td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-200"> </td><td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-200"> </td><td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-200"> </td><td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-200"> </td><td class="px-6 py-4"><span> </span></td><td class="px-6 py-4 text-sm text-gray-500 dark:text-gray-400"> </td></tr>'),Ie=h('<div class="overflow-x-auto"><table class="w-full border-collapse"><thead><tr class="bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600"><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Statement</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">KPI</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Actions</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Evaluation</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Status</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Completed</th></tr></thead><tbody class="divide-y divide-gray-200 dark:divide-gray-700"></tbody></table></div> <div class="flex items-center justify-between px-6 py-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600"><div class="text-sm text-gray-700 dark:text-gray-300"> </div> <div class="flex gap-2"><button class="p-2 rounded-lg bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"><!></button> <button class="p-2 rounded-lg bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"><!></button></div></div>',1),De=h('<div class="text-center p-8 text-gray-500 dark:text-gray-400">No opportunities found matching your criteria.</div>'),je=h('<div class="min-h-screen bg-gray-50 dark:bg-gray-900 p-4 md:p-8"><div class="max-w-7xl mx-auto"><h1 class="text-2xl md:text-3xl font-bold text-gray-800 dark:text-white mb-6">Opportunities Monitoring</h1> <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"><div class="flex flex-wrap gap-2 items-center"><div class="relative"><button class="px-4 py-2 rounded-lg text-sm font-medium bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center gap-2"> <!></button> <!></div> <input type="text" placeholder="Search opportunities..." class="flex-1 px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400"></div> <div class="flex gap-2 justify-end"><button class="px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700 transition-colors flex items-center gap-2"><!> Export</button> <button class="px-4 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"><!> Generate Report</button></div></div> <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"><!></div></div></div>');function Ta(L,i){Dt(i,!0);let y=Q(gt([])),u=Q(gt([])),c=Q("all"),x=Q(!0),v=Q(!1),$=Q(""),K=Q(!1),M=Q(1),D=10,tt=Ut(()=>Math.ceil(t(u).length/D)),B=Ut(()=>t(u).slice((t(M)-1)*D,t(M)*D));const Z=[{value:"all",label:"All Status",color:"bg-blue-600"},{value:"achieved",label:"Achieved",color:"bg-green-600"},{value:"not_achieved",label:"Not Achieved",color:"bg-red-600"}],it=o=>{var n;return((n=Z.find(_=>_.value===o))==null?void 0:n.label)||"All Status"},vt=async()=>{R(x,!0);try{const{data:o,error:n}=await rt.from("opt_monitoring").select(`
                opt_id,
                opportunities (
                    opt_statement,
                    kpi,
                    planned_actions
                ),
                evaluation,
                is_accomplished,
                time_completed
            `);if(n){console.error("Error fetching opportunities:",n);return}o&&(R(y,gt(o.map(_=>{var A,O,I;return{id:_.opt_id,opt_statement:((A=_.opportunities)==null?void 0:A.opt_statement)||"No Statement Available",kpi:((O=_.opportunities)==null?void 0:O.kpi)||"No KPI Available",planned_actions:((I=_.opportunities)==null?void 0:I.planned_actions)||"No Actions Available",evaluation:_.evaluation||"Pending Evaluation",achieved:_.is_accomplished||!1,time_completed:_.time_completed||null}}))),q())}catch(o){console.error("Unexpected error during data fetch:",o)}finally{R(x,!1)}},q=()=>{let o=t(y);if(t(c)==="achieved"?o=o.filter(n=>n.achieved):t(c)==="not_achieved"&&(o=o.filter(n=>!n.achieved)),t($)){const n=t($).toLowerCase();o=o.filter(_=>_.opt_statement.toLowerCase().includes(n)||_.kpi.toLowerCase().includes(n)||_.planned_actions.toLowerCase().includes(n))}R(u,gt(o)),R(M,1)},et=()=>{const o=["Statement","KPI","Actions","Evaluation","Status","Completed"],n=t(u).map(I=>[I.opt_statement,I.kpi,I.planned_actions,I.evaluation||"Pending",I.achieved?"Achieved":"Not Achieved",I.time_completed?new Date(I.time_completed).toLocaleString():"N/A"]);let _="data:text/csv;charset=utf-8,";_+=o.join(",")+`
`,n.forEach(I=>{_+=I.map(nt=>`"${nt}"`).join(",")+`
`});const A=encodeURI(_),O=document.createElement("a");O.setAttribute("href",A),O.setAttribute("download","opportunities.csv"),document.body.appendChild(O),O.click(),document.body.removeChild(O)};vt(),qt(()=>{q()});var b=je(),N=a(b),p=r(a(N),2),g=a(p),d=a(g),m=a(d);m.__click=[Le,K];var k=a(m);U(()=>E(k,`${it(t(c))??""} `));var C=r(k);oe(C,{class:"w-4 h-4"}),e(m);var f=r(m,2);F(f,()=>t(K),o=>{var n=Oe();wt(n,21,()=>Z,$t,(_,A)=>{var O=Re();O.__click=[Me,c,A,K,q];var I=a(O,!0);e(O),U(()=>{Tt(O,`w-full px-4 py-2 text-left text-sm hover:bg-gray-50 dark:hover:bg-gray-700 first:rounded-t-lg last:rounded-b-lg ${(t(c)===t(A).value?"bg-gray-50 dark:bg-gray-700":"")??""}`),E(I,t(A).label)}),s(_,O)}),e(n),s(o,n)}),e(d);var j=r(d,2);Yt(j),e(g);var w=r(g,2),l=a(w);l.__click=et;var T=a(l);Qt(T,{class:"w-4 h-4"}),kt(),e(l);var P=r(l,2);P.__click=[Ee,v,u];var H=a(P);F(H,()=>t(v),o=>{It(o,{class:"w-4 h-4 animate-spin"})},o=>{se(o,{class:"w-4 h-4"})}),kt(),e(P),e(w),e(p);var lt=r(p,2),S=a(lt);F(S,()=>t(x),o=>{var n=Ce(),_=a(n);It(_,{class:"w-6 h-6 animate-spin text-blue-600 dark:text-blue-400"}),kt(2),e(n),s(o,n)},o=>{var n=ot(),_=W(n);F(_,()=>t(u).length>0,A=>{var O=Ie(),I=W(O),nt=a(I),ut=r(a(nt));wt(ut,21,()=>t(B),$t,(pt,z)=>{var Y=Te(),xt=a(Y),dt=a(xt,!0);e(xt);var X=r(xt),bt=a(X,!0);e(X);var _t=r(X),yt=a(_t,!0);e(_t);var Mt=r(_t),Rt=a(Mt,!0);e(Mt);var ft=r(Mt),Ot=a(ft),Ft=a(Ot,!0);e(Ot),e(ft);var zt=r(ft),ie=a(zt,!0);U(()=>E(ie,t(z).time_completed?new Date(t(z).time_completed).toLocaleString():"N/A")),e(zt),e(Y),U(()=>{E(dt,t(z).opt_statement),E(bt,t(z).kpi),E(yt,t(z).planned_actions),E(Rt,t(z).evaluation||"Pending"),Tt(Ot,`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(t(z).achieved?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200")??""}`),E(Ft,t(z).achieved?"Achieved":"Not Achieved")}),s(pt,Y)}),e(ut),e(nt),e(I);var ct=r(I,2),V=a(ct),G=a(V);U(()=>E(G,`Showing ${(t(M)-1)*D+1} to ${Math.min(t(M)*D,t(u).length)??""} of ${t(u).length??""} entries`)),e(V);var J=r(V,2),at=a(J);at.__click=[Pe,M];var st=a(at);Bt(st,{class:"w-5 h-5"}),e(at);var mt=r(at,2);mt.__click=[Ne,M,tt];var St=a(mt);Wt(St,{class:"w-5 h-5"}),e(mt),e(J),e(ct),U(()=>{at.disabled=t(M)===1,mt.disabled=t(M)===t(tt)}),s(A,O)},A=>{var O=De();s(A,O)},!0),s(o,n)}),e(lt),e(N),e(b),U(()=>P.disabled=t(v)),Jt(j,()=>t($),o=>R($,o)),s(L,b),jt()}Vt(["click"]);var Fe=h('<div class="text-center text-xl"><span class="loading loading-spinner loading-md"></span></div>'),ze=h('<button class="btn btn-primary btn-sm ml-2">View Statement</button>'),Ue=h('<span class="loading loading-spinner text-primary"></span>'),Ge=h('<button class="btn btn-success btn-sm" disabled>Achieved</button>'),Ke=h('<button class="btn btn-success btn-sm">Evaluate</button>'),qe=h('<tr class="hover border-b"><td class="px-4 py-3"> </td><td class="px-4 py-3"> </td><td class="px-4 py-3"> </td><td class="px-4 py-3"> </td><td class="px-4 py-3"><textarea class="border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring focus:ring-indigo-200" placeholder="Enter evaluation..."></textarea></td><td class="px-4 py-3"><!></td><td class="px-4 py-3"><!></td><td class="px-4 py-3"><!></td></tr>'),Ve=h('<div class="overflow-x-auto shadow-lg rounded-lg"><table class="table-auto w-full text-left text-sm border-collapse"><thead class="uppercase text-xs"><tr><th class="px-4 py-3">Strategic Goal</th><th class="px-4 py-3">Objective Name</th><th class="px-4 py-3">Actions Taken</th><th class="px-4 py-3">KPI</th><th class="px-4 py-3">Actions Taken to Achieve Action Plan</th><th class="px-4 py-3">Status</th><th class="px-4 py-3">Remarks</th><th class="px-4 py-3">Actions</th></tr></thead><tbody></tbody></table></div>'),Ye=h("<div>No action plans found for this user.</div>"),He=h('<div class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50"><div class="bg-white p-6 rounded-lg shadow-lg w-96"><h2 class="text-lg font-bold mb-4">Evaluation Statement</h2> <p class="mb-4"> </p> <button class="btn bg-indigo-500 hover:bg-indigo-600 text-white w-full">Close</button></div></div>'),Je=h('<div class="min-h-screen p-8"><h1 class="text-3xl font-bold mb-6">Plans Monitoring</h1> <!> <!></div>');function Ia(L,i){Dt(i,!1);const y=te(),u=()=>ee(c,"$actionPlans",y),c=re([]);let x=null,v=At(!1),$=At(""),K=At(!0);function M(b){R($,b),R(v,!0)}const D=async()=>{const{data:{session:b},error:N}=await rt.auth.getSession();if(N||!b){console.error("Error fetching session:",N);return}x=b.user.id},tt=async()=>{try{const{data:b,error:N}=await rt.from("profiles").select("department_id").eq("id",x).single();if(N||!(b!=null&&b.department_id)){console.error("Error fetching user profile or department:",N);return}const p=b.department_id,{data:g,error:d}=await rt.from("profiles").select("id").eq("department_id",p);if(d){console.error("Error fetching profile IDs:",d);return}const m=g.map(w=>w.id),{data:k,error:C}=await rt.from("action_plans").select(`
        id,
        actions_taken,
        kpi,
        objective_id,
        strategic_objectives (
          name,
          strategic_goals (name)
        ),
        is_approved
      `).in("profile_id",m).eq("is_approved",!0);if(C){console.error("Error fetching action plans:",C);return}const f=k.map(w=>{var l,T,P;return{id:w.id,actions_taken:w.actions_taken,kpi:w.kpi,objective_id:w.objective_id,strategic_goal_name:((T=(l=w.strategic_objectives)==null?void 0:l.strategic_goals)==null?void 0:T.name)||"No Goal Assigned",objective_name:((P=w.strategic_objectives)==null?void 0:P.name)||"No Objective Assigned",is_accomplished:!1,evaluation:null,statement:null,time_completed:null,isLoading:!1}}),j=await B(f.map(w=>w.id));c.set(f.map(w=>{const l=j.find(T=>T.action_plan_id===w.id);return{...w,is_accomplished:(l==null?void 0:l.is_accomplished)||!1,evaluation:(l==null?void 0:l.evaluation)||null,statement:(l==null?void 0:l.statement)||null,time_completed:(l==null?void 0:l.time_completed)||null}}))}catch(b){console.error("Error fetching data:",b)}finally{R(K,!1)}},B=async b=>{try{const{data:N,error:p}=await rt.from("plan_monitoring").select("action_plan_id, is_accomplished, evaluation, statement, time_completed").in("action_plan_id",b);return p?(console.error("Error fetching monitoring data:",p),[]):N}catch(N){return console.error("Error fetching monitoring data:",N),[]}},Z=async(b,N,p)=>{c.update(g=>g.map(d=>d.id===b?{...d,isLoading:!0}:d));try{const g=await fetch("/api/evaluate-goal",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({target:N,evaluation:p})}),d=await g.json();if(!g.ok||d.error)throw new Error(d.error||"Failed to evaluate action plan.");const m=d.aiEvaluation;if(typeof m!="string")throw new TypeError("AI evaluation response is not a valid string.");const C=!["not achieved","unsuccessful","failed","incomplete","fell short","below target","did not meet","not"].some(w=>m.toLowerCase().includes(w)),f=C?new Date().toISOString():null,{error:j}=await rt.from("plan_monitoring").update({evaluation:p,statement:m,is_accomplished:C,time_completed:f}).eq("action_plan_id",b);j&&console.error("[ERROR] Error updating plan monitoring:",j),c.update(w=>w.map(l=>l.id===b?{...l,is_accomplished:C,evaluation:p,statement:m,time_completed:f,isLoading:!1}:l))}catch(g){console.error("[ERROR] Error evaluating action plan:",g),c.update(d=>d.map(m=>m.id===b?{...m,isLoading:!1}:m))}},it=b=>{const N=b.target;N.style.height="auto",N.style.height=`${N.scrollHeight}px`};ae(async()=>{await D(),await tt()}),Xt();var vt=Je(),q=r(a(vt),2);F(q,()=>t(K),b=>{var N=Fe();s(b,N)},b=>{var N=ot(),p=W(N);F(p,()=>u().length>0,g=>{var d=Ve(),m=a(d),k=r(a(m));wt(k,5,u,$t,(C,f)=>{var j=qe(),w=a(j),l=a(w,!0);e(w);var T=r(w),P=a(T,!0);e(T);var H=r(T),lt=a(H,!0);e(H);var S=r(H),o=a(S,!0);e(S);var n=r(S),_=a(n);Zt(_),e(n);var A=r(n),O=a(A);F(O,()=>t(f).is_accomplished,V=>{var G=Ct();U(()=>E(G,`Achieved on ${(t(f).time_completed?new Date(t(f).time_completed).toLocaleString():"N/A")??""}`)),s(V,G)},V=>{var G=Ct("Not Achieved");s(V,G)}),e(A);var I=r(A),nt=a(I);F(nt,()=>t(f).statement,V=>{var G=ze();ht("click",G,()=>M(t(f).statement||"")),s(V,G)}),e(I);var ut=r(I),ct=a(ut);F(ct,()=>t(f).isLoading,V=>{var G=Ue();s(V,G)},V=>{var G=ot(),J=W(G);F(J,()=>t(f).is_accomplished,at=>{var st=Ge();s(at,st)},at=>{var st=Ke();U(()=>st.disabled=!t(f).evaluation||t(f).isLoading),ht("click",st,()=>Z(t(f).id,t(f).kpi,t(f).evaluation||"")),s(at,st)},!0),s(V,G)}),e(ut),e(j),U(()=>{E(l,t(f).strategic_goal_name),E(P,t(f).objective_name),E(lt,t(f).actions_taken),E(o,t(f).kpi),Ht(_,t(f).evaluation),_.disabled=t(f).is_accomplished}),ht("input",_,V=>{c.update(G=>G.map(J=>J.id===t(f).id?{...J,evaluation:V.target.value}:J)),it(V)}),s(C,j)}),e(k),e(m),e(d),s(g,d)},g=>{var d=Ye();s(g,d)},!0),s(b,N)});var et=r(q,2);F(et,()=>t(v),b=>{var N=He(),p=a(N),g=r(a(p),2),d=a(g,!0);e(g);var m=r(g,2);e(p),e(N),U(()=>E(d,t($))),ht("click",m,()=>R(v,!1)),s(b,N)}),e(vt),s(L,vt),jt()}var Qe=h("<h1>Risks  Monitoring</h1>");function Da(L){var i=Qe();s(L,i)}var Be=h('<div class="text-center text-xl"><span class="loading loading-spinner text-primary"></span> Loading Opportunities...</div>'),We=h('<p class="text-center text-lg">No opportunities found.</p>'),Ze=h('<span class="loading loading-spinner text-primary"></span>'),Xe=h('<span class="loading loading-spinner text-primary"></span>'),ta=h('<button class="btn btn-success btn-sm" disabled>Achieved</button>'),ea=h('<button class="btn btn-success btn-sm">Evaluate</button>'),aa=h('<button class="btn btn-primary btn-sm ml-2">View Statement</button>'),ra=h('<tr class="hover border-b"><td class="px-4 py-3"> </td><td class="px-4 py-3"> </td><td class="px-4 py-3"><textarea class="border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring focus:ring-indigo-200" placeholder="Enter your evaluation" style="overflow:hidden; resize:none; min-width: 200px;"></textarea></td><td class="px-4 py-3"><!></td><td class="px-4 py-3"><!> <!></td></tr>'),oa=h('<div class="fixed inset-0 bg-gray-900 bg-opacity-75 flex items-center justify-center z-50"><div class="bg-white p-6 rounded-lg shadow-lg w-96"><h2 class="text-lg font-bold mb-4">AI Evaluation Statement</h2> <p class="mb-4"> </p> <button class="btn bg-indigo-500 hover:bg-indigo-600 text-white w-full">Close</button></div></div>'),sa=h('<div class="overflow-x-auto shadow-lg rounded-lg"><table class="table-auto w-full text-left text-sm border-collapse"><thead class="uppercase text-xs"><tr><th class="px-4 py-3">Opportunity Statement</th><th class="px-4 py-3">Target (KPI)</th><th class="px-4 py-3">Actions Taken to Achieve Opportunities</th><th class="px-4 py-3">Achieved</th><th class="px-4 py-3">Actions</th></tr></thead><tbody></tbody></table></div> <!>',1),ia=h('<div class="min-h-screen p-8"><h1 class="text-3xl font-bold mb-6">Mid-Year Opportunity Monitoring</h1> <button class="btn bg-indigo-500 hover:bg-indigo-600 text-white font-medium mb-6">Evaluate All Opportunities</button> <!></div>');function ja(L,i){Dt(i,!1);const y=te(),u=()=>ee($,"$goals",y);let c=[],x=null,v=At(!1),$=re([]),K=At(!1),M=At("");function D(p){R(M,p),R(K,!0)}const tt=async()=>{const{data:{session:p},error:g}=await rt.auth.getSession();if(g||!p){console.error("Error fetching session:",g);return}const{user:d}=p,{data:m,error:k}=await rt.from("profiles").select("id").eq("id",d.id).single();if(k||!m){console.error("Error fetching profile:",k);return}x=m.id},B=async()=>{R(v,!0);try{const{data:p,error:g}=await rt.from("profiles").select("department_id").eq("id",x).single();if(g||!(p!=null&&p.department_id)){console.error("Error fetching user profile or department:",g);return}const d=p.department_id,{data:m,error:k}=await rt.from("profiles").select("id").eq("department_id",d);if(k){console.error("Error fetching profile IDs:",k);return}const C=m.map(l=>l.id),{data:f,error:j}=await rt.from("opt_monitoring").select(`
        opt_id,
        time_completed,
        evaluation,
        statement,
        opportunities (opt_statement, kpi, planned_actions)
      `).in("profile_id",C);if(j){console.error("Error fetching opportunities:",j);return}c=f.map(l=>{var T,P,H;return{opt_id:l.opt_id,opt_statement:((T=l.opportunities)==null?void 0:T.opt_statement)||"No Statement",kpi:((P=l.opportunities)==null?void 0:P.kpi)||"No KPI",planned_actions:((H=l.opportunities)==null?void 0:H.planned_actions)||"No Actions Taken",time_completed:l.time_completed,evaluation:l.evaluation||"",statement:l.statement||null}});const w=c.map(l=>({id:l.opt_id,statement:l.opt_statement,goal:l.kpi,evaluation:l.evaluation||"",achieved:l.time_completed?"Achieved":null,isLoading:!1,timeCompleted:l.time_completed,aiStatement:l.statement||null}));$.set(w)}catch(p){console.error("Error fetching opportunities:",p)}finally{R(v,!1)}};async function Z(p,g,d){$.update(m=>m.map(k=>k.id===p?{...k,isLoading:!0}:k));try{const m=await fetch("/api/evaluate-goal",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({target:g,evaluation:d})}),k=await m.json();if(!m.ok||k.error)throw new Error(k.error||"Failed to evaluate goal.");const C=k.aiEvaluation;if(console.log("[DEBUG] AI Evaluation:",C),typeof C!="string")throw new TypeError("AI evaluation response is not a valid string.");const j=!["not achieved","unsuccessful","failed","incomplete","fell short","below target","did not meet","not","not been achieved"].some(T=>C.toLowerCase().includes(T)),w=j?new Date().toISOString():null,{error:l}=await rt.from("opt_monitoring").update({time_completed:w,evaluation:d,statement:C,is_accomplished:j}).eq("opt_id",p);l?console.error("[ERROR] Error updating opt_monitoring:",l):$.update(T=>T.map(P=>P.id===p?{...P,achieved:j?"Achieved":"Not Achieved",isLoading:!1,timeCompleted:w,aiStatement:C}:P))}catch(m){console.error("[ERROR] Error evaluating goal:",m),$.update(k=>k.map(C=>C.id===p?{...C,isLoading:!1}:C))}}async function it(){const g=de($).map(d=>({opt_statement:d.statement,kpi:d.goal,achieved:d.achieved==="Achieved",evaluation:d.evaluation}));try{const d=await fetch("/api/generate-summary",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({monitoringData:g})}),m=await d.json();if(!d.ok||m.error)throw new Error(m.error||"Failed to generate summary.");console.log("Summary Report:",m.summaryReport)}catch(d){console.error("Error generating summary:",d)}}function vt(p,g,d){$.update(m=>m.map(k=>k.id===p?{...k,[g]:d}:k))}function q(p){const g=p.target;g.style.height="auto",g.style.width="auto",g.style.height=`${g.scrollHeight}px`,g.style.width=`${g.scrollWidth+20}px`}ae(async()=>{await tt(),await B()}),Xt();var et=ia(),b=r(a(et),2),N=r(b,2);F(N,()=>t(v),p=>{var g=Be();s(p,g)},p=>{var g=ot(),d=W(g);F(d,()=>u().length===0,m=>{var k=We();s(m,k)},m=>{var k=sa(),C=W(k),f=a(C),j=r(a(f));wt(j,5,u,$t,(T,P)=>{let H=()=>t(P).id,lt=()=>t(P).statement,S=()=>t(P).goal,o=()=>t(P).evaluation,n=()=>t(P).achieved,_=()=>t(P).isLoading,A=()=>t(P).timeCompleted,O=()=>t(P).aiStatement;var I=ra(),nt=a(I),ut=a(nt,!0);e(nt);var ct=r(nt),V=a(ct,!0);e(ct);var G=r(ct),J=a(G);Zt(J),e(G);var at=r(G),st=a(at);F(st,_,z=>{var Y=Ze();s(z,Y)},z=>{var Y=ot(),xt=W(Y);F(xt,()=>n()==="Achieved",dt=>{var X=Ct();U(()=>E(X,`Achieved on ${(A()?new Date(A()).toLocaleDateString():"N/A")??""}`)),s(dt,X)},dt=>{var X=ot(),bt=W(X);F(bt,()=>n()==="Not Achieved",_t=>{var yt=Ct("Not Achieved");s(_t,yt)},_t=>{var yt=Ct("Pending");s(_t,yt)},!0),s(dt,X)},!0),s(z,Y)}),e(at);var mt=r(at),St=a(mt);F(St,_,z=>{var Y=Xe();s(z,Y)},z=>{var Y=ot(),xt=W(Y);F(xt,()=>n()==="Achieved",dt=>{var X=ta();s(dt,X)},dt=>{var X=ea();U(()=>X.disabled=!o()||_()),ht("click",X,()=>Z(H(),S(),o())),s(dt,X)},!0),s(z,Y)});var pt=r(St,2);F(pt,O,z=>{var Y=aa();ht("click",Y,()=>D(O())),s(z,Y)}),e(mt),e(I),U(()=>{E(ut,lt()),E(V,S()),Ht(J,o()),J.disabled=n()==="Achieved"}),ht("input",J,z=>{vt(H(),"evaluation",z.target.value),q(z)}),s(T,I)}),e(j),e(f),e(C);var l=r(C,2);F(l,()=>t(K),T=>{var P=oa(),H=a(P),lt=r(a(H),2),S=a(lt,!0);e(lt);var o=r(lt,2);e(H),e(P),U(()=>E(S,t(M))),ht("click",o,()=>R(K,!1)),s(T,P)}),s(m,k)}),s(p,g)}),e(et),ht("click",b,it),s(L,et),jt()}export{Oa as A,La as C,Ia as D,Ma as L,Ra as T,Ca as a,Ta as b,Da as c,ja as d};
