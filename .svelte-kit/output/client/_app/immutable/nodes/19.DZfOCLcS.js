import"../chunks/disclose-version.Bg9kRutz.js";import{f as j,p as Y,c as r,r as e,s as i,t as W,a as Z,e as A,J as xt,b as n,g as d,n as dt}from"../chunks/utils.Cx6K9qTo.js";import{e as ct,a as u,d as vt,g as kt,t as g,b as J}from"../chunks/store.BALTJZ26.js";import{i as wt}from"../chunks/lifecycle.D0tpf3vC.js";import{o as ft}from"../chunks/index-client.lWLCSZVk.js";import{I as Rt,a as Ct,s as N}from"../chunks/Icon.Nl6wOSVO.js";import{i as T}from"../chunks/if.Bgpzl8Wa.js";import{r as X,e as K,i as O}from"../chunks/attributes.rzeD2olC.js";import{l as Et,s as St,a as F}from"../chunks/preload-helper.Tg4Km7Zr.js";import{b as Mt}from"../chunks/select.BtlRD387.js";import{b as G}from"../chunks/input.BVFrb_g3.js";import{P as Nt}from"../chunks/pencil.Brzv4RaD.js";import{T as Dt}from"../chunks/trash-2.d9YwO6MY.js";import{P as Ft}from"../chunks/plus.Dop3u5ke.js";import{X as Tt}from"../chunks/x.D9PBK57y.js";function qt(E,t){const s=Et(t,["children","$$slots","$$events","$$legacy"]);Rt(E,St({name:"trending-up"},()=>s,{iconNode:[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17"}],["polyline",{points:"16 7 22 7 22 13"}]],children:(k,S)=>{var l=ct(),p=j(l);Ct(p,t,"default",{}),u(k,l)},$$slots:{default:!0}}))}var At=g('<div class="space-y-2"><label class="block text-sm font-medium">Name</label> <input type="text" class="w-full px-3 py-2 bg-background border border-border rounded-lg" required></div> <div class="space-y-2"><label class="block text-sm font-medium">Symbol</label> <input type="text" class="w-full px-3 py-2 bg-background border border-border rounded-lg" required></div>',1),jt=g('<div class="space-y-2"><label class="block text-sm font-medium">Name</label> <input type="text" class="w-full px-3 py-2 bg-background border border-border rounded-lg" required></div> <div class="space-y-2"><label class="block text-sm font-medium">Value</label> <input type="number" class="w-full px-3 py-2 bg-background border border-border rounded-lg" required></div>',1),zt=g('<div class="space-y-2"><label class="block text-sm font-medium">Status</label> <input type="text" class="w-full px-3 py-2 bg-background border border-border rounded-lg" required></div>'),It=g('<form class="space-y-4"><h2 class="text-xl font-semibold mb-4"> </h2> <!> <div class="flex justify-end gap-2 pt-4"><button type="button" class="px-4 py-2 border border-border rounded-lg hover:bg-muted">Cancel</button> <button type="submit" class="px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90"> </button></div></form>');function Pt(E,t){Y(t,!0);let s=F(t.item?{...t.item}:{...t.type==="likelihoodRating"||t.type==="riskControlRating"?{name:"",symbol:""}:t.type==="severity"?{name:"",value:0}:{status:""}});const D=_=>{_.preventDefault(),t.onSave(s)};var k=It(),S=r(k),l=r(S);e(S);var p=i(S,2);T(p,()=>t.type==="likelihoodRating"||t.type==="riskControlRating",_=>{var b=At(),m=j(b),f=i(r(m),2);X(f),e(m);var y=i(m,2),h=i(r(y),2);X(h),e(y),G(f,()=>s.name,R=>s.name=R),G(h,()=>s.symbol,R=>s.symbol=R),u(_,b)},_=>{var b=ct(),m=j(b);T(m,()=>t.type==="severity",f=>{var y=jt(),h=j(y),R=i(r(h),2);X(R),e(h);var z=i(h,2),I=i(r(z),2);X(I),e(z),G(R,()=>s.name,U=>s.name=U),G(I,()=>s.value,U=>s.value=U),u(f,y)},f=>{var y=zt(),h=i(r(y),2);X(h),e(y),G(h,()=>s.status,R=>s.status=R),u(f,y)},!0),u(_,b)});var c=i(p,2),v=r(c);v.__click=function(..._){var b;(b=t.onCancel)==null||b.apply(this,_)};var w=i(v,2),q=r(w,!0);e(w),e(c),e(k),W(()=>{J(l,`${(t.item?"Edit":"Add New")??""}
		${t.type??""}`),J(q,t.item?"Update":"Create")}),kt("submit",k,D),u(E,k),Z()}vt(["click"]);var Lt=g('<td class="px-6 py-4"> </td> <td class="px-6 py-4"> </td>',1),Vt=g('<td class="px-6 py-4"> </td> <td class="px-6 py-4"> </td>',1),Bt=g('<td class="px-6 py-4"> </td>'),Jt=(E,t)=>t.onEdit(t.item),Ut=(E,t)=>t.onDelete(t.item.id),Xt=g('<tr class="hover:bg-muted/50"><!><td class="px-6 py-4"><div class="flex gap-2"><button class="p-2 hover:bg-muted rounded-lg text-muted-foreground hover:text-foreground"><!></button> <button class="p-2 hover:bg-red-100 text-red-500 hover:text-red-600 rounded-lg disabled:opacity-50"><!></button></div></td></tr>');function Q(E,t){Y(t,!0);var s=Xt(),D=r(s);T(D,()=>t.type==="likelihoodRating"||t.type==="riskControlRating",w=>{var q=Lt(),_=j(q),b=r(_,!0);e(_);var m=i(_,2),f=r(m,!0);e(m),W(()=>{J(b,t.item.name),J(f,t.item.symbol)}),u(w,q)},w=>{var q=ct(),_=j(q);T(_,()=>t.type==="severity",b=>{var m=Vt(),f=j(m),y=r(f,!0);e(f);var h=i(f,2),R=r(h,!0);e(h),W(()=>{J(y,t.item.name),J(R,t.item.value)}),u(b,m)},b=>{var m=Bt(),f=r(m,!0);e(m),W(()=>J(f,t.item.status)),u(b,m)},!0),u(w,q)});var k=i(D),S=r(k),l=r(S);l.__click=[Jt,t];var p=r(l);Nt(p,{size:16}),e(l);var c=i(l,2);c.__click=[Ut,t];var v=r(c);Dt(v,{size:16}),e(c),e(S),e(k),e(s),u(E,s),Z()}vt(["click"]);var Gt=(E,t,s)=>{n(t,null),n(s,!0)},Ht=g('<div class="flex justify-center p-8"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div></div>'),Kt=g('<table class="w-full"><thead class="bg-muted/50"><tr><th class="px-6 py-4 text-left">Name</th><th class="px-6 py-4 text-left">Symbol</th><th class="px-6 py-4 text-left">Actions</th></tr></thead><tbody class="divide-y divide-border"></tbody></table>'),Ot=g('<table class="w-full"><thead class="bg-muted/50"><tr><th class="px-6 py-4 text-left">Name</th><th class="px-6 py-4 text-left">Value</th><th class="px-6 py-4 text-left">Actions</th></tr></thead><tbody class="divide-y divide-border"></tbody></table>'),Qt=g('<table class="w-full"><thead class="bg-muted/50"><tr><th class="px-6 py-4 text-left">Name</th><th class="px-6 py-4 text-left">Symbol</th><th class="px-6 py-4 text-left">Actions</th></tr></thead><tbody class="divide-y divide-border"></tbody></table>'),Wt=g('<table class="w-full"><thead class="bg-muted/50"><tr><th class="px-6 py-4 text-left">Status</th><th class="px-6 py-4 text-left">Actions</th></tr></thead><tbody class="divide-y divide-border"></tbody></table>'),Yt=g('<div class="overflow-x-auto bg-card rounded-lg shadow border border-border"><!> <!> <!> <!></div>'),Zt=g('<div class="fixed inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center p-4 z-50"><div class="bg-card p-6 rounded-lg w-full max-w-md relative border border-border"><button class="absolute right-4 top-4 p-1 hover:bg-muted rounded-lg"><!></button> <!></div></div>'),$t=g('<div class="min-h-screen container"><div class="mb-6"><div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"><div class="flex items-center gap-2"><!> <h1 class="text-2xl font-bold">Ratings Management</h1></div></div> <div class="flex justify-between py-3 items-center"><div class="flex items-center"><label for="dataSelect" class="text-lg font-semibold mr-4">Select Data Type:</label> <div class="relative w-64"><select id="dataSelect" class="w-full px-4 py-2 bg-card border border-border rounded-lg appearance-none"><option>Likelihood Rating</option><option>Severity</option><option>Risk Control Rating</option><option>Risk Monitoring Rating</option></select> <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none"><svg class="w-5 h-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></div></div></div> <button class="flex items-center gap-2 bg-primary text-primary-foreground px-4 py-2 rounded-lg hover:bg-primary/90"><!> Add New</button></div></div> <!></div> <!>',1);function te(E,t){Y(t,!0);let s=A(F([])),D=A(F([])),k=A(F([])),S=A(F([])),l=A(!1),p=A(null),c=A("likelihoodRating"),v=A(!1),w=A(null);const q=async()=>{try{n(l,!0);const{data:a,error:o}=await N.from("likelihood_rating").select("*");if(o)throw o;n(s,F(a))}catch(a){console.error("Error fetching likelihood rating:",a),n(p,"Failed to fetch likelihood rating.")}finally{n(l,!1)}},_=async()=>{try{n(l,!0);const{data:a,error:o}=await N.from("severity").select("*");if(o)throw o;n(D,F(a))}catch(a){console.error("Error fetching severity:",a),n(p,"Failed to fetch severity.")}finally{n(l,!1)}},b=async()=>{try{n(l,!0);const{data:a,error:o}=await N.from("risk_control_rating").select("*");if(o)throw o;n(k,F(a))}catch(a){console.error("Error fetching risk control rating:",a),n(p,"Failed to fetch risk control rating.")}finally{n(l,!1)}},m=async()=>{try{n(l,!0);const{data:a,error:o}=await N.from("risk_monitoring_rating").select("*");if(o)throw o;n(S,F(a))}catch(a){console.error("Error fetching risk monitoring rating:",a),n(p,"Failed to fetch risk monitoring rating.")}finally{n(l,!1)}},f=async a=>{try{n(l,!0);const o=h();if(d(w)){const{error:C}=await N.from(o).update(a).eq("id",d(w).id);if(C)throw C}else{const{error:C}=await N.from(o).insert(a);if(C)throw C}await I(),R()}catch(o){console.error(o),n(p,`Failed to ${d(w)?"update":"create"} ${d(c)}`)}finally{n(l,!1)}},y=async a=>{if(confirm("Are you sure you want to delete this item?"))try{n(l,!0);const o=h(),{error:C}=await N.from(o).delete().eq("id",a);if(C)throw C;await I()}catch(o){console.error(o),n(p,"Failed to delete item")}finally{n(l,!1)}},h=()=>{switch(d(c)){case"likelihoodRating":return"likelihood_rating";case"severity":return"severity";case"riskControlRating":return"risk_control_rating";case"riskMonitoringRating":return"risk_monitoring_rating";default:throw new Error("Invalid table name")}},R=()=>{n(v,!1),n(w,null)},z=a=>{n(w,F(a)),n(v,!0)},I=async()=>{switch(d(c)){case"likelihoodRating":await q();break;case"severity":await _();break;case"riskControlRating":await b();break;case"riskMonitoringRating":await m();break}};ft(()=>{I()}),xt(()=>{I()});var U=$t(),$=j(U),tt=r($),et=r(tt),ut=r(et),yt=r(ut);qt(yt,{class:"w-8 h-8 text-primary"}),dt(2),e(ut),e(et);var mt=i(et,2),rt=r(mt),gt=i(r(rt),2),at=r(gt),ot=r(at);ot.value=(ot.__value="likelihoodRating")==null?"":"likelihoodRating";var it=i(ot);it.value=(it.__value="severity")==null?"":"severity";var nt=i(it);nt.value=(nt.__value="riskControlRating")==null?"":"riskControlRating";var bt=i(nt);bt.value=(bt.__value="riskMonitoringRating")==null?"":"riskMonitoringRating",e(at),dt(2),e(gt),e(rt);var lt=i(rt,2);lt.__click=[Gt,w,v];var pt=r(lt);Ft(pt,{size:20}),dt(),e(lt),e(mt),e(tt);var _t=i(tt,2);T(_t,()=>d(l),a=>{var o=Ht();u(a,o)},a=>{var o=Yt(),C=r(o);T(C,()=>d(c)==="likelihoodRating",L=>{var x=Kt(),M=i(r(x));K(M,21,()=>d(s),O,(V,B)=>{Q(V,{get item(){return d(B)},onEdit:z,onDelete:y,type:"likelihoodRating"})}),e(M),e(x),u(L,x)});var P=i(C,2);T(P,()=>d(c)==="severity",L=>{var x=Ot(),M=i(r(x));K(M,21,()=>d(D),O,(V,B)=>{Q(V,{get item(){return d(B)},onEdit:z,onDelete:y,type:"severity"})}),e(M),e(x),u(L,x)});var H=i(P,2);T(H,()=>d(c)==="riskControlRating",L=>{var x=Qt(),M=i(r(x));K(M,21,()=>d(k),O,(V,B)=>{Q(V,{get item(){return d(B)},onEdit:z,onDelete:y,type:"riskControlRating"})}),e(M),e(x),u(L,x)});var st=i(H,2);T(st,()=>d(c)==="riskMonitoringRating",L=>{var x=Wt(),M=i(r(x));K(M,21,()=>d(S),O,(V,B)=>{Q(V,{get item(){return d(B)},onEdit:z,onDelete:y,type:"riskMonitoringRating"})}),e(M),e(x),u(L,x)}),e(o),u(a,o)}),e($);var ht=i($,2);T(ht,()=>d(v),a=>{var o=Zt(),C=r(o),P=r(C);P.__click=R;var H=r(P);Tt(H,{size:20}),e(P);var st=i(P,2);Pt(st,{get type(){return d(c)},get item(){return d(w)},onSave:f,onCancel:R}),e(C),e(o),u(a,o)}),Mt(at,()=>d(c),a=>n(c,a)),u(E,U),Z()}vt(["click"]);var ee=g('<main class="container mx-auto min-h-screen p-4"><!></main>');function ye(E,t){Y(t,!1);const s=async()=>{const{data:c,error:v}=await N.from("likelihood_rating").select("*");v&&console.error("Error fetching likelihood rating:",v)},D=async()=>{const{data:c,error:v}=await N.from("severity").select("*");v&&console.error("Error fetching severity:",v)},k=async()=>{const{data:c,error:v}=await N.from("risk_control_rating").select("*");v&&console.error("Error fetching risk control rating:",v)},S=async()=>{const{data:c,error:v}=await N.from("risk_monitoring_rating").select("*");v&&console.error("Error fetching risk monitoring rating:",v)};ft(()=>{s(),D(),k(),S()}),wt();var l=ee(),p=r(l);te(p,{}),e(l),u(E,l),Z()}export{ye as component};
