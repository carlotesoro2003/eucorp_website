import"../chunks/disclose-version.Bg9kRutz.js";import{f as W,p as C,d as b,c as o,r as t,s as d,t as z,b as l,g as e,a as T,H as we,e as q,n as Le}from"../chunks/utils.CRNn4dtP.js";import{c as ie,a as _,f as ke,t as h,d as ce}from"../chunks/store.B1kL-7Ni.js";import{i as Se}from"../chunks/lifecycle.DSkr6FdQ.js";import{o as ze}from"../chunks/index-client.BdGz_wQc.js";import{s as A}from"../chunks/supabaseClient.BTuNJN2N.js";import{s as j}from"../chunks/render.xPn1qZIb.js";import{i as N}from"../chunks/if.CRsBAEFG.js";import{e as Ee}from"../chunks/each.v0RK4Yef.js";import{r as ve}from"../chunks/attributes.BcfEV1VJ.js";import{b as ue}from"../chunks/input.o7SqHMM4.js";import{b as je}from"../chunks/select.CgyWjfO5.js";import{l as Pe,s as Me,a as E}from"../chunks/preload-helper.Dwm_PvIR.js";import{I as Fe,s as Ne}from"../chunks/Icon.CEA2x5sb.js";import{P as Ae}from"../chunks/pencil.DHUYAf-P.js";import{T as De}from"../chunks/trash-2.B2J2poVW.js";import{S as qe}from"../chunks/search.B4Eo5Hu8.js";import{A as Ce}from"../chunks/arrow-up-down.Ck2frNgV.js";import{P as Te}from"../chunks/plus.BBSv_QI7.js";import{X as He}from"../chunks/x.DaAqSZOK.js";function Ie(u,r){const c=Pe(r,["children","$$slots","$$events","$$legacy"]);Fe(u,Me({name:"user"},()=>c,{iconNode:[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}],["circle",{cx:"12",cy:"7",r:"4"}]],children:(n,f)=>{var m=ie(),v=W(m);Ne(v,r,"default",{}),_(n,m)},$$slots:{default:!0}}))}var Ue=h('<form class="flex flex-col gap-4"><h3 class="text-xl font-semibold"> </h3> <div class="flex flex-col gap-2"><label for="name" class="font-medium">Name</label> <input id="name" type="text" required class="bg-secondary border-secondary rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-ring" placeholder="Enter name"></div> <button type="submit" class="bg-primary text-primary-foreground px-4 py-2 rounded-lg hover:bg-primary/90 mt-4"> </button></form>');function $e(u,r){var g;C(r,!0);let c=b(E(((g=r.lead)==null?void 0:g.name)??""));const i=x=>{x.preventDefault(),r.onSave({name:e(c)})};var n=Ue(),f=o(n),m=o(f);t(f);var v=d(f,2),y=d(o(v),2);ve(y),t(v);var w=d(v,2),p=o(w);t(w),t(n),z(()=>{j(m,`${(r.lead?"Edit":"Add")??""} Lead`),j(p,`${(r.lead?"Update":"Add")??""} Lead`)}),ke("submit",n,i),ue(y,()=>e(c),x=>l(c,x)),_(u,n),T()}var Qe=(u,r)=>r.onEdit(r.lead),Xe=(u,r)=>r.onDelete(r.lead.id),Be=h('<div class="bg-card border border-border rounded-lg p-4 hover:shadow-lg transition-shadow"><div class="flex items-start justify-between"><div class="flex items-center gap-3"><div class="w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center text-primary"><!></div> <div><h3 class="text-lg font-medium break-words"> </h3></div></div> <div class="flex items-center gap-2"><button class="hover:bg-muted rounded-lg text-muted-foreground hover:text-foreground" title="Edit"><!></button> <button class="p-1.5 hover:bg-muted rounded-lg text-red-400" title="Delete"><!></button></div></div></div>');function Ge(u,r){C(r,!0);var c=Be(),i=o(c),n=o(i),f=o(n),m=o(f);Ie(m,{size:20}),t(f);var v=d(f,2),y=o(v),w=o(y,!0);t(y),t(v),t(n);var p=d(n,2),g=o(p);g.__click=[Qe,r];var x=o(g);Ae(x,{size:16}),t(g);var P=d(g,2);P.__click=[Xe,r];var H=o(P);De(H,{size:16}),t(P),t(p),t(i),t(c),z(()=>j(w,r.lead.name)),_(u,c),T()}ce(["click"]);const Je=(u,r)=>{l(r,E(e(r)==="asc"?"desc":"asc"))};var Ke=h('<div class="bg-green-500/20 text-green-400 p-4 rounded-lg"> </div>'),Oe=h('<div class="bg-red-500/20 text-red-400 p-4 rounded-lg"> </div>'),Re=(u,r,c)=>{l(r,null),l(c,!0)},Ve=h('<div class="flex justify-center p-8"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div></div>'),We=h('<div class="text-center p-8 bg-card rounded-lg border border-border">No leads found.</div>'),Ye=(u,r)=>l(r,e(r)-1),Ze=(u,r)=>l(r,e(r)+1),er=h('<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4"></div> <div class="flex flex-col sm:flex-row justify-between items-center gap-4 mt-4"><div class="text-sm text-muted-foreground text-center sm:text-left"> </div> <div class="flex flex-col sm:flex-row items-center gap-4"><select class="bg-secondary border-secondary rounded-lg px-2 py-1 focus:outline-none focus:ring-2 focus:ring-ring w-full sm:w-auto"><option>6 per page</option><option>12 per page</option><option>24 per page</option><option>48 per page</option></select> <div class="flex gap-2"><button class="px-3 py-1 rounded-lg border border-border hover:bg-muted disabled:opacity-50">Previous</button> <button class="px-3 py-1 rounded-lg border border-border hover:bg-muted disabled:opacity-50">Next</button></div></div></div>',1),rr=h('<div class="fixed inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center p-4 z-50"><div class="bg-card p-6 rounded-lg w-full max-w-md relative border border-border"><button class="absolute right-4 top-4 p-1 hover:bg-muted rounded-lg"><!></button> <!></div></div>'),tr=h('<div class="flex flex-col gap-4 container mx-auto "><div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"><h2 class="text-2xl font-bold">Leads Management</h2></div> <!> <!> <div class="flex flex-col md:flex-row items-center justify-between gap-4"><div class="flex flex-col md:flex-row gap-4 w-full md:w-auto"><div class="relative flex-1 md:w-[300px]"><!> <input type="text" placeholder="Search leads..." class="pl-10 pr-4 py-2 bg-secondary border-secondary rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-ring"></div> <button class="flex items-center gap-2 px-4 py-2 rounded-lg border border-border hover:bg-muted whitespace-nowrap">Sort by Name <!></button></div> <button class="flex items-center gap-2 bg-primary text-primary-foreground px-4 py-2 rounded-lg hover:bg-primary/90 justify-center flex-1 md:flex-initial whitespace-nowrap"><!> Add Lead</button></div> <!> <!></div>');function ar(u,r){C(r,!0);let c=b(""),i=b(1),n=b(6),f=b(E([])),m=b(!1),v=b(null),y=b("asc"),w=b(!1),p=b(null),g=b(null);const x=q(()=>e(f).filter(s=>s.name.toLowerCase().includes(e(c).toLowerCase())).sort((s,a)=>e(y)==="asc"?s.name<a.name?-1:s.name>a.name?1:0:a.name<s.name?-1:a.name>s.name?1:0)),P=q(()=>e(x).slice((e(i)-1)*e(n),e(i)*e(n))),H=q(()=>Math.ceil(e(x).length/e(n))),I=async()=>{l(w,!0);const{data:s,error:a}=await A.from("leads").select("*");a?(console.error("Error fetching leads:",a),l(p,"Failed to fetch leads.")):(l(f,E(s)),l(p,null)),l(w,!1)},me=async s=>{const{error:a}=await A.from("leads").delete().eq("id",s);a?(console.error("Error deleting lead:",a),l(p,"Failed to delete lead.")):(l(g,"Lead deleted successfully!"),l(p,null),await I())},fe=s=>{l(v,E(s)),l(m,!0)},Y=()=>{l(m,!1),l(v,null)},pe=async s=>{const{error:a}=e(v)?await A.from("leads").update({name:s.name}).eq("id",e(v).id):await A.from("leads").insert([{name:s.name}]);a?(console.error("Error saving lead:",a),l(p,"Failed to save lead.")):(l(g,E(e(v)?"Lead updated successfully!":"Lead added successfully!")),l(p,null),await I(),Y())};we(()=>{I()});var U=tr(),Z=d(o(U),2);N(Z,()=>e(g),s=>{var a=Ke(),L=o(a,!0);t(a),z(()=>j(L,e(g))),_(s,a)});var ee=d(Z,2);N(ee,()=>e(p),s=>{var a=Oe(),L=o(a,!0);t(a),z(()=>j(L,e(p))),_(s,a)});var $=d(ee,2),Q=o($),X=o(Q),re=o(X);qe(re,{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",size:20});var te=d(re,2);ve(te),t(X);var B=d(X,2);B.__click=[Je,y];var ge=d(o(B)),_e=q(()=>e(y)==="asc"?"":"rotate-180");Ce(ge,{size:16,get class(){return e(_e)}}),t(B),t(Q);var G=d(Q,2);G.__click=[Re,v,m];var be=o(G);Te(be,{size:20}),Le(),t(G),t($);var ae=d($,2);N(ae,()=>e(w),s=>{var a=Ve();_(s,a)},s=>{var a=ie(),L=W(a);N(L,()=>e(f).length===0,k=>{var S=We();_(k,S)},k=>{var S=er(),M=W(S);Ee(M,21,()=>e(P),F=>F.id,(F,ye)=>{Ge(F,{get lead(){return e(ye)},onEdit:fe,onDelete:me})}),t(M);var oe=d(M,2),J=o(oe),he=o(J);z(()=>j(he,`Showing ${(e(i)-1)*e(n)+1} to ${Math.min(e(i)*e(n),e(x).length)??""} of ${e(x).length??""} results`)),t(J);var se=d(J,2),D=o(se),K=o(D);K.value=(K.__value=6)==null?"":6;var O=d(K);O.value=(O.__value=12)==null?"":12;var R=d(O);R.value=(R.__value=24)==null?"":24;var de=d(R);de.value=(de.__value=48)==null?"":48,t(D);var le=d(D,2),V=o(le);V.__click=[Ye,i];var ne=d(V,2);ne.__click=[Ze,i],t(le),t(se),t(oe),z(()=>{V.disabled=e(i)===1,ne.disabled=e(i)===e(H)}),je(D,()=>e(n),F=>l(n,F)),_(k,S)},!0),_(s,a)});var xe=d(ae,2);N(xe,()=>e(m),s=>{var a=rr(),L=o(a),k=o(L);k.__click=Y;var S=o(k);He(S,{size:20}),t(k);var M=d(k,2);$e(M,{get lead(){return e(v)},onSave:pe}),t(L),t(a),_(s,a)}),t(U),ue(te,()=>e(c),s=>l(c,s)),_(u,U),T()}ce(["click"]);var or=h('<main class="container mx-auto min-h-screen p-4"><!></main>');function Sr(u,r){C(r,!1);const c=async()=>{const{data:f,error:m}=await A.from("leads").select("*");m&&console.error("Error fetching leads:",m)};ze(()=>{c()}),Se();var i=or(),n=o(i);ar(n,{}),t(i),_(u,i),T()}export{Sr as component};
