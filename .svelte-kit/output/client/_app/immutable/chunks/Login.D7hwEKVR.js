import"./disclose-version.Bg9kRutz.js";import{f as A,p as ve,e as h,t as D,a as fe,b as r,g as e,c as i,s as l,r as n}from"./utils.Cx6K9qTo.js";import{e as O,a as _,d as me,g as he,t as y,b as C}from"./store.BALTJZ26.js";import{i as w}from"./if.Bgpzl8Wa.js";import{r as P,s as se}from"./attributes.rzeD2olC.js";import{b as E}from"./input.BVFrb_g3.js";import{l as H,s as U,a as _e}from"./preload-helper.Tg4Km7Zr.js";import{I as W,a as Y,s as z}from"./Icon.Nl6wOSVO.js";import{E as oe}from"./eye.CaP1-WUo.js";function ie(c,a){const d=H(a,["children","$$slots","$$events","$$legacy"]);W(c,U({name:"eye-off"},()=>d,{iconNode:[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143"}],["path",{d:"m2 2 20 20"}]],children:(v,$)=>{var u=O(),m=A(u);Y(m,a,"default",{}),_(v,u)},$$slots:{default:!0}}))}function be(c,a){const d=H(a,["children","$$slots","$$events","$$legacy"]);W(c,U({name:"moon"},()=>d,{iconNode:[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z"}]],children:(v,$)=>{var u=O(),m=A(u);Y(m,a,"default",{}),_(v,u)},$$slots:{default:!0}}))}function xe(c,a){const d=H(a,["children","$$slots","$$events","$$legacy"]);W(c,U({name:"sun"},()=>d,{iconNode:[["circle",{cx:"12",cy:"12",r:"4"}],["path",{d:"M12 2v2"}],["path",{d:"M12 20v2"}],["path",{d:"m4.93 4.93 1.41 1.41"}],["path",{d:"m17.66 17.66 1.41 1.41"}],["path",{d:"M2 12h2"}],["path",{d:"M20 12h2"}],["path",{d:"m6.34 17.66-1.41 1.41"}],["path",{d:"m19.07 4.93-1.41 1.41"}]],children:(v,$)=>{var u=O(),m=A(u);Y(m,a,"default",{}),_(v,u)},$$slots:{default:!0}}))}function we(c,a){r(a,!e(a)),document.documentElement.classList.toggle("dark")}async function ke(c,a){try{const{error:d}=await z.auth.signInWithOAuth({provider:"azure",options:{scopes:"email openid profile",redirectTo:"https://eqkwwbmbswmpjpfzttov.supabase.co/auth/v1/callback"}});if(d){r(a,`Failed to initiate Azure login: ${d.message}`),console.error("Azure login initiation error:",d);return}r(a,"Redirecting to Azure login...")}catch(d){console.error("Error during Azure sign-in:",d),r(a,"Unexpected error occurred. Please try again.")}}var ye=y('<div class="flex gap-4"><input type="text" placeholder="First Name" required class="input input-bordered w-full dark:bg-gray-800 dark:text-white dark:border-gray-700"> <input type="text" placeholder="Last Name" required class="input input-bordered w-full dark:bg-gray-800 dark:text-white dark:border-gray-700"></div>'),$e=(c,a)=>r(a,!e(a)),Me=(c,a)=>r(a,!e(a)),Le=y('<div class="relative"><input placeholder="Confirm Password" required class="input input-bordered w-full dark:bg-gray-800 dark:text-white dark:border-gray-700"> <button type="button" class="absolute inset-y-0 right-4 flex items-center dark:text-gray-400"><!></button></div>'),Pe=y('<span class="loading loading-spinner loading-sm"></span>'),Ee=y('<p class="text-sm text-center mt-4 text-error dark:text-red-400"> </p>'),ze=(c,a)=>r(a,!1),Ae=y(`Don't have an account? <button class="text-primary dark:text-blue-400 font-medium">Register</button>`,1),Ne=(c,a)=>r(a,!0),je=y('Already have an account? <button class="text-primary dark:text-blue-400 font-medium">Login</button>',1),qe=y(`<div class="min-h-screen grid lg:grid-cols-2 transition-colors duration-300 dark:bg-gray-900"><button class="fixed top-4 right-4 p-2 rounded-full bg-gray-200 dark:bg-gray-700 z-50" aria-label="Toggle theme"><!></button> <div class="relative hidden lg:block bg-cover bg-center" style="background-image: linear-gradient(180deg, rgba(103, 21, 21, 0.8) 0%, rgba(103, 21, 21, 0.3) 50%), url('/images/login_bg.png');"><div class="relative z-10 h-full flex flex-col items-center justify-center space-y-4 p-10"><div class="text-center"><h1 class="text-5xl font-extrabold text-white tracking-tight mb-4">EuCorp</h1> <p class="text-xl text-gray-300 max-w-md">Our Institutional Planning System</p></div> <div class="mt-6 space-y-2 text-gray-200"><div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> <p>Streamline Project Management</p></div> <div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> <p>Enhance Collaboration</p></div> <div class="flex items-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path></svg> <p>Monitor Progress Effectively</p></div></div></div></div> <div class="flex items-center justify-center px-8"><div class="w-full max-w-md"><div class="text-center mb-8"><h1 class="text-2xl font-semibold dark:text-white"> </h1> <p class="text-gray-600 dark:text-gray-400"> </p></div> <form class="space-y-4"><!> <input type="email" placeholder="name@example.com" required class="input input-bordered w-full dark:bg-gray-800 dark:text-white dark:border-gray-700"> <div class="relative"><input placeholder="Password" required class="input input-bordered w-full dark:bg-gray-800 dark:text-white dark:border-gray-700"> <button type="button" class="absolute inset-y-0 right-4 flex items-center dark:text-gray-400"><!></button></div> <!> <button type="submit" class="btn bg-rose-700 w-full text-white hover:bg-rose-800 dark:bg-rose-800 dark:hover:bg-rose-900"><!> <span> </span></button></form> <!> <div class="divider dark:text-gray-400">OR</div> <button type="button" class="btn bg-blue-600 w-full text-white hover:bg-blue-700 dark:bg-blue-700 dark:hover:bg-blue-800 flex items-center justify-center space-x-2"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 256" class="w-5 h-5" fill="none"><path d="M126.23 14.7L0 207.43h71.54L126.23 80.7l54.7 126.74h71.54L126.23 14.7Z" fill="#0078D4"></path><path d="M88.73 213.22H176l-44.76-79.55-42.51 79.55Z" fill="#008AD7"></path><path d="M176 213.22H252L200.28 127l-24.28 86.22Z" fill="#0079B7"></path></svg> <span>Sign in with Azure</span></button> <p class="text-sm text-center mt-4 dark:text-gray-400"><!></p></div></div></div>`);function Oe(c,a){ve(a,!0);let d=h(_e(window.matchMedia("(prefers-color-scheme: dark)").matches)),k=h(""),v=h(""),$=h(""),u=h(""),m=h(""),g=h(""),f=h(!1),b=h(!0),M=h(!1);async function ne(){if(r(f,!0),r(g,""),e(b)){const{data:t,error:s}=await z.auth.signInWithPassword({email:e(k),password:e(v)});if(s){r(g,`Failed to login: ${s.message}`),console.error("Login error:",s),r(f,!1);return}const o=t==null?void 0:t.user;if(o){const{data:p,error:x}=await z.from("profiles").select("is_verified").eq("id",o.id).single();if(x){console.error("Error fetching profile:",x),r(g,"Error checking verification status."),r(f,!1);return}if(!(p!=null&&p.is_verified)){r(g,"Your account is pending verification."),r(f,!1);return}r(g,"Login successful! Redirecting..."),setTimeout(()=>{window.location.href="/dashboard"},1e3)}}else{if(e(v)!==e($)){r(g,"Passwords do not match."),r(f,!1);return}const{data:t,error:s}=await z.auth.signUp({email:e(k),password:e(v),options:{data:{first_name:e(u),last_name:e(m)}}});if(s){r(g,`Failed to register: ${s.message}`),console.error("Registration error:",s),r(f,!1);return}const o=t==null?void 0:t.user;if(o){const{error:p}=await z.from("profiles").insert({id:o.id,email:o.email,first_name:e(u),last_name:e(m),role:"user",is_verified:!1});if(p){console.error("Error inserting profile:",p),r(g,"Profile creation failed. Please try again later."),r(f,!1);return}}r(g,"Registration successful! Please check your email for verification.")}r(f,!1)}var R=qe(),N=i(R);N.__click=[we,d];var le=i(N);w(le,()=>e(d),t=>{xe(t,{class:"w-5 h-5 text-yellow-500"})},t=>{be(t,{class:"w-5 h-5 text-gray-700"})}),n(N);var G=l(N,4),J=i(G),S=i(J),I=i(S),de=i(I,!0);n(I);var K=l(I,2),ce=i(K,!0);n(K),n(S);var j=l(S,2),Q=i(j);w(Q,()=>!e(b),t=>{var s=ye(),o=i(s);P(o);var p=l(o,2);P(p),n(s),E(o,()=>e(u),x=>r(u,x)),E(p,()=>e(m),x=>r(m,x)),_(t,s)});var B=l(Q,2);P(B);var F=l(B,2),q=i(F);P(q);var T=l(q,2);T.__click=[$e,M];var ue=i(T);w(ue,()=>e(M),t=>{ie(t,{class:"w-5 h-5"})},t=>{oe(t,{class:"w-5 h-5"})}),n(T),n(F);var V=l(F,2);w(V,()=>!e(b),t=>{var s=Le(),o=i(s);P(o);var p=l(o,2);p.__click=[Me,M];var x=i(p);w(x,()=>e(M),L=>{ie(L,{class:"w-5 h-5"})},L=>{oe(L,{class:"w-5 h-5"})}),n(p),n(s),D(()=>se(o,"type",e(M)?"text":"password")),E(o,()=>e($),L=>r($,L)),_(t,s)});var Z=l(V,2),X=i(Z);w(X,()=>e(f),t=>{var s=Pe();_(t,s)});var ee=l(X,2),pe=i(ee,!0);n(ee),n(Z),n(j);var te=l(j,2);w(te,()=>e(g),t=>{var s=Ee(),o=i(s,!0);n(s),D(()=>C(o,e(g))),_(t,s)});var re=l(te,4);re.__click=[ke,g];var ae=l(re,2),ge=i(ae);w(ge,()=>e(b),t=>{var s=Ae(),o=l(A(s));o.__click=[ze,b],_(t,s)},t=>{var s=je(),o=l(A(s));o.__click=[Ne,b],_(t,s)}),n(ae),n(J),n(G),n(R),D(()=>{C(de,e(b)?"Login":"Create an Account"),C(ce,e(b)?"Sign in to continue":"Enter your details to register"),se(q,"type",e(M)?"text":"password"),Z.disabled=e(f),C(pe,e(f)?"Processing...":e(b)?"Login":"Register")}),he("submit",j,ne),E(B,()=>e(k),t=>r(k,t)),E(q,()=>e(v),t=>r(v,t)),_(c,R),fe()}me(["click"]);export{Oe as L,be as M,xe as S};
