import"../chunks/disclose-version.Bg9kRutz.js";import{p as K,a as N,b as R,g as r,f as d,m as O,c,s as L,r as l,t as Q,n as S}from"../chunks/runtime.CLSstnwU.js";import{s as V}from"../chunks/render.D17u6ZCY.js";import{i as t}from"../chunks/if.b2Q-jNLG.js";import{e as W,i as X}from"../chunks/each.sV1uapQk.js";import{d as Z,a as e,t as w,c as p}from"../chunks/utils.kA-YjkFf.js";import{c as $}from"../chunks/svelte-component.C1haptp8.js";import{s as rr}from"../chunks/class.9GukHOdr.js";import{i as er}from"../chunks/lifecycle.V0dJQ05z.js";import{p as ar}from"../chunks/props.BD0jg91j.js";import{s as tr}from"../chunks/supabaseClient.CaMOPPuz.js";import{A as sr,a as ir,b as or,D as nr,c as dr,d as lr,C as pr,T as vr,L as gr}from"../chunks/DeptOptMonitoring.IX1k4GSd.js";import{C as B}from"../chunks/circle-alert.DH3NA22_.js";var cr=(q,P,M)=>R(P,r(M).id),mr=w("<button><!> <span> </span></button>"),fr=w('<div class="flex flex-col items-center justify-center py-12"><div class="w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"></div> <p class="mt-4 text-gray-600 dark:text-gray-400">Loading your dashboard...</p></div>'),ur=w('<div class="flex items-center gap-3 p-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 rounded-lg"><!> <p>You do not have the required permissions to view this page.</p></div>'),_r=w('<div class="flex items-center gap-3 p-4 bg-red-50 dark:bg-red-900/20 text-red-700 dark:text-red-400 rounded-lg"><!> <p>Failed to load session or profile data. Please try refreshing the page.</p></div>'),br=w(`<div class="min-h-screen bg-gray-50 dark:bg-gray-900"><div class="container mx-auto px-4 py-8"><div class="mb-8"><h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-2">Year-end Monitoring Dashboard</h1> <p class="text-gray-600 dark:text-gray-400">Track and manage your organization's plans, risks, and opportunities</p></div> <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm mb-6"><div class="flex flex-wrap gap-2 p-2"></div></div> <div class="bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6"><!></div></div></div>`);function Lr(q,P){K(P,!1);let M=ar(P,"data",8,null),D=O(null),m=O(null),E=O(!0),v=O("Plans");const G=[{id:"Plans",label:"Plans",icon:pr},{id:"Risks",label:"Risks",icon:vr},{id:"Opportunities",label:"Opportunities",icon:gr}];(async()=>{var g;try{if((g=M())!=null&&g.session){R(D,M().session);const{user:a}=r(D),{data:s,error:i}=await tr.from("profiles").select("role").eq("id",a.id).single();i?console.error("Error fetching user profile:",i.message):(R(m,s),console.log("Role in Opportunities: ",r(m)))}else console.warn("Session is not available or data is missing.")}catch(a){console.error("Error fetching user profile or session:",a)}finally{R(E,!1)}})(),er();var z=br(),U=c(z),A=L(c(U),2),Y=c(A);W(Y,5,()=>G,X,(g,a)=>{var s=mr();s.__click=[cr,v,a];var i=c(s);$(i,()=>r(a).icon,(x,f)=>{f(x,{size:18})});var o=L(i,2),b=c(o,!0);l(o),l(s),Q(()=>{rr(s,`flex items-center gap-2 px-4 py-2 rounded-md transition-all duration-200 ${(r(v)===r(a).id?"bg-blue-500 text-white":"hover:bg-gray-100 dark:hover:bg-gray-700 text-gray-700 dark:text-gray-300")??""}`),V(b,r(a).label)}),e(g,s)}),l(Y),l(A);var j=L(A,2),H=c(j);t(H,()=>r(E),g=>{var a=fr();e(g,a)},g=>{var a=p(),s=d(a);t(s,()=>r(D)&&r(m),i=>{var o=p(),b=d(o);t(b,()=>r(m).role==="admin"||r(m).role==="vice_president"||r(m).role==="president",x=>{var f=p(),C=d(f);t(C,()=>r(v)==="Plans",u=>{sr(u,{})},u=>{var n=p(),h=d(n);t(h,()=>r(v)==="Risks",_=>{ir(_,{})},_=>{var k=p(),T=d(k);t(T,()=>r(v)==="Opportunities",y=>{or(y,{})},null,!0),e(_,k)},!0),e(u,n)}),e(x,f)},x=>{var f=p(),C=d(f);t(C,()=>r(m).role==="user",u=>{var n=p(),h=d(n);t(h,()=>r(v)==="Plans",_=>{nr(_,{})},_=>{var k=p(),T=d(k);t(T,()=>r(v)==="Risks",y=>{dr(y)},y=>{var F=p(),I=d(F);t(I,()=>r(v)==="Opportunities",J=>{lr(J,{})},null,!0),e(y,F)},!0),e(_,k)}),e(u,n)},u=>{var n=ur(),h=c(n);B(h,{size:24}),S(2),l(n),e(u,n)},!0),e(x,f)}),e(i,o)},i=>{var o=_r(),b=c(o);B(b,{size:24}),S(2),l(o),e(i,o)},!0),e(g,a)}),l(j),l(U),l(z),e(q,z),N()}Z(["click"]);export{Lr as component};
