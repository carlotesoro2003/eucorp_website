import"../chunks/disclose-version.Bg9kRutz.js";import{f as Z,p as ee,a9 as te,aa as ae,t as h,a as se,s as n,g as e,b as i,m,c as a,r as s,n as J,ab as re}from"../chunks/utils.CRNn4dtP.js";import{s as T}from"../chunks/render.xPn1qZIb.js";import{i as A}from"../chunks/if.CRsBAEFG.js";import{e as ie,i as le}from"../chunks/each.v0RK4Yef.js";import{c as oe,a as _,d as ne,t as w}from"../chunks/store.B1kL-7Ni.js";import{s as ce}from"../chunks/attributes.BcfEV1VJ.js";import{t as S}from"../chunks/class.CstC7PuZ.js";import{b as de}from"../chunks/select.CgyWjfO5.js";import{i as ve}from"../chunks/lifecycle.DSkr6FdQ.js";import{o as ge}from"../chunks/index-client.BdGz_wQc.js";import{s as B}from"../chunks/supabaseClient.BTuNJN2N.js";import{I as ue,s as pe}from"../chunks/Icon.CEA2x5sb.js";import{l as fe,s as me}from"../chunks/preload-helper.Dwm_PvIR.js";import{P as _e}from"../chunks/plus.BBSv_QI7.js";import{a as be,C as xe}from"../chunks/circle-check.BO4zRICV.js";function ye(k,f){const u=fe(f,["children","$$slots","$$events","$$legacy"]);ue(k,me({name:"target"},()=>u,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["circle",{cx:"12",cy:"12",r:"6"}],["circle",{cx:"12",cy:"12",r:"2"}]],children:(x,p)=>{var l=oe(),v=Z(l);pe(v,f,"default",{}),_(x,l)},$$slots:{default:!0}}))}const he=(k,f,u,b)=>{e(f)?i(u,1):i(b,"Please select a strategic goal first.")};var we=w('<div class="flex items-center gap-2 p-4 bg-green-100 text-green-700 rounded-lg mb-4"><!> <span> </span></div>'),ke=w('<div class="flex items-center gap-2 p-4 bg-red-100 text-red-700 rounded-lg mb-4"><!> <span> </span></div>'),je=w("<option> </option>"),$e=w('<div class="space-y-4"><label for="strategic_goal" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Select Strategic Goal</label> <select id="strategic_goal" class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"><option>Select a goal</option><!></select> <button class="w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"><!> Continue to Add Objectives</button></div>'),Se=w('<div class="min-h-screen bg-gray-50 dark:bg-gray-900 p-4 md:p-8"><div class="max-w-4xl mx-auto space-y-6"><div class="flex items-center justify-between bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm"><div><h1 class="text-2xl font-bold text-gray-900 dark:text-white">Create Strategic Objectives</h1> <p class="text-gray-600 dark:text-gray-400 mt-1">Define and manage your strategic objectives</p></div> <!></div> <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm"><div class="flex items-center justify-between mb-8"><div class="flex-1"><div class="relative"><div class="h-2 bg-gray-200 rounded"><div class="h-2 bg-blue-500 rounded transition-all duration-300"></div></div> <div class="flex justify-between absolute -top-3 w-full"><span class="w-8 h-8 flex items-center justify-center bg-blue-500 rounded-full text-white text-sm">1</span> <span class="w-8 h-8 flex items-center justify-center rounded-full text-sm">2</span></div></div> <div class="flex justify-between mt-4"><span class="text-sm font-medium text-gray-600">Select Goal</span> <span class="text-sm font-medium text-gray-600">Add Objectives</span></div></div></div> <!> <!> <!></div></div></div>');function He(k,f){ee(f,!1);let u=null,b=m(null),x=m([]),p=m(null),l=m(0),v=m(null),d=m(null);const K=async()=>{try{const{data:r,error:t}=await B.auth.getSession();if(t)throw t;if(u=r.session,u){const{user:o}=u,{data:c,error:g}=await B.from("profiles").select("id").eq("id",o.id).single();if(g)throw g;i(b,c)}}catch(r){i(d,`Error fetching profile: ${r.message}`)}finally{}},L=async()=>{try{const{data:r,error:t}=await B.from("strategic_goals").select("id, name");if(t)throw t;i(x,r||[])}catch{i(d,"Failed to fetch strategic goals.")}},Q=()=>{i(l,0)};ge(()=>{K(),L()}),te(()=>(e(v),e(d)),()=>{if(e(v)||e(d)){const r=setTimeout(()=>{i(v,null),i(d,null)},5e3);clearTimeout(r)}}),ae(),ve();var G=Se(),D=a(G),C=a(D),R=n(a(C),2);ye(R,{class:"w-8 h-8 text-blue-500"}),s(C);var F=n(C,2),M=a(F),I=a(M),N=a(I),P=a(N),V=a(P);s(P);var q=n(P,2),j=n(a(q),2);s(q),s(N),J(2),s(I),s(M);var z=n(M,2);A(z,()=>e(v),r=>{var t=we(),o=a(t);be(o,{class:"w-5 h-5"});var c=n(o,2),g=a(c,!0);s(c),s(t),h(()=>T(g,e(v))),_(r,t)});var U=n(z,2);A(U,()=>e(d),r=>{var t=ke(),o=a(t);xe(o,{class:"w-5 h-5"});var c=n(o,2),g=a(c,!0);s(c),s(t),h(()=>T(g,e(d))),_(r,t)});var W=n(U,2);A(W,()=>e(l)===0,r=>{var t=$e(),o=n(a(t),2);h(()=>{e(p),re(()=>{e(x)})});var c=a(o);c.value=(c.__value=null)==null?"":null;var g=n(c);ie(g,1,()=>e(x),le,(E,$)=>{var y=je(),H={},Y=a(y,!0);s(y),h(()=>{H!==(H=e($).id)&&(y.value=(y.__value=e($).id)==null?"":e($).id),T(Y,e($).name)}),_(E,y)}),s(o);var O=n(o,2);O.__click=[he,p,l,d];var X=a(O);_e(X,{class:"w-5 h-5"}),J(),s(O),s(t),de(o,()=>e(p),E=>i(p,E)),_(r,t)},r=>{ObjectiveForm(r,{get selectedGoal(){return e(p)},get profile(){return e(b)},onBack:Q,onSuccess:t=>{i(v,t),i(l,0),i(p,null)},onError:t=>i(d,t)})}),s(F),s(D),s(G),h(()=>{ce(V,"style",`width: ${(e(l)===1?"100%":"0%")??""}`),S(j,"bg-blue-500",e(l)===1),S(j,"text-white",e(l)===1),S(j,"bg-gray-200",e(l)===0),S(j,"text-gray-600",e(l)===0)}),_(k,G),se()}ne(["click"]);export{He as component};
