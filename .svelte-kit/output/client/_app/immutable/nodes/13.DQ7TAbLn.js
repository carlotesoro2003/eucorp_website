import"../chunks/disclose-version.Bg9kRutz.js";import{p as et,t as b,a as rt,g as t,c as r,f as st,b as _,m as x,s as o,r as e,i as ot}from"../chunks/runtime.CLSstnwU.js";import{s as d}from"../chunks/render.D17u6ZCY.js";import{i as j}from"../chunks/if.b2Q-jNLG.js";import{e as z,i as K}from"../chunks/each.sV1uapQk.js";import{e as T,a as p,t as f,c as it}from"../chunks/utils.kA-YjkFf.js";import{b as lt}from"../chunks/select.BAP3DC-4.js";import{i as nt}from"../chunks/lifecycle.V0dJQ05z.js";import{o as dt}from"../chunks/index-client.DT-fMr9Z.js";import{s as B}from"../chunks/supabaseClient.CaMOPPuz.js";import{g as vt}from"../chunks/entry.SSTTWxxn.js";var ct=f('<span class="loading loading-spinner text-primary">Loading...</span>'),_t=f("<option> </option>"),pt=f('<tr><td> </td><td> </td><td> </td><td> </td><td> </td><td> </td><td><button class="btn btn-primary">Add Action Plans</button></td></tr>'),mt=f('<div class="mt-8"><h2 class="text-xl font-bold mb-4"> </h2> <p class="mb-4"> </p> <table class="table table-zebra w-full"><thead><tr><th>Objective</th><th>Strategic Initiatives</th><th>KPI</th><th>Persons Involved</th><th>Target</th><th>Evaluation Measures</th><th>Action</th></tr></thead><tbody></tbody></table></div>'),ft=f('<div class="mt-4"><p>No objectives found for this goal.</p></div>'),ut=f('<div class="container mx-auto p-4"><h1 class="text-3xl font-bold">Operational Plans</h1> <!> <div class="my-4"><label class="block">Select a Strategic Goal:</label> <select class="select select-bordered w-full"><option disabled selected>Select a goal</option><!></select></div> <!></div>');function kt(C,D){et(D,!1);let u=x([]),n=x(null),y=x([]),g=x(!1);const F=async()=>{_(g,!0);const{data:s,error:a}=await B.from("strategic_goals").select("id, name, goal_no");a?console.error("Error fetching strategic goals:",a):_(u,s),_(g,!1)},H=async()=>{if(t(n)===null)return;_(g,!0);const{data:s,error:a}=await B.from("strategic_objectives").select("*").eq("strategic_goal_id",t(n));a?console.error("Error fetching strategic objectives:",a):_(y,s),_(g,!1)};dt(()=>{F()});const J=s=>{vt(`/plans/operationalPlans/${s}`)};nt();var S=ut(),L=o(r(S),2);j(L,()=>t(g),s=>{var a=ct();p(s,a)});var w=o(L,2),h=o(r(w),2);b(()=>{t(n),ot(()=>{t(u)})});var G=r(h);G.value=((G.__value="")==null,"");var Q=o(G);z(Q,1,()=>t(u),K,(s,a)=>{var i=_t(),m={},v=r(i);e(i),b(()=>{m!==(m=t(a).id)&&(i.value=(i.__value=t(a).id)==null?"":t(a).id),d(v,`${t(a).goal_no??""} - ${t(a).name??""}`)}),p(s,i)}),e(h),e(w);var R=o(w,2);j(R,()=>t(n)&&t(y).length>0,s=>{var a=mt(),i=r(a),m=r(i);b(()=>{var c;return d(m,`Strategic Objectives for Goal No ${((c=t(u).find(l=>l.id===t(n)))==null?void 0:c.goal_no)??""}`)}),e(i);var v=o(i,2),U=r(v);b(()=>{var c;return d(U,`Strategic Goal: ${((c=t(u).find(l=>l.id===t(n)))==null?void 0:c.name)??""}`)}),e(v);var M=o(v,2),N=o(r(M));z(N,5,()=>t(y),K,(c,l)=>{var O=pt(),P=r(O),V=r(P,!0);e(P);var $=o(P),W=r($,!0);e($);var k=o($),X=r(k,!0);e(k);var I=o(k),Y=r(I,!0);e(I);var A=o(I),Z=r(A,!0);e(A);var E=o(A),tt=r(E,!0);e(E);var q=o(E),at=r(q);e(q),e(O),b(()=>{d(V,t(l).name),d(W,t(l).strategic_initiatives),d(X,t(l).kpi),d(Y,t(l).persons_involved),d(Z,t(l).target),d(tt,t(l).eval_measures)}),T("click",at,()=>J(t(l).id)),p(c,O)}),e(N),e(M),e(a),p(s,a)},s=>{var a=it(),i=st(a);j(i,()=>t(n),m=>{var v=ft();p(m,v)},null,!0),p(s,a)}),e(S),lt(h,()=>t(n),s=>_(n,s)),T("change",h,H),p(C,S),rt()}export{kt as component};
