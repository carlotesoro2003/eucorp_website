import"../chunks/disclose-version.Bg9kRutz.js";import{f as de,p as I,c as s,r as t,s as o,t as D,a as F,b as r,e as g,g as a,J as ne,n as ce,h as V}from"../chunks/utils.Cx6K9qTo.js";import{e as he,a as S,d as Y,t as M,b as T}from"../chunks/store.BALTJZ26.js";import{i as ye}from"../chunks/lifecycle.D0tpf3vC.js";import{o as we}from"../chunks/index-client.lWLCSZVk.js";/* empty css                         */import{I as Ce,a as ke,s as z}from"../chunks/Icon.Nl6wOSVO.js";import{i as W}from"../chunks/if.Bgpzl8Wa.js";import{r as ue,e as Ee,i as Se}from"../chunks/attributes.rzeD2olC.js";import{s as je}from"../chunks/class.DKwifj_X.js";import{b as fe}from"../chunks/input.BVFrb_g3.js";import{b as Me}from"../chunks/select.BtlRD387.js";import{l as Pe,s as ze,p as De,a as E}from"../chunks/preload-helper.Tg4Km7Zr.js";import{X as Te}from"../chunks/x.D9PBK57y.js";import{P as Ae}from"../chunks/pencil.Brzv4RaD.js";import{T as Le}from"../chunks/trash-2.d9YwO6MY.js";import{S as Ne}from"../chunks/search.BpYLThKw.js";import{P as qe}from"../chunks/plus.Dop3u5ke.js";function Ie(f,e){const c=Pe(e,["children","$$slots","$$events","$$legacy"]);Ce(f,ze({name:"shapes"},()=>c,{iconNode:[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5"}]],children:(n,v)=>{var m=he(),u=de(m);ke(u,e,"default",{}),S(n,m)},$$slots:{default:!0}}))}const Fe=async(f,e,c,d)=>{r(e,!0),await c.onSubmit(d)||r(e,!1)};var Je=M('<div class="fixed inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center p-4 z-50"><div class="bg-card p-6 rounded-lg w-full max-w-md relative border border-border"><button class="absolute right-4 top-4 p-1 hover:bg-muted rounded-lg"><!></button> <h2 class="text-xl font-bold mb-4"> </h2> <div class="flex flex-col gap-4"><div class="flex flex-col gap-2"><label for="name">Classification Name</label> <input id="name" type="text" class="px-3 py-2 bg-secondary border-secondary rounded-lg focus:outline-none focus:ring-2 focus:ring-ring" placeholder="Enter classification name"></div> <div class="flex justify-end gap-2 mt-4"><button class="px-4 py-2 border border-border rounded-lg hover:bg-muted">Cancel</button> <button class="px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90 disabled:opacity-50"> </button></div></div></div></div>');function Qe(f,e){I(e,!0);let c=De(e,"isEditing",3,!1),d=g(!1),n=E({...e.classification});var v=Je(),m=s(v),u=s(m);u.__click=function(...C){var k;(k=e.onClose)==null||k.apply(this,C)};var x=s(u);Te(x,{size:20}),t(u);var y=o(u,2),_=s(y,!0);t(y);var p=o(y,2),b=s(p),j=o(s(b),2);ue(j),t(b);var A=o(b,2),L=s(A);L.__click=function(...C){var k;(k=e.onClose)==null||k.apply(this,C)};var w=o(L,2);w.__click=[Fe,d,e,n];var h=s(w,!0);t(w),t(A),t(p),t(m),t(v),D(()=>{T(_,c()?"Edit Classification":"Add Classification"),w.disabled=a(d)||!n.name,T(h,a(d)?"Saving...":"Save")}),fe(j,()=>n.name,C=>n.name=C),S(f,v),F()}Y(["click"]);const Ue=async(f,e,c)=>{e.classification.id!==null&&(r(c,!0),await e.onDelete(e.classification.id),r(c,!1))};var Xe=(f,e)=>e.onEdit(e.classification),Ze=M('<div class="bg-card border border-border rounded-lg p-4 hover:shadow-lg transition-shadow"><div class="flex justify-between items-start gap-4"><h3 class="text-lg font-medium break-words flex-1"> </h3> <div class="flex gap-2 shrink-0"><button class="hover:bg-muted rounded-lg text-muted-foreground hover:text-foreground" title="Edit"><!></button> <button class="hover:bg-red-100 text-red-500 hover:text-red-600 rounded-lg disabled:opacity-50" title="Delete"><!></button></div></div></div>');function Be(f,e){I(e,!0);let c=g(!1);var d=Ze(),n=s(d),v=s(n),m=s(v,!0);t(v);var u=o(v,2),x=s(u);x.__click=[Xe,e];var y=s(x);Ae(y,{size:18}),t(x);var _=o(x,2);_.__click=[Ue,e,c];var p=s(_);Le(p,{size:18}),t(_),t(u),t(n),t(d),D(()=>{T(m,e.classification.name),_.disabled=a(c)}),S(f,d),F()}Y(["click"]);var Ge=M("<div><span> </span></div>"),He=(f,e)=>e(),Ke=M('<div class="flex justify-center p-8"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div></div>'),Oe=(f,e)=>r(e,a(e)-1),Re=(f,e)=>r(e,a(e)+1),Ve=M('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"></div> <div class="flex flex-col sm:flex-row justify-between items-center gap-4"><div class="text-sm text-muted-foreground"> </div> <div class="flex flex-col sm:flex-row items-center gap-4"><select class="bg-secondary border-secondary rounded-lg px-2 py-1 focus:outline-none focus:ring-2 focus:ring-ring w-full sm:w-auto"><option>6 per page</option><option>12 per page</option><option>24 per page</option><option>48 per page</option></select> <div class="flex gap-2"><button class="px-3 py-1 rounded-lg border border-border hover:bg-muted disabled:opacity-50">Previous</button> <button class="px-3 py-1 rounded-lg border border-border hover:bg-muted disabled:opacity-50">Next</button></div></div></div>',1),We=M('<div class="flex flex-col gap-4 container mx-auto "><div class="flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4"><div class="flex items-center gap-2"><!> <h1 class="text-2xl font-bold">Classsification Management</h1></div></div> <!> <div class="flex flex-col md:flex-row gap-4 items-center justify-between"><div class="relative flex-1 w-full md:max-w-[300px]"><!> <input type="text" placeholder="Search classifications..." class="pl-10 pr-4 py-2 bg-secondary border-secondary rounded-lg w-full focus:outline-none focus:ring-2 focus:ring-ring"></div> <button class="flex items-center gap-2 bg-primary text-primary-foreground px-4 py-2 rounded-lg hover:bg-primary/90 justify-center whitespace-nowrap w-full md:w-auto"><!> Add Classification</button></div> <!> <!></div>');function Ye(f,e){I(e,!0);let c=g(E([])),d=g(E({id:null,name:""})),n=g(!1),v=g(!1),m=g(""),u=g(!1),x=g(""),y=g("success"),_=g(!1),p=g(1),b=g(6);const j=V(()=>a(c).filter(i=>i.name.toLowerCase().includes(a(m).toLowerCase()))),A=V(()=>a(j).slice((a(p)-1)*a(b),a(p)*a(b))),L=V(()=>Math.ceil(a(j).length/a(b))),w=async()=>{r(_,!0);const{data:i,error:l}=await z.from("classification").select("id, name");l?h("Error fetching classifications.","error"):r(c,E(i||[])),r(_,!1)},h=(i,l="success")=>{r(x,E(i)),r(y,E(l)),r(u,!0),setTimeout(()=>r(u,!1),3e3)},C=(i={id:null,name:""})=>{r(d,E({...i})),r(v,i.id!==null),r(n,!0)},k=()=>{r(n,!1),r(d,E({id:null,name:""}))},ve=async i=>{if(a(v)&&i.id!==null){const{error:l}=await z.from("classification").update({name:i.name}).eq("id",i.id);if(l)return h("Error updating classification.","error"),!1;h("Classification updated successfully.")}else{const{error:l}=await z.from("classification").insert({name:i.name});if(l)return h("Error adding classification.","error"),!1;h("Classification added successfully.")}return await w(),k(),!0},me=async i=>{const{error:l}=await z.from("classification").delete().eq("id",i);l?h("Error deleting classification.","error"):(h("Classification deleted successfully."),await w())};ne(()=>{a(m)&&r(p,1)}),ne(()=>{w()});var J=We(),Q=s(J),$=s(Q),pe=s($);Ie(pe,{class:"w-8 h-8 text-primary"}),ce(2),t($),t(Q);var ee=o(Q,2);W(ee,()=>a(u),i=>{var l=Ge(),P=s(l),N=s(P,!0);t(P),t(l),D(()=>{je(l,`p-4 rounded-lg ${(a(y)==="success"?"bg-green-600":"bg-red-600")??""} text-white`),T(N,a(x))}),S(i,l)});var U=o(ee,2),X=s(U),ae=s(X);Ne(ae,{class:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground",size:20});var te=o(ae,2);ue(te),t(X);var Z=o(X,2);Z.__click=[He,C];var ge=s(Z);qe(ge,{size:20}),ce(),t(Z),t(U);var se=o(U,2);W(se,()=>a(_),i=>{var l=Ke();S(i,l)},i=>{var l=Ve(),P=de(l);Ee(P,21,()=>a(A),Se,(R,xe)=>{Be(R,{get classification(){return a(xe)},onEdit:C,onDelete:me})}),t(P);var N=o(P,2),B=s(N),_e=s(B);D(()=>T(_e,`Showing ${(a(p)-1)*a(b)+1} to ${Math.min(a(p)*a(b),a(j).length)??""} of ${a(j).length??""} results`)),t(B);var ie=o(B,2),q=s(ie),G=s(q);G.value=(G.__value=6)==null?"":6;var H=o(G);H.value=(H.__value=12)==null?"":12;var K=o(H);K.value=(K.__value=24)==null?"":24;var re=o(K);re.value=(re.__value=48)==null?"":48,t(q);var oe=o(q,2),O=s(oe);O.__click=[Oe,p];var le=o(O,2);le.__click=[Re,p],t(oe),t(ie),t(N),D(()=>{O.disabled=a(p)===1,le.disabled=a(p)===a(L)}),Me(q,()=>a(b),R=>r(b,R)),S(i,l)});var be=o(se,2);W(be,()=>a(n),i=>{Qe(i,{get isEditing(){return a(v)},get classification(){return a(d)},onClose:k,onSubmit:ve})}),t(J),fe(te,()=>a(m),i=>r(m,i)),S(f,J),F()}Y(["click"]);var $e=M('<main class="container mx-auto min-h-screen p-4"><!></main>');function _a(f,e){I(e,!1);const c=async()=>{const{data:m,error:u}=await z.from("classification").select("id, name");u&&d("Error fetching classifications.","error")},d=(m,u="success")=>{setTimeout(()=>!1,3e3)};we(async()=>{await c()}),ye();var n=$e(),v=s(n);Ye(v,{}),t(n),S(f,n),F()}export{_a as component};
