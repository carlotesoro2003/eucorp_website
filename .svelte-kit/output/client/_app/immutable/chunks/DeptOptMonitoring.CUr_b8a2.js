import"./disclose-version.Bg9kRutz.js";import{f as nt,p as Dt,d as V,H as ee,t as Y,g as t,b as p,a as Ot,an as Kt,e as Ut,c as a,s as i,r as e,n as ct,a9 as Xt,aa as ve,m as Et}from"./utils.CRNn4dtP.js";import{c as mt,a as g,d as qt,t as f}from"./store.B1kL-7Ni.js";import{I as Ft,s as Tt}from"./Icon.CEA2x5sb.js";import{l as It,s as zt,a as G,p as Zt}from"./preload-helper.Dwm_PvIR.js";import{s as w}from"./render.xPn1qZIb.js";import{i as J}from"./if.CRsBAEFG.js";import{e as $t,i as At}from"./each.v0RK4Yef.js";import{r as Qt,c as ae,a as re}from"./attributes.BcfEV1VJ.js";import{s as jt}from"./class.CstC7PuZ.js";import{b as Bt}from"./input.o7SqHMM4.js";import{s as dt}from"./supabaseClient.BTuNJN2N.js";import{E as Yt,a as oe}from"./jspdf.plugin.autotable.hR4uI5lc.js";import{C as ie}from"./chevron-down.btlU_6YW.js";import{D as se}from"./download.CIM__xX3.js";import{L as Lt}from"./loader-circle.D00fYFri.js";import{C as ne}from"./chevron-left.Ykq-ocAp.js";import{C as de}from"./chevron-right.UwGiIHNd.js";import{i as pe}from"./lifecycle.DSkr6FdQ.js";import{o as Wt}from"./index-client.BdGz_wQc.js";/* empty css                 */import{b as Vt}from"./select.CgyWjfO5.js";import{A as ue}from"./arrow-up-down.Ck2frNgV.js";import{C as _e,a as xe}from"./circle-x.DAt5zSv4.js";import{E as le}from"./eye.C9SOZpvn.js";import{c as me}from"./riskCalculator.D3oLOKg6.js";import{X as Jt}from"./x.DaAqSZOK.js";import{C as ye,a as fe}from"./circle-check.BO4zRICV.js";function Sr(h,o){const n=It(o,["children","$$slots","$$events","$$legacy"]);Ft(h,zt({name:"clipboard-list"},()=>n,{iconNode:[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}],["path",{d:"M12 11h4"}],["path",{d:"M12 16h4"}],["path",{d:"M8 11h.01"}],["path",{d:"M8 16h.01"}]],children:(d,u)=>{var v=mt(),b=nt(v);Tt(b,o,"default",{}),g(d,v)},$$slots:{default:!0}}))}function he(h,o){const n=It(o,["children","$$slots","$$events","$$legacy"]);Ft(h,zt({name:"clock"},()=>n,{iconNode:[["circle",{cx:"12",cy:"12",r:"10"}],["polyline",{points:"12 6 12 12 16 14"}]],children:(d,u)=>{var v=mt(),b=nt(v);Tt(b,o,"default",{}),g(d,v)},$$slots:{default:!0}}))}function ce(h,o){const n=It(o,["children","$$slots","$$events","$$legacy"]);Ft(h,zt({name:"file-text"},()=>n,{iconNode:[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}],["path",{d:"M10 9H8"}],["path",{d:"M16 13H8"}],["path",{d:"M16 17H8"}]],children:(d,u)=>{var v=mt(),b=nt(v);Tt(b,o,"default",{}),g(d,v)},$$slots:{default:!0}}))}function $r(h,o){const n=It(o,["children","$$slots","$$events","$$legacy"]);Ft(h,zt({name:"lightbulb"},()=>n,{iconNode:[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5"}],["path",{d:"M9 18h6"}],["path",{d:"M10 22h4"}]],children:(d,u)=>{var v=mt(),b=nt(v);Tt(b,o,"default",{}),g(d,v)},$$slots:{default:!0}}))}function be(h,o){const n=It(o,["children","$$slots","$$events","$$legacy"]);Ft(h,zt({name:"refresh-cw"},()=>n,{iconNode:[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]],children:(d,u)=>{var v=mt(),b=nt(v);Tt(b,o,"default",{}),g(d,v)},$$slots:{default:!0}}))}function Ar(h,o){const n=It(o,["children","$$slots","$$events","$$legacy"]);Ft(h,zt({name:"triangle-alert"},()=>n,{iconNode:[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]],children:(d,u)=>{var v=mt(),b=nt(v);Tt(b,o,"default",{}),g(d,v)},$$slots:{default:!0}}))}const ke=(h,o)=>{const n=new Yt("landscape"),c="Plan Monitoring Report";n.setFontSize(12),n.text("MANUEL S. ENVERGA UNIVERSITY FOUNDATION",14,10),n.setFontSize(10),n.text("SY 2024-2025",14,20),n.setFontSize(14),n.text(c,14,15);const d=["Actions Taken","KPI","Evaluation","Statement","Status","Time Completed"],u=t(o).map(v=>[v.actions_taken,v.kpi,v.evaluation||"Pending Evaluation",v.statement||"Pending Statement",v.is_accomplished?"Achieved":"Not Achieved",v.time_completed?new Date(v.time_completed).toLocaleString():"N/A"]);oe(n,{head:[d],body:u,startY:25,theme:"grid",styles:{fontSize:10},headStyles:{fillColor:[41,128,185]}}),n.save("PlanMonitoring.pdf")},we=async(h,o,n)=>{p(o,!0);try{const c=await fetch("/api/summary-report-plan-monitoring",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plans:t(n)})}),d=await c.json();if(!c.ok||d.error)throw new Error(d.error||"Failed to generate summary.");const u=new Yt,v="Summary Report";u.setFont("times","normal"),u.setFontSize(12),u.text("MANUEL S. ENVERGA UNIVERSITY FOUNDATION",14,10),u.setFontSize(10),u.text("SY 2024-2025",14,20),u.setFontSize(14),u.text(v,14,15);const b=u.splitTextToSize(d.summaryReport,180);u.setFontSize(12),u.text(b,14,35),u.save("PlanMonitoringSummary.pdf")}catch(c){console.error("Error generating summary report:",c),alert("An error occurred while generating the summary report.")}finally{p(o,!1)}},Se=(h,o,n)=>{t(o)<t(n)&&Kt(o)},$e=(h,o)=>{t(o)>1&&Kt(o,-1)};var Ae=(h,o)=>p(o,!t(o)),Ne=(h,o,n,c,d)=>{p(o,G(t(n).value)),p(c,!1),d()},Re=f("<button> </button>"),Ee=f('<div class="absolute top-full left-0 mt-1 w-48 rounded-lg bg-white dark:bg-gray-800 shadow-lg border border-gray-200 dark:border-gray-700 z-10"></div>'),Me=f('<div class="flex items-center justify-center p-8"><!> <span class="ml-2 text-gray-600 dark:text-gray-400">Loading plans...</span></div>'),Ce=f('<tr class="hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"><td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-200"> </td><td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-200"> </td><td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-200"> </td><td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-200"> </td><td class="px-6 py-4"><span> </span></td><td class="px-6 py-4 text-sm text-gray-500 dark:text-gray-400"> </td></tr>'),Le=f('<div class="overflow-x-auto"><table class="w-full border-collapse"><thead><tr class="bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600"><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Action Plans</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">KPI</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Actions Taken to Achieve Action Plan</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Statement</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Status</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Completed</th></tr></thead><tbody class="divide-y divide-gray-200 dark:divide-gray-700"></tbody></table></div> <div class="flex items-center justify-between px-6 py-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600"><div class="text-sm text-gray-700 dark:text-gray-300"> </div> <div class="flex gap-2"><button class="p-2 rounded-lg bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"><!></button> <button class="p-2 rounded-lg bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"><!></button></div></div>',1),Pe=f('<div class="text-center p-8 text-gray-500 dark:text-gray-400">No plans found matching your criteria.</div>'),je=f('<div class="min-h-screen bg-gray-50 dark:bg-gray-900 p-4 md:p-8"><div class="max-w-7xl mx-auto"><h1 class="text-2xl md:text-3xl font-bold text-gray-800 dark:text-white mb-6">Plans Monitoring</h1> <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"><div class="flex flex-wrap gap-2 items-center"><div class="relative"><button class="px-4 py-2 rounded-lg text-sm font-medium bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center gap-2"> <!></button> <!></div> <input type="text" placeholder="Search plans..." class="flex-1 px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400"></div> <div class="flex gap-2 justify-end"><button class="px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700 transition-colors flex items-center gap-2"><!> Export PDF</button> <button class="px-4 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"><!> Generate Report</button></div></div> <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"><!></div></div></div>');function Nr(h,o){Dt(o,!0);let n=V(G([])),c=V(G([])),d=V("all"),u=V(!0),v=V(!1),b=V(""),Q=V(!1),A=V(1),E=10,N=Ut(()=>Math.ceil(t(c).length/E)),F=Ut(()=>t(c).slice((t(A)-1)*E,t(A)*E));const I=[{value:"all",label:"All Status",color:"bg-blue-600"},{value:"achieved",label:"Achieved",color:"bg-green-600"},{value:"not_achieved",label:"Not Achieved",color:"bg-red-600"}],rt=r=>{var s;return((s=I.find(l=>l.value===r))==null?void 0:s.label)||"All Status"},gt=async()=>{p(u,!0);try{const{data:r,error:s}=await dt.from("plan_monitoring").select(`
                id,
                action_plan_id,
                evaluation,
                statement,
                is_accomplished,
                time_completed,
                action_plans (actions_taken, kpi)
            `);if(s)throw s;p(n,G(r.map(l=>{var y,_;return{id:l.id,action_plan_id:l.action_plan_id,evaluation:l.evaluation,statement:l.statement,is_accomplished:l.is_accomplished,time_completed:l.time_completed,actions_taken:((y=l.action_plans)==null?void 0:y.actions_taken)||"No Actions Taken",kpi:((_=l.action_plans)==null?void 0:_.kpi)||"No KPI"}}))),et()}catch(r){console.error("Error fetching data:",r)}finally{p(u,!1)}},et=()=>{let r=t(n);if(t(d)==="achieved"?r=r.filter(s=>s.is_accomplished):t(d)==="not_achieved"&&(r=r.filter(s=>!s.is_accomplished)),t(b)){const s=t(b).toLowerCase();r=r.filter(l=>{var y,_,O;return((y=l.statement)==null?void 0:y.toLowerCase().includes(s))||((_=l.actions_taken)==null?void 0:_.toLowerCase().includes(s))||((O=l.kpi)==null?void 0:O.toLowerCase().includes(s))})}p(c,G(r)),p(A,1)};gt(),ee(()=>{et()});var lt=je(),vt=a(lt),ut=i(a(vt),2),P=a(ut),D=a(P),M=a(D);M.__click=[Ae,Q];var m=a(M);Y(()=>w(m,`${rt(t(d))??""} `));var x=i(m);ie(x,{class:"w-4 h-4"}),e(M);var C=i(M,2);J(C,()=>t(Q),r=>{var s=Ee();$t(s,21,()=>I,At,(l,y)=>{var _=Re();_.__click=[Ne,d,y,Q,et];var O=a(_,!0);e(_),Y(()=>{jt(_,`w-full px-4 py-2 text-left text-sm hover:bg-gray-50 dark:hover:bg-gray-700 first:rounded-t-lg last:rounded-b-lg ${(t(d)===t(y).value?"bg-gray-50 dark:bg-gray-700":"")??""}`),w(O,t(y).label)}),g(l,_)}),e(s),g(r,s)}),e(D);var k=i(D,2);Qt(k),e(P);var S=i(P,2),$=a(S);$.__click=[ke,c];var W=a($);se(W,{class:"w-4 h-4"}),ct(),e($);var L=i($,2);L.__click=[we,v,c];var R=a(L);J(R,()=>t(v),r=>{Lt(r,{class:"w-4 h-4 animate-spin"})},r=>{ce(r,{class:"w-4 h-4"})}),ct(),e(L),e(S),e(ut);var j=i(ut,2),H=a(j);J(H,()=>t(u),r=>{var s=Me(),l=a(s);Lt(l,{class:"w-6 h-6 animate-spin text-blue-600 dark:text-blue-400"}),ct(2),e(s),g(r,s)},r=>{var s=mt(),l=nt(s);J(l,()=>t(c).length>0,y=>{var _=Le(),O=nt(_),st=a(O),at=i(a(st));$t(at,21,()=>t(F),At,(Z,q)=>{var it=Ce(),yt=a(it),Ct=a(yt,!0);e(yt);var bt=i(yt),_t=a(bt,!0);e(bt);var B=i(bt),ft=a(B,!0);e(B);var xt=i(B),kt=a(xt,!0);e(xt);var wt=i(xt),ht=a(wt),Nt=a(ht,!0);e(ht),e(wt);var Rt=i(wt),Gt=a(Rt,!0);Y(()=>w(Gt,t(q).time_completed?new Date(t(q).time_completed).toLocaleString():"N/A")),e(Rt),e(it),Y(()=>{w(Ct,t(q).actions_taken),w(_t,t(q).kpi),w(ft,t(q).evaluation||"Pending"),w(kt,t(q).statement||"Pending"),jt(ht,`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(t(q).is_accomplished?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200")??""}`),w(Nt,t(q).is_accomplished?"Achieved":"Not Achieved")}),g(Z,it)}),e(at),e(st),e(O);var tt=i(O,2),z=a(tt),K=a(z);Y(()=>w(K,`Showing ${(t(A)-1)*E+1} to ${Math.min(t(A)*E,t(c).length)??""} of ${t(c).length??""} entries`)),e(z);var pt=i(z,2),ot=a(pt);ot.__click=[$e,A];var X=a(ot);ne(X,{class:"w-5 h-5"}),e(ot);var T=i(ot,2);T.__click=[Se,A,N];var U=a(T);de(U,{class:"w-5 h-5"}),e(T),e(pt),e(tt),Y(()=>{ot.disabled=t(A)===1,T.disabled=t(A)===t(N)}),g(y,_)},y=>{var _=Pe();g(y,_)},!0),g(r,s)}),e(j),e(vt),e(lt),Y(()=>L.disabled=t(v)),Bt(k,()=>t(b),r=>p(b,r)),g(h,lt),Ot()}qt(["click"]);var De=f('<div class="flex items-center justify-center p-8"><!> <span class="ml-2 text-gray-600 dark:text-gray-400">Loading risks...</span></div>'),Oe=f('<div class="p-4 bg-red-50 dark:bg-red-900 text-red-700 dark:text-red-200 rounded-lg"> </div>'),Fe=f('<tr class="hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"><td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-200"> </td><td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-200"> </td><td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-200"> </td><td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-200"> </td><td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-200"> </td><td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-200"> </td><td class="px-6 py-4"><span> </span></td></tr>'),Te=f('<div class="overflow-x-auto"><table class="w-full border-collapse"><thead><tr class="bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600"><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">RRN</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Risk Statement</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Likelihood Rating</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Severity</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Control Rating</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Monitoring Rating</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Status</th></tr></thead><tbody class="divide-y divide-gray-200 dark:divide-gray-700"></tbody></table></div>'),Ie=f('<div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"><!></div>');function Rr(h,o){Dt(o,!0);let n=V(G([])),c=V(!0),d=V(null);(async()=>{try{const{data:Q,error:A}=await dt.from("risk_monitoring").select(`
                id,
                risks (
                    rrn,
                    risk_statement
                ),
                likelihood_rating:likelihood_rating_id(name),
                severity:severity_id(name),
                control_rating:control_rating_id(name),
                monitoring_rating:monitoring_rating_id(status),
                is_achieved
            `);if(A)throw A;p(n,G(Q.map(E=>{var N,F,I,rt;return{id:E.id,rrn:E.risks.rrn,risk_statement:E.risks.risk_statement,likelihood_rating:((N=E.likelihood_rating)==null?void 0:N.name)||"Not Available",severity:((F=E.severity)==null?void 0:F.name)||"Not Available",control_rating:((I=E.control_rating)==null?void 0:I.name)||"Not Available",monitoring_rating:((rt=E.monitoring_rating)==null?void 0:rt.status)||"Not Available",is_achieved:E.is_achieved}})))}catch(Q){console.error("Error fetching risk monitoring data:",Q),p(d,"Failed to fetch risk monitoring data.")}finally{p(c,!1)}})();var v=Ie(),b=a(v);J(b,()=>t(c),Q=>{var A=De(),E=a(A);Lt(E,{class:"w-6 h-6 animate-spin text-blue-600 dark:text-blue-400"}),ct(2),e(A),g(Q,A)},Q=>{var A=mt(),E=nt(A);J(E,()=>t(d),N=>{var F=Oe(),I=a(F,!0);e(F),Y(()=>w(I,t(d))),g(N,F)},N=>{var F=Te(),I=a(F),rt=i(a(I));$t(rt,21,()=>t(n),At,(gt,et)=>{var lt=Fe(),vt=a(lt),ut=a(vt,!0);e(vt);var P=i(vt),D=a(P,!0);e(P);var M=i(P),m=a(M,!0);e(M);var x=i(M),C=a(x,!0);e(x);var k=i(x),S=a(k,!0);e(k);var $=i(k),W=a($,!0);e($);var L=i($),R=a(L),j=a(R,!0);e(R),e(L),e(lt),Y(()=>{w(ut,t(et).rrn),w(D,t(et).risk_statement),w(m,t(et).likelihood_rating),w(C,t(et).severity),w(S,t(et).control_rating),w(W,t(et).monitoring_rating),jt(R,`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(t(et).is_achieved?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200")??""}`),w(j,t(et).is_achieved?"Achieved":"Still mitigating")}),g(gt,lt)}),e(rt),e(I),e(F),g(N,F)},!0),g(Q,A)}),e(v),g(h,v),Ot()}const ze=(h,o)=>{const n=new Yt("landscape"),c="Opportunities Monitoring Report";n.setFontSize(12),n.text("MANUEL S. ENVERGA UNIVERSITY FOUNDATION",14,10),n.setFontSize(10),n.text("SY 2024-2025",14,20),n.setFontSize(14),n.text(c,14,30);const d=["Opportunity Statement","KPI","Planned Actions","Evaluation","Status","Achieved On"],u=t(o).map(v=>[v.opt_statement,v.kpi,v.planned_actions,v.evaluation||"Pending Evaluation",v.achieved?"Achieved":"Not Achieved",v.time_completed?new Date(v.time_completed).toLocaleString():"N/A"]);oe(n,{head:[d],body:u,startY:40,theme:"grid",styles:{fontSize:10},headStyles:{fillColor:[41,128,185]}}),n.save("OpportunitiesMonitoring.pdf")},Ge=async(h,o,n)=>{p(o,!0);try{const c=await fetch("/api/summary-report-opt-monitoring",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({opportunities:t(n)})}),d=await c.json();if(!c.ok||d.error)throw new Error(d.error||"Failed to generate summary.");const u=new Yt,v="Summary Report";u.setFont("times","normal"),u.setFontSize(12),u.text("MANUEL S. ENVERGA UNIVERSITY FOUNDATION",14,10),u.setFontSize(10),u.text("SY 2024-2025",14,20),u.setFontSize(14),u.text(v,14,15);const b=u.splitTextToSize(d.summaryReport,180);u.setFontSize(12),u.text(b,14,35),u.save("OpportunitiesSummary.pdf")}catch(c){console.error("Error generating summary report:",c),alert("An error occurred while generating the summary report.")}finally{p(o,!1)}},Ve=(h,o,n)=>{t(o)<t(n)&&Kt(o)},Ue=(h,o)=>{t(o)>1&&Kt(o,-1)};var qe=(h,o)=>p(o,!t(o)),Ke=(h,o,n,c,d)=>{p(o,G(t(n).value)),p(c,!1),d()},Ye=f("<button> </button>"),He=f('<div class="absolute top-full left-0 mt-1 w-48 rounded-lg bg-white dark:bg-gray-800 shadow-lg border border-gray-200 dark:border-gray-700 z-10"></div>'),Je=f('<div class="flex items-center justify-center p-8"><!> <span class="ml-2 text-gray-600 dark:text-gray-400">Loading opportunities...</span></div>'),Qe=f('<tr class="hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"><td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-200"> </td><td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-200"> </td><td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-200"> </td><td class="px-6 py-4 text-sm text-gray-900 dark:text-gray-200"> </td><td class="px-6 py-4"><span> </span></td><td class="px-6 py-4 text-sm text-gray-500 dark:text-gray-400"> </td></tr>'),Be=f('<div class="overflow-x-auto"><table class="w-full border-collapse"><thead><tr class="bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600"><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Statement</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">KPI</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Actions</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Evaluation</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Status</th><th class="px-6 py-4 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider">Completed</th></tr></thead><tbody class="divide-y divide-gray-200 dark:divide-gray-700"></tbody></table></div> <div class="flex items-center justify-between px-6 py-4 bg-gray-50 dark:bg-gray-700 border-t border-gray-200 dark:border-gray-600"><div class="text-sm text-gray-700 dark:text-gray-300"> </div> <div class="flex gap-2"><button class="p-2 rounded-lg bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"><!></button> <button class="p-2 rounded-lg bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700 disabled:opacity-50 disabled:cursor-not-allowed"><!></button></div></div>',1),We=f('<div class="text-center p-8 text-gray-500 dark:text-gray-400">No opportunities found matching your criteria.</div>'),Xe=f('<div class="min-h-screen bg-gray-50 dark:bg-gray-900 p-4 md:p-8"><div class="max-w-7xl mx-auto"><h1 class="text-2xl md:text-3xl font-bold text-gray-800 dark:text-white mb-6">Opportunities Monitoring</h1> <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6"><div class="flex flex-wrap gap-2 items-center"><div class="relative"><button class="px-4 py-2 rounded-lg text-sm font-medium bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center gap-2"> <!></button> <!></div> <input type="text" placeholder="Search opportunities..." class="flex-1 px-4 py-2 rounded-lg border border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400"></div> <div class="flex gap-2 justify-end"><button class="px-4 py-2 rounded-lg bg-green-600 text-white hover:bg-green-700 transition-colors flex items-center gap-2"><!> Export</button> <button class="px-4 py-2 rounded-lg bg-purple-600 text-white hover:bg-purple-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2"><!> Generate Report</button></div></div> <div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"><!></div></div></div>');function Er(h,o){Dt(o,!0);let n=V(G([])),c=V(G([])),d=V("all"),u=V(!0),v=V(!1),b=V(""),Q=V(!1),A=V(1),E=10,N=Ut(()=>Math.ceil(t(c).length/E)),F=Ut(()=>t(c).slice((t(A)-1)*E,t(A)*E));const I=[{value:"all",label:"All Status",color:"bg-blue-600"},{value:"achieved",label:"Achieved",color:"bg-green-600"},{value:"not_achieved",label:"Not Achieved",color:"bg-red-600"}],rt=r=>{var s;return((s=I.find(l=>l.value===r))==null?void 0:s.label)||"All Status"},gt=async()=>{p(u,!0);try{const{data:r,error:s}=await dt.from("opt_monitoring").select(`
                opt_id,
                opportunities (
                    opt_statement,
                    kpi,
                    planned_actions
                ),
                evaluation,
                is_accomplished,
                time_completed
            `);if(s){console.error("Error fetching opportunities:",s);return}r&&(p(n,G(r.map(l=>{var y,_,O;return{id:l.opt_id,opt_statement:((y=l.opportunities)==null?void 0:y.opt_statement)||"No Statement Available",kpi:((_=l.opportunities)==null?void 0:_.kpi)||"No KPI Available",planned_actions:((O=l.opportunities)==null?void 0:O.planned_actions)||"No Actions Available",evaluation:l.evaluation||"Pending Evaluation",achieved:l.is_accomplished||!1,time_completed:l.time_completed||null}}))),et())}catch(r){console.error("Unexpected error during data fetch:",r)}finally{p(u,!1)}},et=()=>{let r=t(n);if(t(d)==="achieved"?r=r.filter(s=>s.achieved):t(d)==="not_achieved"&&(r=r.filter(s=>!s.achieved)),t(b)){const s=t(b).toLowerCase();r=r.filter(l=>l.opt_statement.toLowerCase().includes(s)||l.kpi.toLowerCase().includes(s)||l.planned_actions.toLowerCase().includes(s))}p(c,G(r)),p(A,1)};gt(),ee(()=>{et()});var lt=Xe(),vt=a(lt),ut=i(a(vt),2),P=a(ut),D=a(P),M=a(D);M.__click=[qe,Q];var m=a(M);Y(()=>w(m,`${rt(t(d))??""} `));var x=i(m);ie(x,{class:"w-4 h-4"}),e(M);var C=i(M,2);J(C,()=>t(Q),r=>{var s=He();$t(s,21,()=>I,At,(l,y)=>{var _=Ye();_.__click=[Ke,d,y,Q,et];var O=a(_,!0);e(_),Y(()=>{jt(_,`w-full px-4 py-2 text-left text-sm hover:bg-gray-50 dark:hover:bg-gray-700 first:rounded-t-lg last:rounded-b-lg ${(t(d)===t(y).value?"bg-gray-50 dark:bg-gray-700":"")??""}`),w(O,t(y).label)}),g(l,_)}),e(s),g(r,s)}),e(D);var k=i(D,2);Qt(k),e(P);var S=i(P,2),$=a(S);$.__click=[ze,c];var W=a($);se(W,{class:"w-4 h-4"}),ct(),e($);var L=i($,2);L.__click=[Ge,v,c];var R=a(L);J(R,()=>t(v),r=>{Lt(r,{class:"w-4 h-4 animate-spin"})},r=>{ce(r,{class:"w-4 h-4"})}),ct(),e(L),e(S),e(ut);var j=i(ut,2),H=a(j);J(H,()=>t(u),r=>{var s=Je(),l=a(s);Lt(l,{class:"w-6 h-6 animate-spin text-blue-600 dark:text-blue-400"}),ct(2),e(s),g(r,s)},r=>{var s=mt(),l=nt(s);J(l,()=>t(c).length>0,y=>{var _=Be(),O=nt(_),st=a(O),at=i(a(st));$t(at,21,()=>t(F),At,(Z,q)=>{var it=Qe(),yt=a(it),Ct=a(yt,!0);e(yt);var bt=i(yt),_t=a(bt,!0);e(bt);var B=i(bt),ft=a(B,!0);e(B);var xt=i(B),kt=a(xt,!0);e(xt);var wt=i(xt),ht=a(wt),Nt=a(ht,!0);e(ht),e(wt);var Rt=i(wt),Gt=a(Rt,!0);Y(()=>w(Gt,t(q).time_completed?new Date(t(q).time_completed).toLocaleString():"N/A")),e(Rt),e(it),Y(()=>{w(Ct,t(q).opt_statement),w(_t,t(q).kpi),w(ft,t(q).planned_actions),w(kt,t(q).evaluation||"Pending"),jt(ht,`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${(t(q).achieved?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":"bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200")??""}`),w(Nt,t(q).achieved?"Achieved":"Not Achieved")}),g(Z,it)}),e(at),e(st),e(O);var tt=i(O,2),z=a(tt),K=a(z);Y(()=>w(K,`Showing ${(t(A)-1)*E+1} to ${Math.min(t(A)*E,t(c).length)??""} of ${t(c).length??""} entries`)),e(z);var pt=i(z,2),ot=a(pt);ot.__click=[Ue,A];var X=a(ot);ne(X,{class:"w-5 h-5"}),e(ot);var T=i(ot,2);T.__click=[Ve,A,N];var U=a(T);de(U,{class:"w-5 h-5"}),e(T),e(pt),e(tt),Y(()=>{ot.disabled=t(A)===1,T.disabled=t(A)===t(N)}),g(y,_)},y=>{var _=We();g(y,_)},!0),g(r,s)}),e(j),e(vt),e(lt),Y(()=>L.disabled=t(v)),Bt(k,()=>t(b),r=>p(b,r)),g(h,lt),Ot()}qt(["click"]);var Ze=f("<option> </option>"),ta=f("<option> </option>"),ea=f('<div class="mt-4 p-4 bg-gray-50 rounded-lg"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><div class="flex flex-col"><label for="status" class="text-sm font-medium text-gray-700 mb-1">Status</label> <select id="status" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"></select></div> <div class="flex flex-col"><label for="goal" class="text-sm font-medium text-gray-700 mb-1">Strategic Goal</label> <select id="goal" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md"></select></div></div></div>');function aa(h,o){let n=Zt(o,"selectedStatus",15,"all"),c=Zt(o,"selectedGoal",15,"all");const d=[{value:"all",label:"All Status"},{value:"achieved",label:"Achieved"},{value:"pending",label:"Pending"}];var u=ea(),v=a(u),b=a(v),Q=i(a(b),2);$t(Q,21,()=>d,At,(N,F)=>{var I=Ze(),rt={},gt=a(I,!0);e(I),Y(()=>{rt!==(rt=t(F).value)&&(I.value=(I.__value=t(F).value)==null?"":t(F).value),w(gt,t(F).label)}),g(N,I)}),e(Q),e(b);var A=i(b,2),E=i(a(A),2);$t(E,21,()=>o.uniqueGoals,At,(N,F)=>{var I=ta(),rt={},gt=a(I,!0);e(I),Y(()=>{rt!==(rt=t(F))&&(I.value=(I.__value=t(F))==null?"":t(F)),w(gt,t(F)==="all"?"All Goals":t(F))}),g(N,I)}),e(E),e(A),e(v),e(u),Vt(Q,n),Vt(E,c),g(h,u)}var ra=f('<div class="flex justify-center items-center h-64"><!></div>'),oa=(h,o)=>o("strategic_goal_name"),ia=(h,o,n,c)=>{p(o,t(o).map(d=>d.id===t(n).id?{...d,evaluation:h.target.value}:d)),c(h)},sa=f("<!> Achieved",1),na=f("<!> Pending",1),da=(h,o,n)=>o(t(n).statement||""),la=f('<button class="inline-flex items-center px-3 py-1 text-sm text-indigo-600 bg-indigo-100 hover:bg-indigo-200 rounded-md"><!> View</button>'),ca=(h,o,n)=>o(t(n).id,t(n).kpi,t(n).evaluation||""),ga=f('<button class="inline-flex items-center px-4 py-2 text-sm text-white bg-indigo-600 hover:bg-indigo-700 rounded-md disabled:opacity-50">Evaluate</button>'),va=f('<tr class="hover:bg-gray-50"><td class="px-4 py-4 text-sm text-gray-800 break-words"> </td><td class="px-4 py-4 text-sm text-gray-800 break-words"> </td><td class="px-4 py-4 text-sm text-gray-600 break-words"> </td><td class="px-4 py-4 text-sm text-gray-600 break-words"> </td><td class="px-4 py-4"><textarea class="w-full text-sm border rounded-md px-3 py-2 focus:outline-none focus:ring-1 focus:ring-indigo-500" placeholder="Enter evaluation..." style="resize: vertical; min-height: 60px;" rows="2"></textarea></td><td class="px-4 py-4"><span><!></span></td><td class="px-4 py-4 text-center"><div class="flex items-center justify-center gap-2"><!> <!></div></td></tr>'),pa=f('<div class="bg-white rounded-lg shadow"><table class="w-full"><thead class="bg-gray-50"><tr><th class="px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider cursor-pointer"><div class="flex items-center gap-2">Strategic Goal <!></div></th><th class="px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider">Objective</th><th class="px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider">Action Plans</th><th class="px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider">KPI</th><th class="px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider">Actions Taken</th><th class="px-4 py-3 text-left text-xs font-medium text-gray-600 uppercase tracking-wider">Status</th><th class="px-4 py-3 text-center text-xs font-medium text-gray-600 uppercase tracking-wider">Actions</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div>'),ua=f('<div class="text-center py-12 bg-white rounded-lg shadow"><p class="text-gray-500">No action plans found.</p></div>'),_a=(h,o)=>p(o,!1),xa=f('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 p-6"><h2 class="text-lg font-semibold text-gray-900 mb-4">Evaluation Statement</h2> <div class="bg-gray-50 rounded-lg p-4 text-gray-700 mb-6 max-h-[60vh] overflow-y-auto break-words"> </div> <button class="w-full inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 rounded-md">Close</button></div></div>'),ma=f('<div class="min-h-screen flex flex-col bg-gray-100"><header class="sticky top-0 z-40 bg-white border-b shadow-sm"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"><div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4"><h1 class="text-2xl font-medium text-gray-800">Plans Monitoring</h1> <div class="flex items-center gap-2"><div class="relative flex-1 sm:flex-none"><input type="search" placeholder="Search plans..." class="w-full sm:w-64 pl-3 pr-8 py-2 border rounded-md text-sm focus:outline-none focus:ring-1 focus:ring-indigo-500"> <span class="absolute right-2 top-2.5 text-gray-400">🔍</span></div></div></div> <div class="mt-4"><!></div></div></header> <main class="flex-1"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"><!></div></main> <!></div>');function Mr(h,o){Dt(o,!1);const n=Et(),c=Et();let d=Et([]),u=null,v=Et(!1),b=Et(""),Q=Et(!0),A=Et(""),E=Et("strategic_goal_name"),N=Et(!0),F=Et("all"),I=Et("all");function rt(r){t(E)===r?p(N,!t(N)):(p(E,r),p(N,!0))}function gt(r){p(b,r),p(v,!0)}const et=r=>{const s=r.target;s.style.height="auto",s.style.height=`${s.scrollHeight}px`},lt=async()=>{try{const{data:{session:r},error:s}=await dt.auth.getSession();if(s||!r)throw s;u=r.user.id}catch(r){console.error("Error fetching session:",r)}},vt=async r=>{try{const{data:s,error:l}=await dt.from("plan_monitoring").select("action_plan_id, is_accomplished, evaluation, statement, time_completed").in("action_plan_id",r);if(l)throw l;return s}catch(s){return console.error("Error fetching monitoring data:",s),[]}},ut=async()=>{try{const{data:r,error:s}=await dt.from("profiles").select("department_id").eq("id",u).single();if(s||!(r!=null&&r.department_id))throw s;const{data:l,error:y}=await dt.from("profiles").select("id").eq("department_id",r.department_id);if(y)throw y;const _=l.map(z=>z.id),{data:O,error:st}=await dt.from("action_plans").select(`
					id,
					actions_taken,
					kpi,
					objective_id,
					strategic_objectives (
						name,
						strategic_goals (name)
					),
					is_approved
				`).in("profile_id",_).eq("is_approved",!0);if(st)throw st;const at=O.map(z=>{var K,pt,ot;return{id:z.id,actions_taken:z.actions_taken,kpi:z.kpi,objective_id:z.objective_id,strategic_goal_name:((pt=(K=z.strategic_objectives)==null?void 0:K.strategic_goals)==null?void 0:pt.name)||"No Goal Assigned",objective_name:((ot=z.strategic_objectives)==null?void 0:ot.name)||"No Objective Assigned",is_accomplished:!1,evaluation:null,statement:null,time_completed:null,isLoading:!1}}),tt=await vt(at.map(z=>z.id));p(d,at.map(z=>{const K=tt.find(pt=>pt.action_plan_id===z.id);return{...z,is_accomplished:(K==null?void 0:K.is_accomplished)||!1,evaluation:(K==null?void 0:K.evaluation)||null,statement:(K==null?void 0:K.statement)||null,time_completed:(K==null?void 0:K.time_completed)||null}}))}catch(r){console.error("Error fetching action plans:",r)}finally{p(Q,!1)}},P=async(r,s,l)=>{p(d,t(d).map(y=>y.id===r?{...y,isLoading:!0}:y));try{const y=await fetch("/api/evaluate-goal",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({target,evaluation:l})}),_=await y.json();if(!y.ok||_.error)throw new Error(_.error||"Failed to evaluate action plan.");const O=_.aiEvaluation;if(typeof O!="string")throw new TypeError("AI evaluation response is not valid.");const at=!["not achieved","unsuccessful","failed","incomplete","fell short","below target","did not meet","not"].some(K=>O.toLowerCase().includes(K)),tt=at?new Date().toISOString():null,{error:z}=await dt.from("plan_monitoring").update({evaluation:l,statement:O,is_accomplished:at,time_completed:tt}).eq("action_plan_id",r);if(z)throw z;p(d,t(d).map(K=>K.id===r?{...K,is_accomplished:at,evaluation:l,statement:O,time_completed:tt,isLoading:!1}:K))}catch(y){console.error("Error evaluating action plan:",y),p(d,t(d).map(_=>_.id===r?{..._,isLoading:!1}:_))}};Wt(async()=>{await lt(),await ut()}),Xt(()=>t(d),()=>{p(n,["all",...new Set(t(d).map(r=>r.strategic_goal_name))])}),Xt(()=>(t(d),t(A),t(F),t(I),t(N),t(E)),()=>{p(c,t(d).filter(r=>{const s=r.strategic_goal_name.toLowerCase().includes(t(A).toLowerCase())||r.objective_name.toLowerCase().includes(t(A).toLowerCase())||r.actions_taken.toLowerCase().includes(t(A).toLowerCase()),l=t(F)==="all"?!0:t(F)==="achieved"?r.is_accomplished:!r.is_accomplished,y=t(I)==="all"||r.strategic_goal_name===t(I);return s&&l&&y}).sort((r,s)=>{const l=t(N)?1:-1;return r[t(E)]>s[t(E)]?l:-l}))}),ve(),pe();var D=ma(),M=a(D),m=a(M),x=a(m),C=i(a(x),2),k=a(C),S=a(k);Qt(S),ct(2),e(k),e(C),e(x);var $=i(x,2),W=a($);aa(W,{get uniqueGoals(){return t(n)},get selectedStatus(){return t(F)},set selectedStatus(r){p(F,r)},get selectedGoal(){return t(I)},set selectedGoal(r){p(I,r)},$$legacy:!0}),e($),e(m),e(M);var L=i(M,2),R=a(L),j=a(R);J(j,()=>t(Q),r=>{var s=ra(),l=a(s);Lt(l,{class:"animate-spin h-10 w-10 text-indigo-500"}),e(s),g(r,s)},r=>{var s=mt(),l=nt(s);J(l,()=>t(c).length>0,y=>{var _=pa(),O=a(_),st=a(O),at=a(st),tt=a(at);tt.__click=[oa,rt];var z=a(tt),K=i(a(z));ue(K,{class:"h-4 w-4"}),e(z),e(tt),ct(6),e(at),e(st);var pt=i(st);$t(pt,5,()=>t(c),At,(ot,X)=>{var T=va(),U=a(T),Z=a(U,!0);e(U);var q=i(U),it=a(q,!0);e(q);var yt=i(q),Ct=a(yt,!0);e(yt);var bt=i(yt),_t=a(bt,!0);e(bt);var B=i(bt),ft=a(B);ae(ft),ft.__input=[ia,d,X,et],e(B);var xt=i(B),kt=a(xt),wt=a(kt);J(wt,()=>t(X).is_accomplished,Mt=>{var St=sa(),Pt=nt(St);_e(Pt,{class:"w-4 h-4 mr-1"}),ct(),g(Mt,St)},Mt=>{var St=na(),Pt=nt(St);xe(Pt,{class:"w-4 h-4 mr-1"}),ct(),g(Mt,St)}),e(kt),e(xt);var ht=i(xt),Nt=a(ht),Rt=a(Nt);J(Rt,()=>t(X).statement,Mt=>{var St=la();St.__click=[da,gt,X];var Pt=a(St);le(Pt,{class:"w-4 h-4 mr-1"}),ct(),e(St),g(Mt,St)});var Gt=i(Rt,2);J(Gt,()=>t(X).isLoading,Mt=>{Lt(Mt,{class:"animate-spin h-5 w-5 text-indigo-500"})},Mt=>{var St=mt(),Pt=nt(St);J(Pt,()=>!t(X).is_accomplished,ge=>{var Ht=ga();Ht.__click=[ca,P,X],Y(()=>Ht.disabled=!t(X).evaluation||t(X).isLoading),g(ge,Ht)},null,!0),g(Mt,St)}),e(Nt),e(ht),e(T),Y(()=>{w(Z,t(X).strategic_goal_name),w(it,t(X).objective_name),w(Ct,t(X).actions_taken),w(_t,t(X).kpi),re(ft,t(X).evaluation),ft.disabled=t(X).is_accomplished,jt(kt,`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${t(X).is_accomplished?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`)}),g(ot,T)}),e(pt),e(O),e(_),g(y,_)},y=>{var _=ua();g(y,_)},!0),g(r,s)}),e(R),e(L);var H=i(L,2);J(H,()=>t(v),r=>{var s=xa(),l=a(s),y=i(a(l),2),_=a(y,!0);e(y);var O=i(y,2);O.__click=[_a,v],e(l),e(s),Y(()=>w(_,t(b))),g(r,s)}),e(D),Bt(S,()=>t(A),r=>p(A,r)),g(h,D),Ot()}qt(["click","input"]);const te=(h,o)=>{o()},ya=async(h,o,n,c,d)=>{var u;try{const{error:v}=await dt.from("risk_monitoring").update({likelihood_rating_id:t(o).likelihoodRating,severity_id:t(o).severity,control_rating_id:t(o).riskControlRating,monitoring_rating_id:t(o).riskMonitoringRating}).eq("id",(u=t(n))==null?void 0:u.id);if(v)throw v;p(c,!1),p(n,null),await d()}catch(v){console.error("Failed to save risk assessment:",v)}};var fa=f('<div class="flex items-center justify-center p-8"><!> <span class="ml-2 text-gray-600 dark:text-gray-400">Loading risks...</span></div>'),ha=f('<div class="p-4 bg-red-50 dark:bg-red-900 text-red-700 dark:text-red-200 rounded-lg"> </div>'),ba=(h,o,n)=>o(t(n)),ka=f('<tr><td class="px-6 py-4"> </td><td class="px-6 py-4"> </td><td class="px-6 py-4"> </td><td class="px-6 py-4"> </td><td class="px-6 py-4"> </td><td class="px-6 py-4"> </td><td class="px-6 py-4"><button class="text-blue-600 text-sm">Add Re-Assessment</button></td></tr>'),wa=f('<div class="overflow-x-auto"><table class="w-full border-collapse"><thead><tr class="bg-gray-50 dark:bg-gray-700 border-b border-gray-200 dark:border-gray-600"><th class="px-6 py-4">RRN</th><th class="px-6 py-4">Risk Statement</th><th class="px-6 py-4">Likelihood Rating</th><th class="px-6 py-4">Severity</th><th class="px-6 py-4">Control Rating</th><th class="px-6 py-4">Monitoring Rating</th><th class="px-6 py-4">Actions</th></tr></thead><tbody></tbody></table></div>'),Sa=f("<option> </option>"),$a=f("<option> </option>"),Aa=f('<p class="text-sm text-gray-800 dark:text-gray-200"> </p>'),Na=f('<p class="text-sm text-gray-500 dark:text-gray-400">Select Likelihood and Severity first</p>'),Ra=f("<option> </option>"),Ea=f('<div class="fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50"><div class="bg-white dark:bg-gray-800 rounded-lg shadow-lg max-w-md w-full"><div class="flex justify-between items-center p-4 border-b border-gray-300 dark:border-gray-700"><h3 class="text-lg font-semibold text-gray-900 dark:text-white">Edit Risk Assessment</h3> <button class="text-gray-400 hover:text-gray-500 dark:hover:text-gray-300"><!></button></div> <div class="p-6 space-y-4"><div><h4 class="text-sm font-medium text-gray-600 dark:text-gray-300">Risk Statement</h4> <p class="text-sm text-gray-800 dark:text-gray-100"> </p></div> <div><label class="block text-sm font-medium text-gray-600 dark:text-gray-300">Likelihood Rating</label> <select class="block w-full mt-1 rounded-lg border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 dark:text-gray-200"><option>Select Likelihood</option><!></select></div> <div><label class="block text-sm font-medium text-gray-600 dark:text-gray-300">Severity</label> <select class="block w-full mt-1 rounded-lg border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-sm focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 dark:text-gray-200"><option>Select Severity</option><!></select></div> <div><label class="block text-sm font-medium text-gray-600 dark:text-gray-300">Control Rating</label> <div class="mt-1 p-2 bg-gray-50 dark:bg-gray-700 rounded-lg"><!></div></div> <div><label class="block text-sm font-medium text-gray-600 dark:text-gray-300">Monitoring Rating</label> <select class="block w-full mt-1 rounded-lg"><option>Select Monitoring Rating</option><!></select></div></div> <div class="p-4 flex justify-end space-x-2 border-t border-gray-300 dark:border-gray-700"><button class="px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700 rounded-lg">Cancel</button> <button class="px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 disabled:opacity-50 disabled:cursor-not-allowed">Save Changes</button></div></div></div>'),Ma=f('<div class="bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"><!> <!></div>');function Cr(h,o){Dt(o,!0);let n=V(G([])),c=V(!0),d=V(null),u=V(!1),v=V(null),b=V(G([])),Q=V(G([])),A=V(G([])),E=V(G([])),N=V(G({likelihoodRating:null,severity:null,riskControlRating:null,riskMonitoringRating:null}));const F=async()=>{try{const{data:P,error:D}=await dt.from("risk_monitoring").select(`
                id,
                risks (
                    rrn,
                    risk_statement
                ),
                likelihood_rating:likelihood_rating_id(name),
                severity:severity_id(name),
                control_rating:control_rating_id(name),
                monitoring_rating:monitoring_rating_id(status),
                is_achieved
            `);if(D)throw D;p(n,G(P.map(M=>{var m,x,C,k;return{id:M.id,rrn:M.risks.rrn,risk_statement:M.risks.risk_statement,likelihood_rating:((m=M.likelihood_rating)==null?void 0:m.name)||"Not Available",severity:((x=M.severity)==null?void 0:x.name)||"Not Available",control_rating:((C=M.control_rating)==null?void 0:C.name)||"Not Available",monitoring_rating:((k=M.monitoring_rating)==null?void 0:k.status)||"Not Available",is_achieved:M.is_achieved}})))}catch(P){console.error("Error fetching risk monitoring data:",P),p(d,"Failed to fetch risk monitoring data.")}finally{p(c,!1)}},I=async()=>{try{const[P,D,M,m]=await Promise.all([dt.from("likelihood_rating").select("*"),dt.from("severity").select("*"),dt.from("risk_control_rating").select("*"),dt.from("risk_monitoring_rating").select("*")]);if(P.error||D.error||M.error||m.error)throw new Error("Failed to fetch dropdown options");p(b,G(P.data)),p(Q,G(D.data)),p(A,G(M.data)),p(E,G(m.data))}catch(P){console.error("Error fetching dropdown options:",P)}},rt=P=>{var D,M,m,x;p(v,G(P)),p(N,G({likelihoodRating:((D=t(b).find(C=>C.name===P.likelihood_rating))==null?void 0:D.id)||null,severity:((M=t(Q).find(C=>C.name===P.severity))==null?void 0:M.id)||null,riskControlRating:((m=t(A).find(C=>C.name===P.control_rating))==null?void 0:m.id)||null,riskMonitoringRating:((x=t(E).find(C=>C.status===P.monitoring_rating))==null?void 0:x.id)||null})),t(N).riskControlRating,p(u,!0)},gt=()=>{var M,m,x,C,k;if(!t(N).likelihoodRating||!t(N).severity)return;const P=(M=t(b).find(S=>S.id===t(N).likelihoodRating))==null?void 0:M.symbol,D=(m=t(Q).find(S=>S.id===t(N).severity))==null?void 0:m.value;if(P&&D){const{controlRating:S}=me(P,D),$=t(A).find(L=>L.symbol===S),W=($==null?void 0:$.id)||null;if(W&&t(N).riskControlRating!==W&&(t(N).riskControlRating=W),W){const L=($==null?void 0:$.value)||0,R=t(E).find(j=>j.id===t(N).riskMonitoringRating);if(R){const j=R.value;let H=null;L>j?H=(x=t(E).find(r=>r.status==="Grading Increased"))==null?void 0:x.id:L<j?H=(C=t(E).find(r=>r.status==="Grading Decreased"))==null?void 0:C.id:H=(k=t(E).find(r=>r.status==="No Change to Grade"))==null?void 0:k.id,H&&t(N).riskMonitoringRating!==H&&(t(N).riskMonitoringRating=H)}}}},et=()=>{p(u,!1),p(v,null)};Wt(()=>{F(),I()});var lt=Ma(),vt=a(lt);J(vt,()=>t(c),P=>{var D=fa(),M=a(D);Lt(M,{class:"w-6 h-6 animate-spin text-blue-600 dark:text-blue-400"}),ct(2),e(D),g(P,D)},P=>{var D=mt(),M=nt(D);J(M,()=>t(d),m=>{var x=ha(),C=a(x,!0);e(x),Y(()=>w(C,t(d))),g(m,x)},m=>{var x=wa(),C=a(x),k=i(a(C));$t(k,21,()=>t(n),At,(S,$)=>{var W=ka(),L=a(W),R=a(L,!0);e(L);var j=i(L),H=a(j,!0);e(j);var r=i(j),s=a(r,!0);e(r);var l=i(r),y=a(l,!0);e(l);var _=i(l),O=a(_,!0);e(_);var st=i(_),at=a(st,!0);e(st);var tt=i(st),z=a(tt);z.__click=[ba,rt,$],e(tt),e(W),Y(()=>{w(R,t($).rrn),w(H,t($).risk_statement),w(s,t($).likelihood_rating),w(y,t($).severity),w(O,t($).control_rating),w(at,t($).monitoring_rating)}),g(S,W)}),e(k),e(C),e(x),g(m,x)},!0),g(P,D)});var ut=i(vt,2);J(ut,()=>t(u),P=>{var D=Ea(),M=a(D),m=a(M),x=i(a(m),2);x.__click=et;var C=a(x);Jt(C,{class:"w-5 h-5"}),e(x),e(m);var k=i(m,2),S=a(k),$=i(a(S),2),W=a($,!0);e($),e(S);var L=i(S,2),R=i(a(L),2);R.__change=[te,gt];var j=a(R);j.value=(j.__value=null)==null?"":null;var H=i(j);$t(H,17,()=>t(b),At,(T,U)=>{var Z=Sa(),q={},it=a(Z,!0);e(Z),Y(()=>{q!==(q=t(U).id)&&(Z.value=(Z.__value=t(U).id)==null?"":t(U).id),w(it,t(U).name)}),g(T,Z)}),e(R),e(L);var r=i(L,2),s=i(a(r),2);s.__change=[te,gt];var l=a(s);l.value=(l.__value=null)==null?"":null;var y=i(l);$t(y,17,()=>t(Q),At,(T,U)=>{var Z=$a(),q={},it=a(Z,!0);e(Z),Y(()=>{q!==(q=t(U).id)&&(Z.value=(Z.__value=t(U).id)==null?"":t(U).id),w(it,t(U).name)}),g(T,Z)}),e(s),e(r);var _=i(r,2),O=i(a(_),2),st=a(O);J(st,()=>t(N).riskControlRating,T=>{var U=Aa();const Z=Ut(()=>t(A).find(it=>it.id===t(N).riskControlRating));var q=a(U,!0);e(U),Y(()=>{var it;return w(q,((it=t(Z))==null?void 0:it.name)||"Not Available")}),g(T,U)},T=>{var U=Na();g(T,U)}),e(O),e(_);var at=i(_,2),tt=i(a(at),2),z=a(tt);z.value=(z.__value=null)==null?"":null;var K=i(z);$t(K,17,()=>t(E),At,(T,U)=>{var Z=Ra(),q={},it=a(Z);e(Z),Y(()=>{q!==(q=t(U).id)&&(Z.value=(Z.__value=t(U).id)==null?"":t(U).id),w(it,`${t(U).value??""} - ${t(U).status??""}`)}),g(T,Z)}),e(tt),e(at),e(k);var pt=i(k,2),ot=a(pt);ot.__click=et;var X=i(ot,2);X.__click=[ya,N,v,u,F],e(pt),e(M),e(D),Y(()=>{var T;return w(W,(T=t(v))==null?void 0:T.risk_statement)}),Vt(R,()=>t(N).likelihoodRating,T=>t(N).likelihoodRating=T),Vt(s,()=>t(N).severity,T=>t(N).severity=T),Vt(tt,()=>t(N).riskMonitoringRating,T=>t(N).riskMonitoringRating=T),g(P,D)}),e(lt),g(h,lt),Ot()}qt(["click","change"]);async function Ca(h,o){const n=t(o).map(c=>({opt_statement:c.statement,kpi:c.goal,achieved:c.achieved==="Achieved",evaluation:c.evaluation}));try{const c=await fetch("/api/generate-summary",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({monitoringData:n})}),d=await c.json();if(!c.ok||d.error)throw new Error(d.error||"Failed to generate summary.")}catch(c){console.error("Error generating summary:",c)}}var La=f('<div class="flex items-center justify-center p-8"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"></div> <span class="ml-3 text-gray-600">Loading opportunities...</span></div>'),Pa=f('<div class="text-center py-12 bg-white rounded-lg shadow"><!> <h3 class="mt-2 text-lg font-medium text-gray-900">No opportunities found</h3> <p class="mt-1 text-sm text-gray-500">No opportunities have been added to your monitoring list yet.</p></div>'),ja=(h,o,n)=>o(n(),"evaluation",h.target.value),Da=f('<div class="animate-spin rounded-full h-4 w-4 border-b-2 border-current"></div>'),Oa=f("<!> Achieved",1),Fa=f("<!> Not Achieved",1),Ta=f("<!> Pending",1),Ia=f('<div class="text-xs text-gray-500 mt-1"> </div>'),za=(h,o,n,c,d)=>o(n(),c(),d()),Ga=f('<button class="inline-flex items-center px-3 py-1 bg-green-600 text-white text-xs font-medium rounded hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors">Evaluate</button>'),Va=(h,o,n)=>o(n()),Ua=f('<button class="inline-flex items-center px-3 py-1 border border-gray-300 text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors"><!> View</button>'),qa=f('<tr><td class="px-6 py-4 whitespace-normal text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-normal text-sm text-gray-500"> </td><td class="px-6 py-4"><textarea class="w-full min-h-[80px] px-3 py-2 text-sm border rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 disabled:bg-gray-100" placeholder="Enter your evaluation..."></textarea></td><td class="px-6 py-4 whitespace-nowrap"><span><!></span> <!></td><td class="px-6 py-4 whitespace-nowrap text-sm"><div class="flex space-x-2"><!> <!></div></td></tr>'),Ka=f('<div class="bg-white shadow-lg rounded-lg overflow-hidden"><div class="overflow-x-auto"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Statement</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Target (KPI)</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions Taken</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th><th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div></div>'),Ya=(h,o)=>p(o,!1),Ha=(h,o)=>p(o,!1),Ja=f('<div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50"><div class="bg-white rounded-lg shadow-xl max-w-lg w-full p-6"><div class="flex justify-between items-center mb-4"><h3 class="text-lg font-medium text-gray-900">AI Evaluation Statement</h3> <button class="text-gray-400 hover:text-gray-500 focus:outline-none"><!></button></div> <div class="mt-2"><p class="text-sm text-gray-500 whitespace-pre-wrap"> </p></div> <div class="mt-6"><button class="w-full inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">Close</button></div></div></div>'),Qa=f('<div class="min-h-screen bg-gray-50"><header class="bg-white shadow-sm border-b"><div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"><div class="flex justify-between items-center"><h1 class="text-2xl font-semibold text-gray-900">Mid-Year Opportunity Monitoring</h1> <button class="inline-flex items-center px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 transition-colors"><!> Evaluate All</button></div></div></header> <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"><!></main> <!></div>');function Lr(h,o){Dt(o,!0);let n=V(G([])),c=V(null),d=V(!1),u=V(!1),v=V(""),b=V(G([]));function Q(m){p(v,G(m)),p(u,!0)}const A=async()=>{const{data:{session:m},error:x}=await dt.auth.getSession();if(x||!m){console.error("Error fetching session:",x);return}const{user:C}=m,{data:k,error:S}=await dt.from("profiles").select("id").eq("id",C.id).single();if(S||!k){console.error("Error fetching profile:",S);return}p(c,G(k.id))},E=async()=>{p(d,!0);try{const{data:m,error:x}=await dt.from("profiles").select("department_id").eq("id",t(c)).single();if(x||!(m!=null&&m.department_id)){console.error("Error fetching user profile or department:",x);return}const C=m.department_id,{data:k,error:S}=await dt.from("profiles").select("id").eq("department_id",C);if(S){console.error("Error fetching profile IDs:",S);return}const $=k.map(R=>R.id),{data:W,error:L}=await dt.from("opt_monitoring").select(`
                    opt_id,
                    time_completed,
                    evaluation,
                    statement,
                    opportunities (opt_statement, kpi, planned_actions)
                `).in("profile_id",$);if(L){console.error("Error fetching opportunities:",L);return}p(n,G(W.map(R=>{var j,H,r;return{opt_id:R.opt_id,opt_statement:((j=R.opportunities)==null?void 0:j.opt_statement)||"No Statement",kpi:((H=R.opportunities)==null?void 0:H.kpi)||"No KPI",planned_actions:((r=R.opportunities)==null?void 0:r.planned_actions)||"No Actions Taken",time_completed:R.time_completed,evaluation:R.evaluation||"",statement:R.statement||null}}))),p(b,G(t(n).map(R=>({id:R.opt_id,statement:R.opt_statement,goal:R.kpi,evaluation:R.evaluation||"",achieved:R.time_completed?"Achieved":null,isLoading:!1,timeCompleted:R.time_completed,aiStatement:R.statement||null}))))}catch(m){console.error("Error fetching opportunities:",m)}finally{p(d,!1)}};async function N(m,x,C){p(b,G(t(b).map(k=>k.id===m?{...k,isLoading:!0}:k)));try{const k=await fetch("/api/evaluate-goal",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({target:x,evaluation:C})}),S=await k.json();if(!k.ok||S.error)throw new Error(S.error||"Failed to evaluate goal.");const $=S.aiEvaluation;if(typeof $!="string")throw new TypeError("AI evaluation response is not a valid string.");const L=!["not achieved","unsuccessful","failed","incomplete","fell short","below target","did not meet","not","not been achieved"].some(H=>$.toLowerCase().includes(H)),R=L?new Date().toISOString():null,{error:j}=await dt.from("opt_monitoring").update({time_completed:R,evaluation:C,statement:$,is_accomplished:L}).eq("opt_id",m);j?console.error("[ERROR] Error updating opt_monitoring:",j):p(b,G(t(b).map(H=>H.id===m?{...H,achieved:L?"Achieved":"Not Achieved",isLoading:!1,timeCompleted:R,aiStatement:$}:H)))}catch(k){console.error("[ERROR] Error evaluating goal:",k),p(b,G(t(b).map(S=>S.id===m?{...S,isLoading:!1}:S)))}}function F(m,x,C){p(b,G(t(b).map(k=>k.id===m?{...k,[x]:C}:k)))}function I(m){const x=m.target;x.style.height="auto",x.style.width="auto",x.style.height=`${x.scrollHeight}px`,x.style.width=`${x.scrollWidth+20}px`}Wt(async()=>{await A(),await E()});var rt=Qa(),gt=a(rt),et=a(gt),lt=a(et),vt=i(a(lt),2);vt.__click=[Ca,b];var ut=a(vt);be(ut,{class:"w-4 h-4 mr-2"}),ct(),e(vt),e(lt),e(et),e(gt);var P=i(gt,2),D=a(P);J(D,()=>t(d),m=>{var x=La();g(m,x)},m=>{var x=mt(),C=nt(x);J(C,()=>t(b).length===0,k=>{var S=Pa(),$=a(S);ye($,{class:"mx-auto h-12 w-12 text-gray-400"}),ct(4),e(S),g(k,S)},k=>{var S=Ka(),$=a(S),W=a($),L=i(a(W));$t(L,21,()=>t(b),At,(R,j)=>{let H=()=>t(j).id,r=()=>t(j).statement,s=()=>t(j).goal,l=()=>t(j).evaluation,y=()=>t(j).achieved,_=()=>t(j).isLoading,O=()=>t(j).timeCompleted,st=()=>t(j).aiStatement;var at=qa(),tt=a(at),z=a(tt,!0);e(tt);var K=i(tt),pt=a(K,!0);e(K);var ot=i(K),X=a(ot);ae(X),X.__change=[ja,F,H],X.__input=I,e(ot);var T=i(ot),U=a(T),Z=a(U);J(Z,_,_t=>{var B=Da();g(_t,B)},_t=>{var B=mt(),ft=nt(B);J(ft,()=>y()==="Achieved",xt=>{var kt=Oa(),wt=nt(kt);fe(wt,{class:"w-4 h-4 mr-1"}),ct(),g(xt,kt)},xt=>{var kt=mt(),wt=nt(kt);J(wt,()=>y()==="Not Achieved",ht=>{var Nt=Fa(),Rt=nt(Nt);Jt(Rt,{class:"w-4 h-4 mr-1"}),ct(),g(ht,Nt)},ht=>{var Nt=Ta(),Rt=nt(Nt);he(Rt,{class:"w-4 h-4 mr-1"}),ct(),g(ht,Nt)},!0),g(xt,kt)},!0),g(_t,B)}),e(U);var q=i(U,2);J(q,O,_t=>{var B=Ia(),ft=a(B,!0);Y(()=>w(ft,new Date(O()).toLocaleDateString())),e(B),g(_t,B)}),e(T);var it=i(T),yt=a(it),Ct=a(yt);J(Ct,()=>!y(),_t=>{var B=Ga();B.__click=[za,N,H,s,l],Y(()=>B.disabled=!l()||_()),g(_t,B)});var bt=i(Ct,2);J(bt,st,_t=>{var B=Ua();B.__click=[Va,Q,st];var ft=a(B);le(ft,{class:"w-4 h-4 mr-1"}),ct(),e(B),g(_t,B)}),e(yt),e(it),e(at),Y(()=>{w(z,r()),w(pt,s()),re(X,l()),X.disabled=y()==="Achieved",jt(U,`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium
                                            ${y()==="Achieved"?"bg-green-100 text-green-800":y()==="Not Achieved"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`)}),g(R,at)}),e(L),e(W),e($),e(S),g(k,S)},!0),g(m,x)}),e(P);var M=i(P,2);J(M,()=>t(u),m=>{var x=Ja(),C=a(x),k=a(C),S=i(a(k),2);S.__click=[Ya,u];var $=a(S);Jt($,{class:"w-5 h-5"}),e(S),e(k);var W=i(k,2),L=a(W),R=a(L,!0);e(L),e(W);var j=i(W,2),H=a(j);H.__click=[Ha,u],e(j),e(C),e(x),Y(()=>w(R,t(v))),g(m,x)}),e(rt),g(h,rt),Ot()}qt(["click","change","input"]);export{Nr as A,Sr as C,Mr as D,$r as L,Ar as T,Rr as a,Er as b,Cr as c,Lr as d};
