import"../chunks/disclose-version.Bg9kRutz.js";import{p as Z,l as ee,d as te,t as _,a as ae,s as o,g as e,b as i,m as p,c as a,r as s,n as K,i as se}from"../chunks/utils.Cx6K9qTo.js";import{d as re,a as b,t as x,b as E}from"../chunks/store.BALTJZ26.js";import{i as A}from"../chunks/if.Bgpzl8Wa.js";import{e as ie,i as le,s as oe}from"../chunks/attributes.rzeD2olC.js";import{t as k}from"../chunks/class.DKwifj_X.js";import{b as ne}from"../chunks/select.BtlRD387.js";import{i as de}from"../chunks/lifecycle.D0tpf3vC.js";import{o as ce}from"../chunks/index-client.lWLCSZVk.js";import{s as B}from"../chunks/Icon.Nl6wOSVO.js";import{T as ve}from"../chunks/target.DTwNHqoR.js";import{P as ge}from"../chunks/plus.Dop3u5ke.js";import{a as ue,C as pe}from"../chunks/circle-check.DrQe913-.js";const fe=(D,j,f,h)=>{e(j)?i(f,1):i(h,"Please select a strategic goal first.")};var me=x('<div class="flex items-center gap-2 p-4 bg-green-100 text-green-700 rounded-lg mb-4"><!> <span> </span></div>'),_e=x('<div class="flex items-center gap-2 p-4 bg-red-100 text-red-700 rounded-lg mb-4"><!> <span> </span></div>'),be=x("<option> </option>"),xe=x('<div class="space-y-4"><label for="strategic_goal" class="block text-sm font-medium text-gray-700 dark:text-gray-300">Select Strategic Goal</label> <select id="strategic_goal" class="w-full px-4 py-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500"><option>Select a goal</option><!></select> <button class="w-full flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"><!> Continue to Add Objectives</button></div>'),he=x('<div class="min-h-screen bg-gray-50 dark:bg-gray-900 p-4 md:p-8"><div class="max-w-4xl mx-auto space-y-6"><div class="flex items-center justify-between bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm"><div><h1 class="text-2xl font-bold text-gray-900 dark:text-white">Create Strategic Objectives</h1> <p class="text-gray-600 dark:text-gray-400 mt-1">Define and manage your strategic objectives</p></div> <!></div> <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-sm"><div class="flex items-center justify-between mb-8"><div class="flex-1"><div class="relative"><div class="h-2 bg-gray-200 rounded"><div class="h-2 bg-blue-500 rounded transition-all duration-300"></div></div> <div class="flex justify-between absolute -top-3 w-full"><span class="w-8 h-8 flex items-center justify-center bg-blue-500 rounded-full text-white text-sm">1</span> <span class="w-8 h-8 flex items-center justify-center rounded-full text-sm">2</span></div></div> <div class="flex justify-between mt-4"><span class="text-sm font-medium text-gray-600">Select Goal</span> <span class="text-sm font-medium text-gray-600">Add Objectives</span></div></div></div> <!> <!> <!></div></div></div>');function Be(D,j){Z(j,!1);let f=null,h=p(null),S=p([]),g=p(null),d=p(0),u=p(null),c=p(null);const L=async()=>{try{const{data:r,error:t}=await B.auth.getSession();if(t)throw t;if(f=r.session,f){const{user:l}=f,{data:n,error:v}=await B.from("profiles").select("id").eq("id",l.id).single();if(v)throw v;i(h,n)}}catch(r){i(c,`Error fetching profile: ${r.message}`)}finally{}},N=async()=>{try{const{data:r,error:t}=await B.from("strategic_goals").select("id, name");if(t)throw t;i(S,r||[])}catch{i(c,"Failed to fetch strategic goals.")}},Q=()=>{i(d,0)};ce(()=>{L(),N()}),ee(()=>(e(u),e(c)),()=>{if(e(u)||e(c)){const r=setTimeout(()=>{i(u,null),i(c,null)},5e3);clearTimeout(r)}}),te(),de();var G=he(),F=a(G),C=a(F),R=o(a(C),2);ve(R,{class:"w-8 h-8 text-blue-500"}),s(C);var $=o(C,2),M=a($),q=a(M),U=a(q),O=a(U),V=a(O);s(O);var z=o(O,2),y=o(a(z),2);s(z),s(U),K(2),s(q),s(M);var H=o(M,2);A(H,()=>e(u),r=>{var t=me(),l=a(t);ue(l,{class:"w-5 h-5"});var n=o(l,2),v=a(n,!0);s(n),s(t),_(()=>E(v,e(u))),b(r,t)});var I=o(H,2);A(I,()=>e(c),r=>{var t=_e(),l=a(t);pe(l,{class:"w-5 h-5"});var n=o(l,2),v=a(n,!0);s(n),s(t),_(()=>E(v,e(c))),b(r,t)});var W=o(I,2);A(W,()=>e(d)===0,r=>{var t=xe(),l=o(a(t),2);_(()=>{e(g),se(()=>{e(S)})});var n=a(l);n.value=(n.__value=null)==null?"":null;var v=o(n);ie(v,1,()=>e(S),le,(T,w)=>{var m=be(),J={},Y=a(m,!0);s(m),_(()=>{J!==(J=e(w).id)&&(m.value=(m.__value=e(w).id)==null?"":e(w).id),E(Y,e(w).name)}),b(T,m)}),s(l);var P=o(l,2);P.__click=[fe,g,d,c];var X=a(P);ge(X,{class:"w-5 h-5"}),K(),s(P),s(t),ne(l,()=>e(g),T=>i(g,T)),b(r,t)},r=>{ObjectiveForm(r,{get selectedGoal(){return e(g)},get profile(){return e(h)},onBack:Q,onSuccess:t=>{i(u,t),i(d,0),i(g,null)},onError:t=>i(c,t)})}),s($),s(F),s(G),_(()=>{oe(V,"style",`width: ${(e(d)===1?"100%":"0%")??""}`),k(y,"bg-blue-500",e(d)===1),k(y,"text-white",e(d)===1),k(y,"bg-gray-200",e(d)===0),k(y,"text-gray-600",e(d)===0)}),b(D,G),ae()}re(["click"]);export{Be as component};
