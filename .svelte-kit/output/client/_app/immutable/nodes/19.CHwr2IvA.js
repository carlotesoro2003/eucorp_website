import"../chunks/disclose-version.Bg9kRutz.js";import{p as Y,c as r,r as e,s as i,f as U,t as W,a as Z,aF as j,a2 as pt,b as n,g as s,n as vt}from"../chunks/runtime.CLSstnwU.js";import{d as st,c as ut,a as u,e as ht,t as b}from"../chunks/utils.kA-YjkFf.js";import{i as _t}from"../chunks/lifecycle.V0dJQ05z.js";import{o as mt}from"../chunks/index-client.DT-fMr9Z.js";import{s as M}from"../chunks/supabaseClient.CaMOPPuz.js";import{i as D}from"../chunks/if.b2Q-jNLG.js";import{e as K,i as O}from"../chunks/each.sV1uapQk.js";import{p as N}from"../chunks/proxy.D-58ufVl.js";import{b as kt}from"../chunks/select.BAP3DC-4.js";import{s as B}from"../chunks/render.D17u6ZCY.js";import{r as G}from"../chunks/attributes.DiUoHvyc.js";import{b as H}from"../chunks/input.CQDk-SFX.js";import{P as xt}from"../chunks/pencil.5iKfE7p4.js";import{X as bt}from"../chunks/x.DXpGL3Re.js";import{P as wt}from"../chunks/plus.WugTGZSv.js";var Rt=b('<div class="space-y-2"><label class="block text-sm font-medium">Name</label> <input type="text" class="w-full px-3 py-2 bg-background border border-border rounded-lg" required></div> <div class="space-y-2"><label class="block text-sm font-medium">Symbol</label> <input type="text" class="w-full px-3 py-2 bg-background border border-border rounded-lg" required></div>',1),Ct=b('<div class="space-y-2"><label class="block text-sm font-medium">Name</label> <input type="text" class="w-full px-3 py-2 bg-background border border-border rounded-lg" required></div> <div class="space-y-2"><label class="block text-sm font-medium">Value</label> <input type="number" class="w-full px-3 py-2 bg-background border border-border rounded-lg" required></div>',1),Et=b('<div class="space-y-2"><label class="block text-sm font-medium">Status</label> <input type="text" class="w-full px-3 py-2 bg-background border border-border rounded-lg" required></div>'),St=b('<form class="space-y-4"><h2 class="text-xl font-semibold mb-4"> </h2> <!> <div class="flex justify-end gap-2 pt-4"><button type="button" class="px-4 py-2 border border-border rounded-lg hover:bg-muted">Cancel</button> <button type="submit" class="px-4 py-2 bg-primary text-primary-foreground rounded-lg hover:bg-primary/90"> </button></div></form>');function Mt(F,t){Y(t,!0);let d=N(t.item?{...t.item}:{...t.type==="likelihoodRating"||t.type==="riskControlRating"?{name:"",symbol:""}:t.type==="severity"?{name:"",value:0}:{status:""}});const q=p=>{p.preventDefault(),t.onSave(d)};var C=St(),E=r(C),l=r(E);e(E);var R=i(E,2);D(R,()=>t.type==="likelihoodRating"||t.type==="riskControlRating",p=>{var g=Rt(),m=U(g),f=i(r(m),2);G(f),e(m);var y=i(m,2),h=i(r(y),2);G(h),e(y),H(f,()=>d.name,x=>d.name=x),H(h,()=>d.symbol,x=>d.symbol=x),u(p,g)},p=>{var g=ut(),m=U(g);D(m,()=>t.type==="severity",f=>{var y=Ct(),h=U(y),x=i(r(h),2);G(x),e(h);var z=i(h,2),T=i(r(z),2);G(T),e(z),H(x,()=>d.name,X=>d.name=X),H(T,()=>d.value,X=>d.value=X),u(f,y)},f=>{var y=Et(),h=i(r(y),2);G(h),e(y),H(h,()=>d.status,x=>d.status=x),u(f,y)},!0),u(p,g)});var c=i(R,2),v=r(c);v.__click=function(...p){var g;(g=t.onCancel)==null||g.apply(this,p)};var k=i(v,2),A=r(k,!0);e(k),e(c),e(C),W(()=>{B(l,`${(t.item?"Edit":"Add New")??""}
		${t.type??""}`),B(A,t.item?"Update":"Create")}),ht("submit",C,q),u(F,C),Z()}st(["click"]);var Ft=b('<td class="px-6 py-4"> </td> <td class="px-6 py-4"> </td>',1),Nt=b('<td class="px-6 py-4"> </td> <td class="px-6 py-4"> </td>',1),Dt=b('<td class="px-6 py-4"> </td>'),qt=(F,t)=>t.onEdit(t.item),At=(F,t)=>t.onDelete(t.item.id),jt=b('<tr class="hover:bg-muted/50"><!><td class="px-6 py-4"><div class="flex gap-2"><button class="p-2 hover:bg-muted rounded-lg"><!></button> <button class="p-2 hover:bg-red-100 text-red-500 rounded-lg"><!></button></div></td></tr>');function Q(F,t){Y(t,!0);var d=jt(),q=r(d);D(q,()=>t.type==="likelihoodRating"||t.type==="riskControlRating",k=>{var A=Ft(),p=U(A),g=r(p,!0);e(p);var m=i(p,2),f=r(m,!0);e(m),W(()=>{B(g,t.item.name),B(f,t.item.symbol)}),u(k,A)},k=>{var A=ut(),p=U(A);D(p,()=>t.type==="severity",g=>{var m=Nt(),f=U(m),y=r(f,!0);e(f);var h=i(f,2),x=r(h,!0);e(h),W(()=>{B(y,t.item.name),B(x,t.item.value)}),u(g,m)},g=>{var m=Dt(),f=r(m,!0);e(m),W(()=>B(f,t.item.status)),u(g,m)},!0),u(k,A)});var C=i(q),E=r(C),l=r(E);l.__click=[qt,t];var R=r(l);xt(R,{size:16}),e(l);var c=i(l,2);c.__click=[At,t];var v=r(c);bt(v,{size:16}),e(c),e(E),e(C),e(d),u(F,d),Z()}st(["click"]);var zt=(F,t,d)=>{n(t,null),n(d,!0)},Tt=b('<div class="flex justify-center p-8"><div class="animate-spin rounded-full h-8 w-8 border-b-2 border-primary"></div></div>'),It=b('<table class="w-full"><thead class="bg-muted/50"><tr><th class="px-6 py-4 text-left">Name</th><th class="px-6 py-4 text-left">Symbol</th><th class="px-6 py-4 text-left">Actions</th></tr></thead><tbody class="divide-y divide-border"></tbody></table>'),Lt=b('<table class="w-full"><thead class="bg-muted/50"><tr><th class="px-6 py-4 text-left">Name</th><th class="px-6 py-4 text-left">Value</th><th class="px-6 py-4 text-left">Actions</th></tr></thead><tbody class="divide-y divide-border"></tbody></table>'),Pt=b('<table class="w-full"><thead class="bg-muted/50"><tr><th class="px-6 py-4 text-left">Name</th><th class="px-6 py-4 text-left">Symbol</th><th class="px-6 py-4 text-left">Actions</th></tr></thead><tbody class="divide-y divide-border"></tbody></table>'),Vt=b('<table class="w-full"><thead class="bg-muted/50"><tr><th class="px-6 py-4 text-left">Status</th><th class="px-6 py-4 text-left">Actions</th></tr></thead><tbody class="divide-y divide-border"></tbody></table>'),Bt=b('<div class="overflow-x-auto shadow-lg rounded-lg bg-card border border-border"><!> <!> <!> <!></div>'),Ut=b('<div class="fixed inset-0 bg-background/80 backdrop-blur-sm flex items-center justify-center p-4 z-50"><div class="bg-card p-6 rounded-lg w-full max-w-md relative border border-border"><button class="absolute right-4 top-4 p-1 hover:bg-muted rounded-lg"><!></button> <!></div></div>'),Xt=b('<div class="min-h-screen container"><div class="flex justify-between items-center mb-6"><h1 class="text-2xl font-bold">Ratings Management</h1> <button class="flex items-center gap-2 bg-primary text-primary-foreground px-4 py-2 rounded-lg hover:bg-primary/90"><!> Add New</button></div> <div class="container mx-auto p-4"><label for="dataSelect" class="text-lg font-semibold mr-4">Select Data Type:</label> <div class="relative inline-block w-64"><select id="dataSelect" class="w-full px-4 py-2 bg-card border border-border rounded-lg appearance-none"><option>Likelihood Rating</option><option>Severity</option><option>Risk Control Rating</option><option>Risk Monitoring Rating</option></select> <div class="absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none"><svg class="w-5 h-5 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg></div></div></div> <!></div> <!>',1);function Gt(F,t){Y(t,!0);let d=j(N([])),q=j(N([])),C=j(N([])),E=j(N([])),l=j(!1),R=j(null),c=j("likelihoodRating"),v=j(!1),k=j(null);const A=async()=>{try{n(l,!0);const{data:a,error:o}=await M.from("likelihood_rating").select("*");if(o)throw o;n(d,N(a))}catch(a){console.error("Error fetching likelihood rating:",a),n(R,"Failed to fetch likelihood rating.")}finally{n(l,!1)}},p=async()=>{try{n(l,!0);const{data:a,error:o}=await M.from("severity").select("*");if(o)throw o;n(q,N(a))}catch(a){console.error("Error fetching severity:",a),n(R,"Failed to fetch severity.")}finally{n(l,!1)}},g=async()=>{try{n(l,!0);const{data:a,error:o}=await M.from("risk_control_rating").select("*");if(o)throw o;n(C,N(a))}catch(a){console.error("Error fetching risk control rating:",a),n(R,"Failed to fetch risk control rating.")}finally{n(l,!1)}},m=async()=>{try{n(l,!0);const{data:a,error:o}=await M.from("risk_monitoring_rating").select("*");if(o)throw o;n(E,N(a))}catch(a){console.error("Error fetching risk monitoring rating:",a),n(R,"Failed to fetch risk monitoring rating.")}finally{n(l,!1)}},f=async a=>{try{n(l,!0);const o=h();if(s(k)){const{error:w}=await M.from(o).update(a).eq("id",s(k).id);if(w)throw w}else{const{error:w}=await M.from(o).insert(a);if(w)throw w}await T(),x()}catch(o){console.error(o),n(R,`Failed to ${s(k)?"update":"create"} ${s(c)}`)}finally{n(l,!1)}},y=async a=>{if(confirm("Are you sure you want to delete this item?"))try{n(l,!0);const o=h(),{error:w}=await M.from(o).delete().eq("id",a);if(w)throw w;await T()}catch(o){console.error(o),n(R,"Failed to delete item")}finally{n(l,!1)}},h=()=>{switch(s(c)){case"likelihoodRating":return"likelihood_rating";case"severity":return"severity";case"riskControlRating":return"risk_control_rating";case"riskMonitoringRating":return"risk_monitoring_rating";default:throw new Error("Invalid table name")}},x=()=>{n(v,!1),n(k,null)},z=a=>{n(k,N(a)),n(v,!0)},T=async()=>{switch(s(c)){case"likelihoodRating":await A();break;case"severity":await p();break;case"riskControlRating":await g();break;case"riskMonitoringRating":await m();break}};mt(()=>{T()}),pt(()=>{T()});var X=Xt(),$=U(X),tt=r($),et=i(r(tt),2);et.__click=[zt,k,v];var gt=r(et);wt(gt,{size:20}),vt(),e(et),e(tt);var rt=i(tt,2),dt=i(r(rt),2),at=r(dt),ot=r(at);ot.value=(ot.__value="likelihoodRating")==null?"":"likelihoodRating";var it=i(ot);it.value=(it.__value="severity")==null?"":"severity";var nt=i(it);nt.value=(nt.__value="riskControlRating")==null?"":"riskControlRating";var ct=i(nt);ct.value=(ct.__value="riskMonitoringRating")==null?"":"riskMonitoringRating",e(at),vt(2),e(dt),e(rt);var ft=i(rt,2);D(ft,()=>s(l),a=>{var o=Tt();u(a,o)},a=>{var o=Bt(),w=r(o);D(w,()=>s(c)==="likelihoodRating",L=>{var _=It(),S=i(r(_));K(S,21,()=>s(d),O,(P,V)=>{Q(P,{get item(){return s(V)},onEdit:z,onDelete:y,type:"likelihoodRating"})}),e(S),e(_),u(L,_)});var I=i(w,2);D(I,()=>s(c)==="severity",L=>{var _=Lt(),S=i(r(_));K(S,21,()=>s(q),O,(P,V)=>{Q(P,{get item(){return s(V)},onEdit:z,onDelete:y,type:"severity"})}),e(S),e(_),u(L,_)});var J=i(I,2);D(J,()=>s(c)==="riskControlRating",L=>{var _=Pt(),S=i(r(_));K(S,21,()=>s(C),O,(P,V)=>{Q(P,{get item(){return s(V)},onEdit:z,onDelete:y,type:"riskControlRating"})}),e(S),e(_),u(L,_)});var lt=i(J,2);D(lt,()=>s(c)==="riskMonitoringRating",L=>{var _=Vt(),S=i(r(_));K(S,21,()=>s(E),O,(P,V)=>{Q(P,{get item(){return s(V)},onEdit:z,onDelete:y,type:"riskMonitoringRating"})}),e(S),e(_),u(L,_)}),e(o),u(a,o)}),e($);var yt=i($,2);D(yt,()=>s(v),a=>{var o=Ut(),w=r(o),I=r(w);I.__click=x;var J=r(I);bt(J,{size:20}),e(I);var lt=i(I,2);Mt(lt,{get type(){return s(c)},get item(){return s(k)},onSave:f,onCancel:x}),e(w),e(o),u(a,o)}),kt(at,()=>s(c),a=>n(c,a)),u(F,X),Z()}st(["click"]);var Ht=b('<main class="container mx-auto min-h-screen p-4"><!></main>');function se(F,t){Y(t,!1);const d=async()=>{const{data:c,error:v}=await M.from("likelihood_rating").select("*");v&&console.error("Error fetching likelihood rating:",v)},q=async()=>{const{data:c,error:v}=await M.from("severity").select("*");v&&console.error("Error fetching severity:",v)},C=async()=>{const{data:c,error:v}=await M.from("risk_control_rating").select("*");v&&console.error("Error fetching risk control rating:",v)},E=async()=>{const{data:c,error:v}=await M.from("risk_monitoring_rating").select("*");v&&console.error("Error fetching risk monitoring rating:",v)};mt(()=>{d(),q(),C(),E()}),_t();var l=Ht(),R=r(l);Gt(R,{}),e(l),u(F,l),Z()}export{se as component};
